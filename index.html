<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classicalia</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <meta name="description" content="Your comprehensive resource for Latin, Greek, and Classical Civilisation studies with interactive tools and video tutorials.">
    <meta property="og:title" content="Classicalia">
    <meta property="og:description" content="Your comprehensive resource for Latin, Greek, and Classical Civilisation studies with interactive tools and video tutorials.">
    
    <!-- Supabase for auth -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(to bottom, #0a0e27 0%, #1a1f3a 40%, #0d1224 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Starry night sky with varying star sizes */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle, white 1px, transparent 1px),
                radial-gradient(circle, rgba(255, 255, 255, 0.8) 1px, transparent 1px),
                radial-gradient(circle, rgba(255, 255, 255, 0.6) 1px, transparent 1px),
                radial-gradient(circle, rgba(255, 215, 0, 0.9) 2px, transparent 2px);
            background-size: 300px 300px, 250px 250px, 400px 400px, 500px 500px;
            background-position: 0 0, 130px 70px, 50px 120px, 200px 30px;
            pointer-events: none;
            z-index: 0;
            animation: stars-twinkle 3s ease-in-out infinite alternate;
        }

        @keyframes stars-twinkle {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Subtle galaxy formation */
        .galaxy {
            position: fixed;
            width: 200px;
            height: 200px;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            animation: galaxy-form 20s ease-in-out infinite;
        }

        .galaxy-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            border-radius: 50%;
            animation: spiral 20s linear infinite;
        }

        @keyframes galaxy-form {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 0.6; }
            50% { opacity: 0.8; }
        }

        @keyframes spiral {
            0% {
                transform: rotate(0deg) translateX(0px);
                opacity: 0;
            }
            20% {
                opacity: 0.8;
            }
            100% {
                transform: rotate(720deg) translateX(100px);
                opacity: 0;
            }
        }

        /* Northern Lights aurora effect */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60%;
            background: 
                radial-gradient(ellipse 80% 50% at 30% 30%, rgba(0, 255, 150, 0.12), transparent),
                radial-gradient(ellipse 70% 40% at 70% 40%, rgba(100, 200, 255, 0.15), transparent),
                radial-gradient(ellipse 60% 35% at 50% 25%, rgba(150, 100, 255, 0.1), transparent);
            pointer-events: none;
            z-index: 0;
            animation: aurora-shimmer 12s ease-in-out infinite;
        }

        @keyframes aurora-shimmer {
            0%, 100% { 
                opacity: 0.5;
            }
            25% {
                opacity: 0.7;
            }
            50% { 
                opacity: 0.6;
            }
            75% {
                opacity: 0.8;
            }
        }

        /* Subtle snowfall effect - only in header content */
        .snowflake {
            position: absolute;
            top: 0;
            color: rgba(255, 255, 255, 1);
            font-size: 1em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.9), 0 0 15px rgba(200, 230, 255, 0.6);
            z-index: 10;
            pointer-events: none;
            animation: fall-header linear forwards;
        }

        @keyframes fall-header {
            to {
                transform: translateY(180px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .header-content {
            position: relative;
            overflow: hidden;
        }

        /* Festive sparkle effect */
        .sparkle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: gold;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            animation: sparkle 2s ease-in-out infinite;
            box-shadow: 0 0 6px gold;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Shooting star effect */
        .shooting-star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            box-shadow: 0 0 4px white, 0 0 8px white;
        }

        @keyframes shooting-star-move {
            0% { 
                opacity: 0;
                transform: translateX(0) translateY(0);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% { 
                opacity: 0;
                transform: translateX(200px) translateY(200px);
            }
        }

        /* Colored shooting stars */
        .shooting-star-colored {
            position: fixed;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes colored-star-move {
            0% { 
                opacity: 0;
                transform: translateX(0) translateY(0) scale(0.5);
            }
            10% {
                opacity: 0.9;
                transform: translateX(20px) translateY(20px) scale(1);
            }
            90% {
                opacity: 0.9;
            }
            100% { 
                opacity: 0;
                transform: translateX(250px) translateY(250px) scale(0.3);
            }
        }

        /* Twinkling burst effect */
        .twinkle-burst {
            position: fixed;
            width: 8px;
            height: 8px;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes twinkle-burst {
            0% { 
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
            100% { 
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }

        /* Star explosion effect */
        .star-explosion {
            position: fixed;
            pointer-events: none;
            z-index: 1;
        }

        .explosion-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 4px white, 0 0 8px rgba(255, 255, 255, 0.5);
        }

        @keyframes explode-particle {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0.3);
            }
        }

        /* Old-fashioned Christmas lights string */
        .christmas-lights {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            z-index: 10000;
            pointer-events: none;
        }

        .light-bulb {
            position: absolute;
            width: 12px;
            height: 16px;
            border-radius: 0 0 50% 50%;
            top: 8px;
            background: currentColor;
            box-shadow: 
                inset 0 0 8px rgba(255, 255, 255, 0.8),
                0 0 15px currentColor, 
                0 0 25px currentColor,
                0 0 35px currentColor;
            animation: bulb-glow 2s ease-in-out infinite;
        }

        .light-bulb::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 6px;
            background: #333;
            border-radius: 2px;
        }

        .light-bulb::after {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 10px;
            background: #222;
        }

        .light-red { color: #ff0000; animation-delay: 0s; }
        .light-blue { color: #0066ff; animation-delay: 0.5s; }
        .light-green { color: #00ff00; animation-delay: 1s; }
        .light-yellow { color: #ffff00; animation-delay: 1.5s; }
        .light-orange { color: #ff8800; animation-delay: 0.25s; }
        .light-purple { color: #ff00ff; animation-delay: 0.75s; }

        @keyframes bulb-glow {
            0%, 100% { 
                opacity: 0.7; 
                filter: brightness(0.8);
            }
            50% { 
                opacity: 1; 
                filter: brightness(1.3);
            }
        }

        /* Wire connecting the lights - droopy style */
        .light-wire {
            position: absolute;
            top: 8px;
            left: 0;
            width: 100%;
            height: 100px;
            overflow: visible;
        }

        .wire-segment {
            position: absolute;
            width: 60px;
            height: 40px;
            border: none;
            border-bottom: 2px solid #222;
            border-radius: 0 0 100% 100%;
        }

        /* Festive border decoration */
        .card {
            background: white;
            border-radius: 16px;
            border: 2px solid transparent;
            background-image: linear-gradient(white, white), linear-gradient(135deg, #c41e3a 0%, #ffd700 50%, #2d5016 100%);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6), 0 0 30px rgba(255, 215, 0, 0.15);
            position: relative;
            animation: gentle-glow 3s ease-in-out infinite;
        }

        @keyframes gentle-glow {
            0%, 100% { box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6), 0 0 30px rgba(255, 215, 0, 0.15); }
            50% { box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.3); }
        }

        /* Twinkling lights effect on cards */
        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 0, 0, 0.4) 10%,
                transparent 20%,
                rgba(0, 255, 0, 0.4) 30%,
                transparent 40%,
                rgba(255, 215, 0, 0.4) 50%,
                transparent 60%,
                rgba(255, 0, 0, 0.4) 70%,
                transparent 80%,
                rgba(0, 255, 0, 0.4) 90%,
                transparent 100%
            );
            background-size: 200% 100%;
            border-radius: 16px;
            pointer-events: none;
            z-index: -1;
            animation: lights-twinkle 4s linear infinite;
        }

        @keyframes lights-twinkle {
            0% { background-position: 0% 0%; opacity: 0.3; }
            50% { opacity: 0.6; }
            100% { background-position: 200% 0%; opacity: 0.3; }
        }

        .widget {
            background: white;
            border-radius: 16px;
            border: 2px solid transparent;
            background-image: linear-gradient(white, white), linear-gradient(135deg, #2d5016 0%, #ffd700 50%, #c41e3a 100%);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            padding: 1.5rem;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6), 0 0 30px rgba(255, 215, 0, 0.15);
            position: relative;
            animation: gentle-glow 3s ease-in-out infinite;
            animation-delay: 1s;
        }

        /* Twinkling lights effect on widgets */
        .widget::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 0, 0.4) 10%,
                transparent 20%,
                rgba(255, 215, 0, 0.4) 30%,
                transparent 40%,
                rgba(255, 0, 0, 0.4) 50%,
                transparent 60%,
                rgba(0, 255, 0, 0.4) 70%,
                transparent 80%,
                rgba(255, 215, 0, 0.4) 90%,
                transparent 100%
            );
            background-size: 200% 100%;
            border-radius: 16px;
            pointer-events: none;
            z-index: -1;
            animation: lights-twinkle 4s linear infinite;
            animation-delay: 0.5s;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 1rem 2rem;
            position: relative;
        }

        .header-content {
            background: linear-gradient(135deg, #a91629 0%, #7a1220 100%);
            border-radius: 24px;
            padding: 2rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 215, 0, 0.4);
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #c41e3a;
            font-weight: 700;
            font-size: 2rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            z-index: 1;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .header-text {
            text-align: center;
            z-index: 1;
        }

        .header-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.35rem;
            letter-spacing: -0.02em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 0.25rem;
            font-weight: 400;
        }

        .header-author {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 400;
            letter-spacing: 0.03em;
        }

        .info-btn {
            position: absolute;
            right: 2rem;
            top: 2rem;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .info-btn:hover {
            background: #f8f9fa;
            transform: scale(1.05);
        }

        /* === HAMBURGER MENU STYLES === */
        .hamburger-btn {
            display: none;
            position: absolute;
            left: 2rem;
            top: 2rem;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: white;
            border: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .hamburger-btn:hover {
            background: #f0f4ff;
            transform: scale(1.05);
        }

        .hamburger-btn span {
            display: block;
            width: 20px;
            height: 2px;
            background: #c41e3a;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .hamburger-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-menu-overlay.active {
            display: block;
            opacity: 1;
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100%;
            background: white;
            z-index: 1000;
            transition: left 0.3s ease;
            overflow-y: auto;
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.15);
        }

        .mobile-menu.active {
            left: 0;
        }

        .mobile-menu-header {
            background: linear-gradient(135deg, #a91629 0%, #7a1220 100%);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-menu-title {
            color: white;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .mobile-menu-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .mobile-menu-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .mobile-menu-content {
            padding: 1rem;
        }

        .mobile-nav-section {
            margin-bottom: 1.5rem;
        }

        .mobile-nav-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #9ca3af;
            margin-bottom: 0.5rem;
            font-weight: 600;
            padding: 0 0.5rem;
        }

        .mobile-nav-link {
            display: block;
            padding: 0.75rem;
            color: #4b5563;
            text-decoration: none;
            font-size: 0.95rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .mobile-nav-link:hover {
            background: #f0f4ff;
            color: #c41e3a;
        }
        /* === END HAMBURGER MENU STYLES === */

        /* === AUTH STYLES === */
        .auth-section {
            position: absolute;
            left: 4rem;
            top: 4rem;
            z-index: 100;
        }
        .guest-buttons {
            display: flex;
            gap: 10px;
        }
        .guest-buttons.hidden { display: none; }
        .auth-btn {
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            border: none;
        }
        .auth-btn-login {
            background: white;
            color: #c41e3a;
        }
        .auth-btn-login:hover {
            background: #f0f4ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .auth-btn-register {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        .auth-btn-register:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .user-menu { display: none; }
        .user-menu.visible { display: flex; }
        .user-dropdown { position: relative; }
        .dropdown-toggle {
            background: white;
            border: none;
            padding: 8px 14px 8px 10px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            color: #333;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .dropdown-toggle:hover {
            background: #f0f4ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #c41e3a, #8b1a2e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 0.85rem;
        }
        .user-name-display {
            font-size: 0.9rem;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .dropdown-arrow {
            font-size: 0.7rem;
            color: #666;
            transition: transform 0.2s;
        }
        .dropdown-toggle.open .dropdown-arrow { transform: rotate(180deg); }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.18);
            min-width: 220px;
            overflow: hidden;
            z-index: 100;
            border: 1px solid #e5e7eb;
        }
        .dropdown-menu.open {
            display: block;
            animation: dropdownFade 0.2s ease;
        }
        @keyframes dropdownFade {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .dropdown-header {
            padding: 14px 16px;
            border-bottom: 1px solid #f0f0f0;
            background: #f9fafb;
        }
        .dropdown-header-name {
            font-weight: 600;
            color: #333;
            font-size: 0.95rem;
        }
        .dropdown-header-role {
            font-size: 0.8rem;
            color: #666;
            margin-top: 2px;
            text-transform: capitalize;
        }
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            color: #333;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }
        .dropdown-item:hover { background: #f5f7ff; }
        .dropdown-item-icon { font-size: 1.1rem; }
        .dropdown-divider {
            height: 1px;
            background: #f0f0f0;
            margin: 4px 0;
        }
        .dropdown-item.danger { color: #dc2626; }
        .dropdown-item.danger:hover { background: #fef2f2; }
        /* === END AUTH STYLES === */

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 180px 1fr 300px;
            gap: 2rem;
            align-items: start;
        }

        /* Left Sidebar */
        .left-sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .nav-section {
            margin-bottom: 0;
        }

        .nav-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #9ca3af;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 0;
            color: #4b5563;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s ease;
        }

        .nav-link:hover {
            color: #2d5016;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #f3f4f6;
            background: linear-gradient(to right, #fafbfc 0%, #fff 100%);
            position: relative;
        }

        .card-header::after {
            content: '‚ú®';
            position: absolute;
            right: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            opacity: 0.4;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Subject Cards */
        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .subject-card {
            background: #f9fafb;
            border: 1px solid #f3f4f6;
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.2s ease;
            cursor: pointer;
            display: flex;
            align-items: start;
            gap: 1rem;
        }

        .subject-card:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .subject-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            flex-shrink: 0;
        }

        .latin-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .greek-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .civ-icon { background: linear-gradient(135deg, #b91c1c 0%, #7f1d1d 100%); color: white; }
        .english-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }

        .subject-info {
            flex: 1;
            min-width: 0;
        }

        .subject-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .subject-links {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .subject-link {
            font-size: 0.75rem;
            color: #6b7280;
            text-decoration: none;
            padding: 0.25rem 0.6rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .subject-link:hover {
            border-color: #c41e3a;
            color: #c41e3a;
        }

        /* Stats */
        .stats-section {
            background: linear-gradient(135deg, #f5f5f5 0%, #e5e5e5 100%);
            padding: 1.5rem;
            border-top: 2px solid #c41e3a;
            position: relative;
        }

        .stats-section::before {
            content: 'üéÑüéÅüéÑ';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            background: white;
            padding: 0 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #c41e3a;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }

        /* Reviews */
        .review-content {
            background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
            border: 1px solid #f3f4f6;
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 200px;
        }

        .review-card {
            display: none;
        }

        .review-card.active {
            display: block;
        }

        .review-text {
            font-size: 1.05rem;
            line-height: 1.6;
            color: #4b5563;
            font-style: italic;
            margin-bottom: 1.5rem;
        }

        .review-author {
            border-top: 1px solid #e5e7eb;
            padding-top: 1rem;
        }

        .review-name {
            font-weight: 600;
            color: #2d5016;
        }

        .review-role {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .carousel-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .carousel-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(196, 30, 58, 0.1);
            border: 1px solid rgba(196, 30, 58, 0.2);
            color: #c41e3a;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .carousel-btn:hover {
            background: #2d5016;
            color: white;
        }

        .carousel-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .carousel-dots {
            display: flex;
            gap: 0.5rem;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(196, 30, 58, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .dot.active {
            background: #2d5016;
            width: 24px;
            border-radius: 4px;
        }

        /* Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .tool-card {
            background: #f9fafb;
            border: 1px solid #f3f4f6;
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
            border-color: #c41e3a;
            box-shadow: 0 4px 12px rgba(196, 30, 58, 0.15);
        }

        .tool-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .timer-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .seating-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .noise-icon { background: linear-gradient(135deg, #b91c1c 0%, #7f1d1d 100%); color: white; }
        .randomizer-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .quiz-icon { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .flashcard-icon { background: linear-gradient(135deg, #b91c1c 0%, #7f1d1d 100%); color: white; }
        .visualiser-icon { background: linear-gradient(135deg, #991b1b 0%, #7f1d1d 100%); color: white; }

        .tool-name {
            font-size: 0.95rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .tool-description {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        /* Right Sidebar */
        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .widget h3 {
            font-size: 1.05rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .history-event {
            padding: 0.75rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .history-event:last-child {
            border-bottom: none;
        }

        .event-year {
            font-weight: 600;
            color: #c41e3a;
            font-size: 0.85rem;
        }

        .event-text {
            color: #6b7280;
            font-size: 0.85rem;
            line-height: 1.4;
            margin-top: 0.25rem;
        }

        .latin-quote {
            color: #2d5016;
            font-style: italic;
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 0.5rem;
            font-family: Georgia, serif;
        }

        .quote-translation {
            color: #6b7280;
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 0.75rem;
        }

        .quote-attribution {
            font-size: 0.8rem;
            color: #9ca3af;
            text-align: right;
            border-top: 1px solid #f3f4f6;
            padding-top: 0.5rem;
            margin-top: 0.5rem;
        }

        .quote-author {
            font-weight: 600;
            color: #c41e3a;
        }

        .widget p {
            color: #6b7280;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .widget p + p {
            margin-top: 0.75rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: white;
            margin: 3% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 900px;
            position: relative;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .modal-header {
            padding: 1.5rem 2rem 1rem 2rem;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }

        .modal-body {
            display: flex;
            gap: 2rem;
            padding: 1rem 2rem;
            align-items: flex-start;
        }

        .modal-text {
            flex: 2;
        }

        .modal-text p {
            margin: 0 0 1rem 0;
            line-height: 1.5;
            color: #555;
            font-size: 0.9rem;
        }

        .modal-image img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #e0e0e0;
        }

        .modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid #f0f0f0;
            background-color: #fafafa;
            border-radius: 0 0 16px 16px;
        }

        .contact-items {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .contact-item {
            flex: 1;
            min-width: 200px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e5e5;
        }

        .contact-item a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: inherit;
            width: 100%;
        }

        .contact-icon {
            font-size: 1.2rem;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 50%;
        }

        .contact-label {
            font-weight: 600;
            color: #333;
            font-size: 0.85rem;
        }

        .contact-value {
            color: #666;
            font-size: 0.8rem;
        }

        .modal-signature {
            text-align: center;
            margin-top: 1rem;
        }

        .modal-signature p {
            margin: 0.25rem 0;
            color: #777;
            font-size: 0.9rem;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            color: #aaa;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close:hover {
            color: #333;
            background-color: #f0f0f0;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr 300px;
            }

            .left-sidebar {
                display: none;
            }

            .hamburger-btn {
                display: flex;
            }

            .auth-section {
                left: 5rem;
            }
        }

        @media (max-width: 900px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .right-sidebar {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .subjects-grid {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .right-sidebar {
                grid-template-columns: 1fr;
            }

            .modal-body {
                flex-direction: column;
                align-items: center;
            }
            
            .auth-section { left: 5rem; top: 3rem; }
            .auth-btn { padding: 8px 12px; font-size: 0.8rem; }
            .user-name-display { display: none; }

            .hamburger-btn {
                left: 1rem;
                top: 3rem;
            }

            .info-btn {
                right: 1rem;
                top: 3rem;
            }
        }

        @media (max-width: 480px) {
            .auth-section {
                left: 4rem;
                top: 3rem;
            }

            .guest-buttons {
                flex-direction: column;
                gap: 6px;
            }

            .auth-btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
        }

        /* 12 Days of Christmas Advent Calendar */
        .advent-calendar {
            background: white;
            border-radius: 16px;
            border: 2px solid transparent;
            background-image: linear-gradient(white, white), linear-gradient(135deg, #c41e3a 0%, #ffd700 50%, #2d5016 100%);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6), 0 0 30px rgba(255, 215, 0, 0.15);
            position: relative;
            animation: gentle-glow 3s ease-in-out infinite;
            animation-delay: 0.5s;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .advent-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .advent-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #c41e3a;
            margin-bottom: 0.5rem;
        }

        .advent-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
            font-style: italic;
        }

        .advent-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .advent-door {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .advent-door:hover:not(.locked):not(.opened) {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .advent-door.locked {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .advent-door.opened {
            background: linear-gradient(135deg, #2d5016 0%, #1a3a1a 100%);
        }

        .advent-door.available {
            animation: door-glow 2s ease-in-out infinite;
        }

        @keyframes door-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 0 25px rgba(255, 215, 0, 0.6); }
        }

        .door-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            font-family: Georgia, serif;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        .door-icon {
            font-size: 1.2rem;
            margin-top: 0.25rem;
            z-index: 2;
        }

        .door-lock {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1rem;
            opacity: 0.7;
        }

        /* Modal for advent content */
        .advent-modal {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(4px);
        }

        .advent-modal-content {
            background: white;
            margin: 10% auto;
            padding: 3rem;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 2px solid rgba(255, 215, 0, 0.5);
        }

        .advent-modal-header {
            font-size: 2rem;
            font-weight: 700;
            color: #c41e3a;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .advent-modal-body {
            font-size: 1.3rem;
            color: #4b5563;
            line-height: 1.8;
            text-align: center;
        }

        .advent-modal-latin {
            font-size: 1.8rem;
            color: #2d5016;
            font-style: italic;
            font-weight: 600;
            margin-bottom: 1.5rem;
            font-family: Georgia, serif;
        }

        .advent-modal-close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #9ca3af;
            background: none;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .advent-modal-close:hover {
            background: #f3f4f6;
            color: #4b5563;
        }

        @media (max-width: 768px) {
            .advent-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Site Announcements */
        .announcements-container {
            margin-bottom: 1.5rem;
        }
        .announcement-banner {
            padding: 1rem 1.5rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        .announcement-banner.info {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            border: 1px solid #93c5fd;
        }
        .announcement-banner.warning {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #fbbf24;
        }
        .announcement-banner.success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 1px solid #34d399;
        }
        .announcement-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        .announcement-content {
            flex: 1;
        }
        .announcement-title {
            font-weight: 600;
            font-size: 1rem;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }
        .announcement-text {
            font-size: 0.9rem;
            color: #4b5563;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

    <!-- Mobile Menu -->
    <nav class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <span class="mobile-menu-title">Menu</span>
            <button class="mobile-menu-close" id="mobileMenuClose">&times;</button>
        </div>
        <div class="mobile-menu-content">
            <div class="mobile-nav-section">
                <div class="mobile-nav-title">More</div>
                <a href="blog/index.html" class="mobile-nav-link">Read my blog</a>
                <a href="why.html" class="mobile-nav-link">Why study Classics?</a>
            </div>
            
            <div class="mobile-nav-section">
                <div class="mobile-nav-title">Additional Sites</div>
                <a href="https://www.perseus.tufts.edu/" target="_blank" class="mobile-nav-link">Perseus Digital Library</a>
                <a href="https://www.thelatinlibrary.com/" target="_blank" class="mobile-nav-link">The Latin Library</a>
                <a href="https://www.loebclassics.com/" target="_blank" class="mobile-nav-link">Loeb Classical Library</a>
                <a href="https://sites.google.com/view/theowlclassics/home" target="_blank" class="mobile-nav-link">The Owl</a>
            </div>
                
            <div class="mobile-nav-section">
                <div class="mobile-nav-title">Teaching Resources</div>
                <a href="https://www.cambridgescp.com/" target="_blank" class="mobile-nav-link">Cambridge Latin Course</a>
                <a href="https://www.hands-up-education.org/" target="_blank" class="mobile-nav-link">Hands Up Education</a>
                <a href="https://www.theclassicslibrary.com/" target="_blank" class="mobile-nav-link">Classics Library</a>
                <a href="https://www.massolit.io/subjects/classics/landing" target="_blank" class="mobile-nav-link">Massolit Classics</a>
                <a href="https://www.classicalassociation.org/" target="_blank" class="mobile-nav-link">Classical Association</a>
            </div>

            <div class="mobile-nav-section">
                <div class="mobile-nav-title">Specifications</div>
                <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/latin-h043-h443-from-2016/" target="_blank" class="mobile-nav-link">OCR A Level Latin</a>
                <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/classical-greek-h444-h044-from-2016/" target="_blank" class="mobile-nav-link">OCR A Level Greek</a>
                <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/classical-civilisation-h008-h408-from-2017/" target="_blank" class="mobile-nav-link">OCR A Level Classics</a>
                <a href="https://www.ocr.org.uk/qualifications/gcse/latin-j282-from-2016/" class="mobile-nav-link">OCR GCSE Latin</a>
                <a href="https://www.ocr.org.uk/qualifications/gcse/classical-greek-j292-from-2016/" target="_blank" class="mobile-nav-link">OCR GCSE Greek</a>
                <a href="https://www.ocr.org.uk/qualifications/gcse/classical-civilisation-j199-from-2017/" class="mobile-nav-link">OCR GCSE Classics</a>
            </div>
        </div>
    </nav>

    <!-- Christmas Lights String -->
    <div class="christmas-lights">
        <div class="light-wire"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-container">
            
            <!-- Hamburger Button -->
            <button class="hamburger-btn" id="hamburgerBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <!-- === AUTH SECTION (outside header-content to avoid overflow clipping) === -->
            <div class="auth-section">
                <div class="guest-buttons" id="guestButtons">
                    <a href="auth/login.html" class="auth-btn auth-btn-login">Log in</a>
                    <a href="auth/register.html" class="auth-btn auth-btn-register">Sign up</a>
                </div>
                <div class="user-menu" id="userMenu">
                    <div class="user-dropdown">
                        <button class="dropdown-toggle" id="dropdownToggle">
                            <span class="user-avatar" id="userAvatar">?</span>
                            <span class="user-name-display" id="userName">User</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </button>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <div class="dropdown-header">
                                <div class="dropdown-header-name" id="dropdownName">User</div>
                                <div class="dropdown-header-role" id="dropdownRole">Student</div>
                            </div>
                            <a href="#" class="dropdown-item" id="dashboardLink">
                                <span class="dropdown-item-icon">üìä</span>
                                My Dashboard
                            </a>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item danger" id="logoutBtn">
                                <span class="dropdown-item-icon">üö™</span>
                                Log out
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- === END AUTH SECTION === -->
            
            <div class="header-content">
                <div class="logo-icon">C</div>
                <div class="header-text">
                    <h1 class="header-title">üéÑ Classicalia üéÑ</h1>
                    <p class="header-subtitle">All things Classics, in one place</p>
                    <p class="header-author">by Lawrence McNally ‚Ä¢ Season's Greetings!</p>
                </div>
            </div>
            <button class="info-btn" onclick="showInfoModal()">‚ÑπÔ∏è</button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <div class="dashboard-grid">
            
            <!-- Left Sidebar -->
            <aside class="left-sidebar">
                <nav class="nav-section">
                    <div class="nav-title">More</div>
                    <a href="blog/index.html" class="nav-link">Read my blog</a>
                    <a href="why.html" class="nav-link">Why study Classics?</a>
                </nav>
                
                <nav class="nav-section">
                    <div class="nav-title">Additional Sites</div>
                    <a href="https://www.perseus.tufts.edu/" target="_blank" class="nav-link">Perseus Digital Library</a>
                    <a href="https://www.thelatinlibrary.com/" target="_blank" class="nav-link">The Latin Library</a>
                    <a href="https://www.loebclassics.com/" target="_blank" class="nav-link">Loeb Classical Library</a>
                    <a href="https://sites.google.com/view/theowlclassics/home" target="_blank" class="nav-link">The Owl</a>
                </nav>
                    
                <nav class="nav-section">
                    <div class="nav-title">Teaching Resources</div>
                    <a href="https://www.cambridgescp.com/" target="_blank" class="nav-link">Cambridge Latin Course</a>
                    <a href="https://www.hands-up-education.org/" target="_blank" class="nav-link">Hands Up Education</a>
                    <a href="https://www.theclassicslibrary.com/" target="_blank" class="nav-link">Classics Library</a>
                    <a href="https://www.massolit.io/subjects/classics/landing" target="_blank" class="nav-link">Massolit Classics</a>
                    <a href="https://www.classicalassociation.org/" target="_blank" class="nav-link">Classical Association</a>
                </nav>

                <nav class="nav-section">
                    <div class="nav-title">Specifications</div>
                    <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/latin-h043-h443-from-2016/" target="_blank" class="nav-link">OCR A Level Latin</a>
                    <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/classical-greek-h444-h044-from-2016/" target="_blank" class="nav-link">OCR A Level Greek</a>
                    <a href="https://www.ocr.org.uk/qualifications/as-and-a-level/classical-civilisation-h008-h408-from-2017/" target="_blank" class="nav-link">OCR A Level Classics</a>
                    <a href="https://www.ocr.org.uk/qualifications/gcse/latin-j282-from-2016/" class="nav-link">OCR GCSE Latin</a>
                    <a href="https://www.ocr.org.uk/qualifications/gcse/classical-greek-j292-from-2016/" target="_blank" class="nav-link">OCR GCSE Greek</a>
                    <a href="https://www.ocr.org.uk/qualifications/gcse/classical-civilisation-j199-from-2017/" class="nav-link">OCR GCSE Classics</a>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="main-content">

                <!-- Site Announcements -->
                <div class="announcements-container" id="announcementsContainer">
                    <!-- Announcements loaded from Supabase -->
                </div>

                <!-- Subjects Card -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Choose Your Subject</h2>
                    </div>
                    
                    <div class="card-body">
                        <div class="subjects-grid">
                            
                            <div class="subject-card" onclick="window.location.href='latin/courses/index.html'">
                                <div class="subject-icon latin-icon">üéÖ</div>
                                <div class="subject-info">
                                    <div class="subject-name">Latin</div>
                                    <div class="subject-links">
                                        <a href="latin/vocabulary-hub.html" class="subject-link" onclick="event.stopPropagation()">Vocab Tester</a>
                                        <a href="latin/literature/set-text-quiz.html" class="subject-link" onclick="event.stopPropagation()">Set Text Tester</a>
                                        <a href="latin/texts.html" class="subject-link" onclick="event.stopPropagation()">Videos</a>
                                        <a href="latin/interactive/index.html" class="subject-link" onclick="event.stopPropagation()">Texts</a>
                                        <a href="latin/courses/index.html" class="subject-link" onclick="event.stopPropagation()">Language</a>
                                    </div>
                                </div>
                            </div>

                            <div class="subject-card" onclick="window.location.href='greek/courses/index.html'">
                                <div class="subject-icon greek-icon">üéÑ</div>
                                <div class="subject-info">
                                    <div class="subject-name">Greek</div>
                                    <div class="subject-links">
                                        <a href="greek/vocabulary-hub.html" class="subject-link" onclick="event.stopPropagation()">Vocabulary</a>
                                        <a href="greek/texts.html" class="subject-link" onclick="event.stopPropagation()">Texts</a>
                                        <a href="greek/courses/index.html" class="subject-link" onclick="event.stopPropagation()">Language</a>
                                    </div>
                                </div>
                            </div>

                            <div class="subject-card" onclick="window.location.href='classical-civ/index.html'">
                                <div class="subject-icon civ-icon">üéÅ</div>
                                <div class="subject-info">
                                    <div class="subject-name">Classical Civilisation</div>
                                    <div class="subject-links">
                                        <a href="classics/quiz.html" class="subject-link" onclick="event.stopPropagation()">Content Tester</a>
                                        <a href="classical-civ/index.html" class="subject-link" onclick="event.stopPropagation()">Courses</a>
                                        <a href="#" class="subject-link" onclick="event.stopPropagation()">Resources</a>
                                    </div>
                                </div>
                            </div>

                            <div class="subject-card" onclick="window.location.href='english/interactive/index.html'">
                                <div class="subject-icon english-icon">‚≠ê</div>
                                <div class="subject-info">
                                    <div class="subject-name">English</div>
                                    <div class="subject-links">
                                        <a href="english/interactive/index.html" class="subject-link" onclick="event.stopPropagation()">Interactive</a>
                                        <a href="#" class="subject-link" onclick="event.stopPropagation()">Resources</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="stats-section">
                        <div class="stats-grid">
                            <div>
                                <div class="stat-number">100+</div>
                                <div class="stat-label">Lessons</div>
                            </div>
                            <div>
                                <div class="stat-number" id="visit-counter">...</div>
                                <div class="stat-label">Visits</div>
                            </div>
                            <div>
                                <div class="stat-number">100%</div>
                                <div class="stat-label">Free Forever</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 12 Days of Christmas Advent Calendar -->
                <div class="advent-calendar">
                    <div class="advent-header">
                        <h2 class="advent-title">üéÑ XII Dies Nativitatis üéÑ</h2>
                        <p class="advent-subtitle">12 Days of Roman Winter Celebrations</p>
                    </div>
                    <div class="advent-grid" id="adventGrid">
                        <!-- Doors will be generated by JavaScript -->
                    </div>
                </div>

                <!-- Reviews Card -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">What People Are Saying</h2>
                    </div>
                    
                    <div class="card-body">
                        <div class="review-content" id="reviewsCarousel">
                            <!-- Reviews will be loaded here -->
                        </div>

                        <div class="carousel-controls">
                            <button class="carousel-btn" onclick="previousReview()" id="prevBtn">‚Äπ</button>
                            <div class="carousel-dots" id="carouselDots"></div>
                            <button class="carousel-btn" onclick="nextReview()" id="nextBtn">‚Ä∫</button>
                        </div>
                    </div>
                </div>

                <!-- Tools Card -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Resources & Tools</h2>
                    </div>
                    
                    <div class="card-body">
                        <div class="tools-grid">
                            
                            <div class="tool-card" onclick="window.location.href='tools/timer.html'">
                                <div class="tool-icon timer-icon">‚è±Ô∏è</div>
                                <div class="tool-name">Class Timer</div>
                                <div class="tool-description">Countdown timer for activities</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/seating.html'">
                                <div class="tool-icon seating-icon">ü™ë</div>
                                <div class="tool-name">Seating Plan</div>
                                <div class="tool-description">Random seating generator</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/noise.html'">
                                <div class="tool-icon noise-icon">üîä</div>
                                <div class="tool-name">Noise Level</div>
                                <div class="tool-description">Classroom noise monitor</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/randomizer.html'">
                                <div class="tool-icon randomizer-icon">üé≤</div>
                                <div class="tool-name">Name Picker</div>
                                <div class="tool-description">Random student selector</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/quiz.html'">
                                <div class="tool-icon quiz-icon">‚ùì</div>
                                <div class="tool-name">Quick Quiz</div>
                                <div class="tool-description">Interactive quiz creator</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/flashcards.html'">
                                <div class="tool-icon flashcard-icon">üìã</div>
                                <div class="tool-name">Flashcards</div>
                                <div class="tool-description">Digital flashcard maker</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/visualiser.html'">
                                <div class="tool-icon visualiser-icon">üì∑</div>
                                <div class="tool-name">Visualiser</div>
                                <div class="tool-description">Document camera display</div>
                            </div>

                            <div class="tool-card" onclick="window.location.href='tools/wordcloud.html'">
                                <div class="tool-icon" style="background: #dbeafe;">‚òÅÔ∏è</div>
                                <div class="tool-name">Word Cloud</div>
                                <div class="tool-description">Live class word cloud</div>
                            </div>

                        </div>
                    </div>
                </div>

            </main>

            <!-- Right Sidebar -->
            <aside class="right-sidebar">
                
                <!-- Today's Connections -->
                <div class="widget" style="cursor: pointer; border: 2px solid #c41e3a;" onclick="window.location.href='games/connections/connections.html'">
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #c41e3a; margin-bottom: 0.5rem; font-family: Georgia, serif;">
                            Connexiones
                        </div>
                        <div style="font-size: 0.85rem; color: #6b7280;">
                            Latin & Classics word puzzle
                        </div>
                    </div>
                </div>
                
                <!-- Today's Date in Roman Numerals -->
                <div class="widget">
                    <div id="roman-date" style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #c41e3a; margin-bottom: 0.5rem; font-family: Georgia, serif;" id="roman-date-display">
                            Loading...
                        </div>
                        <div style="font-size: 0.85rem; color: #6b7280;" id="roman-date-translation">
                            Loading...
                        </div>
                    </div>
                </div>

                <!-- Today in History -->
                <div class="widget">
                    <h3>Today in Ancient History</h3>
                    <div id="history-events">
                        <div class="history-event">
                            <div class="event-year">Loading...</div>
                            <div class="event-text">Historical events will appear here</div>
                        </div>
                    </div>
                </div>

                <!-- Latin Quote -->
                <div class="widget">
                    <h3>Latin Quote of the Day</h3>
                    <div id="quote-content">
                        <div class="latin-quote">Loading...</div>
                        <div class="quote-translation"></div>
                        <div class="quote-attribution">
                            <span class="quote-author"></span><br>
                            <span class="quote-source"></span>
                        </div>
                    </div>
                </div>

                <!-- About -->
                <div class="widget">
                    <h3>About This Project</h3>
                    <p>Classicalia is designed to make learning Classics more accessible and engaging.</p>
                    <p>All tools are free to use and designed with students and teachers in mind.</p>
                </div>

            </aside>

        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeInfoModal()">&times;</span>
            
            <div class="modal-header">
                <h2>salve! üëã</h2>
            </div>
            
            <div class="modal-body">
                <div class="modal-text">
                    <p>Thank you for checking out Classicalia! I'm Lawrence and I teach Latin and Classics in Bristol.</p>
                    
                    <p>I have a BA in Ancient History from King's College London, a PGCE in Latin with Classics from the University of Cambridge and an MEd (Transforming Practice) from Darwin College, Cambridge. I am particularly interested in Tacitean studies and the history of memory in classical antiquity. In 2021 I won the Classical Association's 'Outstanding New Teacher' award.</p>
                    
                    <p>I also enjoy creating teacher guides and student workbooks. Please feel free to use my resources!</p>
                    
                    <p>If you have any feedback, thoughts or questions, please don't hesitate to get in touch!</p>
                </div>
                
                <div class="modal-image">
                    <img src="images/lmc.jpg" alt="Lawrence McNally">
                </div>
            </div>
            
            <div class="modal-footer">
                <div class="contact-items">
                    <div class="contact-item">
                        <a href="https://twitter.com/lfmcnally" target="_blank">
                            <div class="contact-icon">üê¶</div>
                            <div>
                                <div class="contact-label">Twitter</div>
                                <div class="contact-value">@lfmcnally</div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="contact-item">
                        <a href="https://www.tiktok.com/@classicalcivilisation" target="_blank">
                            <div class="contact-icon">üéµ</div>
                            <div>
                                <div class="contact-label">TikTok</div>
                                <div class="contact-value">@classicalcivilisation</div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="contact-item">
                        <a href="https://www.linkedin.com/in/lawrence-mcnally-318651116/" target="_blank">
                            <div class="contact-icon">üíº</div>
                            <div>
                                <div class="contact-label">LinkedIn</div>
                                <div class="contact-value">Lawrence McNally</div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="contact-item">
                        <a href="https://buymeacoffee.com/lfmcnally" target="_blank">
                            <div class="contact-icon">‚òï</div>
                            <div>
                                <div class="contact-label">Buy me a coffee</div>
                                <div class="contact-value">@lfmcnally</div>
                            </div>
                        </a>
                    </div>
                </div>
                
                <div class="modal-signature">
                    <p>An open-source project made with ‚ù§Ô∏è</p>
                    <p><strong>-Lawrence</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Advent Modal -->
    <div id="adventModal" class="advent-modal">
        <div class="advent-modal-content">
            <button class="advent-modal-close" onclick="closeAdventModal()">&times;</button>
            <div class="advent-modal-header" id="modalDay"></div>
            <div class="advent-modal-latin" id="modalLatin"></div>
            <div class="advent-modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="auth/config.js"></script>
    <script src="ancient-history.js"></script>
    <script src="reviews-data.js"></script>
    <script src="latin-quotes.js"></script>
    
    <script>
        // === MOBILE MENU ===
        function initMobileMenu() {
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const mobileMenuClose = document.getElementById('mobileMenuClose');

            function openMobileMenu() {
                hamburgerBtn.classList.add('active');
                mobileMenu.classList.add('active');
                mobileMenuOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            function closeMobileMenu() {
                hamburgerBtn.classList.remove('active');
                mobileMenu.classList.remove('active');
                mobileMenuOverlay.classList.remove('active');
                document.body.style.overflow = '';
            }

            if (hamburgerBtn) hamburgerBtn.addEventListener('click', openMobileMenu);
            if (mobileMenuClose) mobileMenuClose.addEventListener('click', closeMobileMenu);
            if (mobileMenuOverlay) mobileMenuOverlay.addEventListener('click', closeMobileMenu);
            
            // Close menu when clicking a link
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', closeMobileMenu);
            });
        }
        // === END MOBILE MENU ===

        // === AUTH SYSTEM ===
        async function checkAuth() {
            if (typeof supabase === 'undefined') { showGuestButtons(); return; }
            try {
                const { data: { user } } = await supabase.auth.getUser();
                if (user) {
                    const { data: profile } = await supabase.from('users').select('*').eq('id', user.id).single();
                    if (profile) { showUserMenu(profile); } else { showGuestButtons(); }
                } else { showGuestButtons(); }
            } catch (error) { showGuestButtons(); }
        }
        
        function showUserMenu(profile) {
            document.getElementById('guestButtons').classList.add('hidden');
            document.getElementById('userMenu').classList.add('visible');
            const fullName = profile.full_name || 'User';
            const firstName = fullName.split(' ')[0];
            document.getElementById('userName').textContent = firstName;
            document.getElementById('userAvatar').textContent = firstName.charAt(0).toUpperCase();
            document.getElementById('dropdownName').textContent = fullName;
            document.getElementById('dropdownRole').textContent = profile.role || 'Student';
            const dashboardLink = document.getElementById('dashboardLink');
            if (profile.role === 'teacher') {
                dashboardLink.href = 'dashboard/teacher.html';
                dashboardLink.innerHTML = '<span class="dropdown-item-icon">üìä</span> Teacher Dashboard';
            } else {
                dashboardLink.href = 'dashboard/student-hub.html';
                dashboardLink.innerHTML = '<span class="dropdown-item-icon">üìö</span> My Classes';
            }
        }
        
        function showGuestButtons() {
            document.getElementById('guestButtons').classList.remove('hidden');
            document.getElementById('userMenu').classList.remove('visible');
        }
        
        function initDropdown() {
            const dropdownToggle = document.getElementById('dropdownToggle');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (dropdownToggle) {
                dropdownToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    this.classList.toggle('open');
                    dropdownMenu.classList.toggle('open');
                });
            }
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.user-dropdown')) {
                    if (dropdownToggle) dropdownToggle.classList.remove('open');
                    if (dropdownMenu) dropdownMenu.classList.remove('open');
                }
            });
            
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async function() {
                    if (typeof supabase !== 'undefined') { await supabase.auth.signOut(); }
                    showGuestButtons();
                    dropdownMenu.classList.remove('open');
                });
            }
        }
        // === END AUTH SYSTEM ===

        // Advent Calendar Data - Roman Winter Facts and Quotes
        const adventContent = [
            {
                day: 1,
                icon: 'üéÑ',
                latin: 'Io Saturnalia!',
                content: 'Saturnalia was Rome\'s biggest winter festival, celebrated from December 17-23. Romans would greet each other with "Io Saturnalia!" (pronounced EE-oh Sat-ur-NAH-lee-ah). Notice the suffix -alia? It means "festival of" - just like Classicalia means "festival of Classics"!'
            },
            {
                day: 2,
                icon: 'üëë',
                latin: 'Dominus Servorum',
                content: 'During Saturnalia, SLAVES became the masters! They could insult their owners, gamble, get drunk, and sit at the head of the table while their masters served THEM dinner. Imagine swapping places with your teachers for a week!'
            },
            {
                day: 3,
                icon: 'üé≤',
                latin: 'Alea Iacta Est',
                content: 'Gambling was ILLEGAL in Rome... except during Saturnalia! For one week, everyone - from emperors to slaves - could play dice in the streets for money. The emperor Augustus once lost 20,000 sesterces (about ¬£20,000 today) in a single night!'
            },
            {
                day: 4,
                icon: 'üé≠',
                latin: 'Pileus Libertatis',
                content: 'Romans wore a felt "freedom hat" (pileus) during Saturnalia - the same cap that freed slaves wore! Everyone was equal for a week. Some rich Romans HATED this and tried to skip the festival by hiding in their country villas!'
            },
            {
                day: 5,
                icon: 'üç∑',
                latin: 'Vomitorium',
                content: 'Roman feasts were SO extravagant that they could last 10+ hours! Contrary to myth, "vomitoria" were actually hallway exits, not vomit rooms - but Romans DID feast so much they\'d need to take breaks. One emperor spent 10 million sesterces on a single dinner party!'
            },
            {
                day: 6,
                icon: 'üó°Ô∏è',
                latin: 'Naumachiae',
                content: 'Emperor Claudius once FLOODED the Colosseum and staged a full naval battle with real warships and 19,000 men fighting to the death - as entertainment! The emperor Nero topped this by flooding an entire valley and having sea monsters (probably seals and dolphins) added to his naval battles!'
            },
            {
                day: 7,
                icon: 'üéÅ',
                latin: 'Sigillaria',
                content: 'The gift-giving day was called Sigillaria. Emperors gave their soldiers up to 4 months\' salary as bonuses! The poet Martial wrote poems complaining about receiving cheap gifts like toothpicks when he\'d given expensive ones. Sound like anyone you know?'
            },
            {
                day: 8,
                icon: 'üåü',
                latin: 'Sol Invictus',
                content: 'December 25th was "Birthday of the Unconquered Sun" - a festival where Romans literally worshipped the sun as a god! When Christianity took over, they just... kept the same date for Christmas. Convenient, right?'
            },
            {
                day: 9,
                icon: 'üè∫',
                latin: 'Gladiatores',
                content: 'Want a REALLY Roman Christmas? Some emperors held gladiator games during winter festivals as "gifts" to the people. The emperor Trajan once held games lasting 123 days with 10,000 gladiators. Bit more intense than a pantomime!'
            },
            {
                day: 10,
                icon: 'üçñ',
                latin: 'Garum',
                content: 'Romans were OBSESSED with garum - a fermented fish sauce they put on EVERYTHING. It was made by leaving fish guts in the sun for months until they rotted into liquid. The most expensive garum cost more than fine wine. Fancy trying it on your Christmas dinner?'
            },
            {
                day: 11,
                icon: 'üèõÔ∏è',
                latin: 'Saturnalia Princeps',
                content: 'Families elected a "Lord of Misrule" who could give ridiculous orders that everyone HAD to obey - like "bark like a dog" or "dance on one leg." Even the head of the household had to do it! The Roman writer Lucian called it "the best of days."'
            },
            {
                day: 12,
                icon: 'üéä',
                latin: 'Pecunia Non Olet',
                content: 'Emperor Vespasian taxed PUBLIC TOILETS and collected urine (yes, wee!) to sell to laundries for cleaning clothes. When his son complained it was disgusting, Vespasian held up a gold coin and said "Pecunia non olet" - "Money doesn\'t smell!" Romans also gave chamber pots as Saturnalia gifts. Bet that beats your worst Christmas present!'
            }
        ];

        // Advent Calendar Functions
        function initAdventCalendar() {
            const grid = document.getElementById('adventGrid');
            if (!grid) return;

            const today = new Date();
            const currentMonth = today.getMonth(); // 0-11 (0 = January, 11 = December)
            const currentDay = today.getDate();
            
            // For testing: const currentMonth = 11; const currentDay = 5; // Simulate December 5th
            
            // Check if we're in December
            const isDecember = currentMonth === 11;
            
            // Load opened doors from localStorage
            const openedDoors = JSON.parse(localStorage.getItem('adventDoorsOpened') || '[]');

            adventContent.forEach((item, index) => {
                const door = document.createElement('div');
                door.className = 'advent-door';
                door.dataset.day = item.day;

                const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X', 'XI', 'XII'];
                
                // Determine if door should be available
                const isAvailable = isDecember && currentDay >= item.day;
                const isOpened = openedDoors.includes(item.day);

                if (isOpened) {
                    door.classList.add('opened');
                } else if (isAvailable) {
                    door.classList.add('available');
                } else {
                    door.classList.add('locked');
                    const lock = document.createElement('div');
                    lock.className = 'door-lock';
                    lock.textContent = 'üîí';
                    door.appendChild(lock);
                }

                const number = document.createElement('div');
                number.className = 'door-number';
                number.textContent = romanNumerals[index];
                door.appendChild(number);

                const icon = document.createElement('div');
                icon.className = 'door-icon';
                icon.textContent = item.icon;
                door.appendChild(icon);

                // Click handler
                if (isAvailable && !isOpened) {
                    door.addEventListener('click', () => openAdventDoor(item.day));
                } else if (isOpened) {
                    door.addEventListener('click', () => showAdventContent(item.day));
                }

                grid.appendChild(door);
            });
        }

        function openAdventDoor(day) {
            const openedDoors = JSON.parse(localStorage.getItem('adventDoorsOpened') || '[]');
            if (!openedDoors.includes(day)) {
                openedDoors.push(day);
                localStorage.setItem('adventDoorsOpened', JSON.stringify(openedDoors));
            }
            
            showAdventContent(day);
            
            // Update the door appearance
            const door = document.querySelector(`.advent-door[data-day="${day}"]`);
            if (door) {
                door.classList.remove('available');
                door.classList.add('opened');
            }
        }

        function showAdventContent(day) {
            const content = adventContent.find(item => item.day === day);
            if (!content) return;

            document.getElementById('modalDay').textContent = `Day ${day}`;
            document.getElementById('modalLatin').textContent = content.latin;
            document.getElementById('modalBody').textContent = content.content;
            document.getElementById('adventModal').style.display = 'block';
        }

        function closeAdventModal() {
            document.getElementById('adventModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            const modal = document.getElementById('adventModal');
            if (event.target === modal) {
                closeAdventModal();
            }
        });

        // Snowfall Effect - only on red header content box
        function createSnowflake() {
            const headerContent = document.querySelector('.header-content');
            if (!headerContent) return;
            
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.innerHTML = '‚ùÑ';
            snowflake.style.left = Math.random() * 100 + '%';
            snowflake.style.animationDuration = Math.random() * 3 + 4 + 's';
            snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
            
            headerContent.appendChild(snowflake);
            
            setTimeout(() => {
                snowflake.remove();
            }, 7000);
        }

        // Sparkle Effect
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.classList.add('sparkle');
            sparkle.style.left = Math.random() * 100 + 'vw';
            sparkle.style.top = Math.random() * 100 + 'vh';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                sparkle.remove();
            }, 2000);
        }

        // Footprints Effect
        // Shooting Star Effect (white)
        function createShootingStar() {
            const star = document.createElement('div');
            star.classList.add('shooting-star');
            
            // Start from random position in upper portion
            star.style.left = Math.random() * 70 + 10 + '%';
            star.style.top = Math.random() * 30 + '%';
            
            // Random duration
            const duration = Math.random() * 1 + 1.5;
            star.style.animation = `shooting-star-move ${duration}s linear forwards`;
            
            document.body.appendChild(star);
            
            setTimeout(() => {
                star.remove();
            }, duration * 1000);
        }

        // Colored Shooting Star Effect
        function createColoredShootingStar() {
            const star = document.createElement('div');
            star.classList.add('shooting-star-colored');
            
            // Start from random position
            star.style.left = Math.random() * 80 + 10 + '%';
            star.style.top = Math.random() * 40 + '%';
            
            // Random pastel colors
            const colors = [
                { bg: '#6eb5ff', shadow: '0 0 8px #6eb5ff, 0 0 15px #6eb5ff' },
                { bg: '#b494ff', shadow: '0 0 8px #b494ff, 0 0 15px #b494ff' },
                { bg: '#ff94c2', shadow: '0 0 8px #ff94c2, 0 0 15px #ff94c2' },
                { bg: '#94ffb5', shadow: '0 0 8px #94ffb5, 0 0 15px #94ffb5' },
                { bg: '#ffd194', shadow: '0 0 8px #ffd194, 0 0 15px #ffd194' }
            ];
            const color = colors[Math.floor(Math.random() * colors.length)];
            star.style.background = color.bg;
            star.style.boxShadow = color.shadow;
            
            // Random duration and direction
            const duration = Math.random() * 1.5 + 1.5;
            star.style.animation = `colored-star-move ${duration}s linear forwards`;
            
            document.body.appendChild(star);
            
            setTimeout(() => {
                star.remove();
            }, duration * 1000);
        }

        // Twinkle Burst Effect
        function createTwinkleBurst() {
            const burst = document.createElement('div');
            burst.classList.add('twinkle-burst');
            burst.innerHTML = '‚ú®';
            
            // Random position
            burst.style.left = Math.random() * 100 + '%';
            burst.style.top = Math.random() * 80 + 10 + '%';
            
            // Random size
            const size = Math.random() * 10 + 8;
            burst.style.fontSize = size + 'px';
            
            burst.style.animation = 'twinkle-burst 1.5s ease-out forwards';
            
            document.body.appendChild(burst);
            
            setTimeout(() => {
                burst.remove();
            }, 1500);
        }

        // Galaxy Formation Effect
        function createGalaxy() {
            const galaxy = document.createElement('div');
            galaxy.classList.add('galaxy');
            
            // Position only on far left or far right sides to avoid content
            const isLeft = Math.random() > 0.5;
            if (isLeft) {
                galaxy.style.left = Math.random() * 15 + '%'; // 0-15% from left
            } else {
                galaxy.style.left = Math.random() * 15 + 85 + '%'; // 85-100% from left (far right)
            }
            galaxy.style.top = Math.random() * 60 + 10 + '%';
            
            // Create colorful particles that spiral
            const colors = [
                '#6eb5ff', // blue
                '#b494ff', // purple
                '#ff94c2', // pink
                '#94ffb5', // mint
                '#ffd194', // peach
                '#ff9494', // coral
                '#94e4ff', // cyan
                '#ffb5e8'  // light pink
            ];
            
            // Create 30 particles for the galaxy
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.classList.add('galaxy-particle');
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.boxShadow = `0 0 4px ${colors[Math.floor(Math.random() * colors.length)]}`;
                
                // Stagger the animation
                particle.style.animationDelay = (i * 0.1) + 's';
                
                // Random starting angle
                particle.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                galaxy.appendChild(particle);
            }
            
            document.body.appendChild(galaxy);
            
            // Remove after animation completes
            setTimeout(() => {
                galaxy.remove();
            }, 20000);
        }

        // Star Explosion Effect
        function createStarExplosion() {
            const explosion = document.createElement('div');
            explosion.classList.add('star-explosion');
            
            // Random position in the upper/middle area
            explosion.style.left = Math.random() * 80 + 10 + '%';
            explosion.style.top = Math.random() * 60 + 10 + '%';
            
            // Create 12-15 particles that explode outward
            const numParticles = Math.floor(Math.random() * 4) + 12;
            
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('explosion-particle');
                
                // Calculate explosion direction (360 degrees divided evenly)
                const angle = (360 / numParticles) * i;
                const distance = Math.random() * 40 + 30; // 30-70px
                
                // Convert to x, y coordinates
                const radians = angle * (Math.PI / 180);
                const tx = Math.cos(radians) * distance;
                const ty = Math.sin(radians) * distance;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                
                // Random duration for variation
                const duration = Math.random() * 0.5 + 1; // 1-1.5s
                particle.style.animation = `explode-particle ${duration}s ease-out forwards`;
                
                explosion.appendChild(particle);
            }
            
            document.body.appendChild(explosion);
            
            setTimeout(() => {
                explosion.remove();
            }, 2000);
        }

        // Create snowflakes periodically
        setInterval(createSnowflake, 300);
        
        // Create sparkles periodically
        setInterval(createSparkle, 800);

        // Create white shooting stars
        setInterval(createShootingStar, 6000);

        // Create colored shooting stars
        setInterval(createColoredShootingStar, 8000);

        // Create twinkle bursts
        setInterval(createTwinkleBurst, 4000);

        // Create galaxy formations occasionally
        setInterval(createGalaxy, 15000);

        // Create star explosions occasionally
        setInterval(createStarExplosion, 12000);

        // Reviews Carousel
        let currentReviewIndex = 0;
        let totalReviews = 0;

        function initializeReviews() {
            if (typeof getReviews !== 'function') return;
            
            const reviews = getReviews();
            totalReviews = getTotalReviews();
            
            if (totalReviews === 0) return;

            const carousel = document.getElementById('reviewsCarousel');
            const dotsContainer = document.getElementById('carouselDots');
            
            carousel.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            reviews.forEach((review, index) => {
                const reviewCard = document.createElement('div');
                reviewCard.className = `review-card ${index === 0 ? 'active' : ''}`;
                reviewCard.innerHTML = `
                    <div class="review-text">"${review.text}"</div>
                    <div class="review-author">
                        <div class="review-name">${review.name}</div>
                        <div class="review-role">${review.role}</div>
                    </div>
                `;
                carousel.appendChild(reviewCard);
                
                const dot = document.createElement('span');
                dot.className = `dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => currentReview(index);
                dotsContainer.appendChild(dot);
            });
            
            updateCarouselButtons();
        }

        function showReview(index) {
            const cards = document.querySelectorAll('.review-card');
            const dots = document.querySelectorAll('.dot');
            
            cards.forEach(card => card.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            if (cards[index]) cards[index].classList.add('active');
            if (dots[index]) dots[index].classList.add('active');
            
            updateCarouselButtons();
        }

        function nextReview() {
            if (currentReviewIndex < totalReviews - 1) {
                currentReviewIndex++;
                showReview(currentReviewIndex);
            }
        }

        function previousReview() {
            if (currentReviewIndex > 0) {
                currentReviewIndex--;
                showReview(currentReviewIndex);
            }
        }

        function currentReview(index) {
            currentReviewIndex = index;
            showReview(currentReviewIndex);
        }

        function updateCarouselButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (prevBtn) prevBtn.disabled = currentReviewIndex === 0;
            if (nextBtn) nextBtn.disabled = currentReviewIndex === totalReviews - 1;
        }

        // Today in History
        function loadHistory() {
            const eventsContainer = document.getElementById('history-events');
            
            if (typeof getTodayInHistory === 'function') {
                const events = getTodayInHistory();
                
                if (events && events.length > 0) {
                    let html = '';
                    events.forEach(event => {
                        html += `<div class="history-event">
                            <div class="event-year">${event.year}</div>
                            <div class="event-text">${event.event}</div>
                        </div>`;
                    });
                    eventsContainer.innerHTML = html;
                } else {
                    eventsContainer.innerHTML = '<p style="text-align: center; color: #9ca3af; font-size: 0.9rem;">No recorded events for today</p>';
                }
            }
        }

        // Latin Quote
        function loadQuote() {
            const quoteContainer = document.getElementById('quote-content');
            
            if (typeof getTodayQuote === 'function') {
                const quote = getTodayQuote();
                
                if (quote) {
                    quoteContainer.innerHTML = `
                        <div class="latin-quote">"${quote.quote}"</div>
                        <div class="quote-translation">"${quote.translation}"</div>
                        <div class="quote-attribution">
                            <span class="quote-author">‚Äî ${quote.author}</span><br>
                            <span style="font-style: italic; color: #9ca3af; font-size: 0.75rem;">${quote.source}</span>
                        </div>
                    `;
                }
            }
        }

        // Visit Counter
        function loadVisitCounter() {
            fetch('https://api.counterapi.dev/v1/classicalia/visits/up')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('visit-counter').innerText = data.count.toLocaleString();
                })
                .catch(() => {
                    document.getElementById('visit-counter').innerText = '12,847';
                });
        }

        // Roman Date Converter
        function convertToRoman(num) {
            const romanNumerals = [
                { value: 1000, numeral: 'M' },
                { value: 900, numeral: 'CM' },
                { value: 500, numeral: 'D' },
                { value: 400, numeral: 'CD' },
                { value: 100, numeral: 'C' },
                { value: 90, numeral: 'XC' },
                { value: 50, numeral: 'L' },
                { value: 40, numeral: 'XL' },
                { value: 10, numeral: 'X' },
                { value: 9, numeral: 'IX' },
                { value: 5, numeral: 'V' },
                { value: 4, numeral: 'IV' },
                { value: 1, numeral: 'I' }
            ];
            
            let result = '';
            for (let i = 0; i < romanNumerals.length; i++) {
                while (num >= romanNumerals[i].value) {
                    result += romanNumerals[i].numeral;
                    num -= romanNumerals[i].value;
                }
            }
            return result;
        }

        function loadRomanDate() {
            const today = new Date();
            const day = today.getDate();
            const month = today.getMonth();
            const year = today.getFullYear();
            
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            
            const monthsLatin = [
                'Ianuarii', 'Februarii', 'Martii', 'Aprilis', 'Maii', 'Iunii',
                'Iulii', 'Augusti', 'Septembris', 'Octobris', 'Novembris', 'Decembris'
            ];
            
            const romanDay = convertToRoman(day);
            const romanYear = convertToRoman(year);
            
            const romanDate = `${romanDay} ${monthsLatin[month]} ${romanYear}`;
            const translation = `${day} ${months[month]} ${year}`;
            
            document.getElementById('roman-date-display').textContent = romanDate;
            document.getElementById('roman-date-translation').textContent = translation;
        }

        // Modal
        function showInfoModal() {
            document.getElementById('infoModal').style.display = 'block';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').style.display = 'none';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('infoModal');
            if (event.target === modal) {
                closeInfoModal();
            }
        }

        // Load Site Announcements
        async function loadAnnouncements() {
            const container = document.getElementById('announcementsContainer');
            if (!container || typeof supabase === 'undefined') return;

            try {
                const { data: announcements, error } = await supabase
                    .from('site_announcements')
                    .select('*')
                    .or('expires_at.is.null,expires_at.gt.' + new Date().toISOString())
                    .order('created_at', { ascending: false });

                if (error || !announcements || announcements.length === 0) {
                    container.style.display = 'none';
                    return;
                }

                const icons = {
                    info: '‚ÑπÔ∏è',
                    warning: '‚ö†Ô∏è',
                    success: '‚úÖ'
                };

                container.innerHTML = announcements.map(a => `
                    <div class="announcement-banner ${a.type || 'info'}">
                        <div class="announcement-icon">${icons[a.type] || icons.info}</div>
                        <div class="announcement-content">
                            <div class="announcement-title">${a.title}</div>
                            <div class="announcement-text">${a.content}</div>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                console.log('Could not load announcements');
                container.style.display = 'none';
            }
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            initMobileMenu();
            initDropdown();
            checkAuth();
            initializeReviews();
            loadHistory();
            loadQuote();
            loadVisitCounter();
            loadRomanDate();
            createChristmasLights();
            initAdventCalendar();
            loadAnnouncements();
        });

        // Create Christmas light bulbs
        function createChristmasLights() {
            const lightsContainer = document.querySelector('.christmas-lights');
            const wireContainer = document.querySelector('.light-wire');
            if (!lightsContainer || !wireContainer) return;
            
            const colors = ['red', 'blue', 'green', 'yellow', 'orange', 'purple'];
            const spacing = 60; // pixels between each bulb
            const numBulbs = Math.floor(window.innerWidth / spacing);
            
            for (let i = 0; i < numBulbs; i++) {
                // Create bulb
                const bulb = document.createElement('div');
                bulb.className = `light-bulb light-${colors[i % colors.length]}`;
                const bulbX = i * spacing + 30;
                bulb.style.left = bulbX + 'px';
                
                // Add slight vertical variation for natural droop
                const droop = Math.sin(i * 0.5) * 15 + 20;
                bulb.style.top = droop + 'px';
                
                lightsContainer.appendChild(bulb);
                
                // Create wire segment to next bulb
                if (i < numBulbs - 1) {
                    const wire = document.createElement('div');
                    wire.className = 'wire-segment';
                    wire.style.left = bulbX + 'px';
                    wireContainer.appendChild(wire);
                }
            }
        }
    </script>

</body>
</html>
