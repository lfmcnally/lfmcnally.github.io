// Lesson 2.3: The Peloponnesian Labours - Data File

const laboursData = {
    labours: [
        {
            number: 1,
            name: 'Nemean Lion',
            icon: 'ü¶Å',
            location: 'Nemea, Peloponnese',
            narrative: 'The first labour took Heracles to Nemea, where a monstrous lion terrorised the region. This was no ordinary beast - it was the offspring of the monsters Typhon and Echidna, with a golden hide that no weapon could pierce. The lion had made its lair in a cave with two entrances, from which it would emerge to devastate the surrounding area, killing both livestock and humans.',
            narrative2: 'Heracles first attempted to shoot the lion with his arrows, but they simply bounced off its impenetrable hide. Realising conventional weapons were useless, he blocked one entrance of the cave and entered through the other, cornering the beast. In the darkness of the cave, man and monster engaged in hand-to-hand combat. Using his incredible strength, Heracles wrapped his mighty arms around the lion\'s throat and strangled it.',
            narrative3: 'After killing the lion, Heracles faced a new problem - how to skin it when no blade could cut its hide. Athena appeared to him and suggested using the lion\'s own claws. This worked perfectly, and Heracles fashioned the pelt into an invulnerable cloak and the head into a helmet. This lion skin would become his most iconic attribute, making him instantly recognisable in art and protecting him in future labours.',
            challenge: 'A lion with impenetrable skin that terrorised Nemea. No weapon could pierce its golden hide - arrows bounced off, swords bent, and spears shattered.',
            solution: 'Heracles strangled it with his bare hands after trapping it in its cave. He used the lion\'s own claws to skin it and wore the pelt as armour.',
            significance: 'Established Heracles\' superhuman strength and gained his iconic lion-skin cloak. This first labour proved Heracles was no ordinary hero.'
        },
        {
            number: 2,
            name: 'Lernaean Hydra',
            icon: 'üêç',
            location: 'Lake Lerna, near Argos',
            narrative: 'The Hydra was a serpentine water monster with numerous heads - sources vary from five to one hundred, though nine is most common. The creature lived in the swamps of Lerna, which was also an entrance to the Underworld. Its breath and blood were deadly poison, and it terrorised the countryside, destroying crops and killing anyone who came near.',
            narrative2: 'The central head was immortal, and for each head that was cut off, two would grow back in its place. Heracles discovered this horrifying fact when he began attacking with his sword. As he fought, Hera sent a giant crab to distract him by pinching his feet. Heracles crushed the crab (which Hera then placed in the sky as the constellation Cancer) and called for help from his nephew Iolaus.',
            narrative3: 'Together, they developed a strategy: Heracles would cut off each head, and Iolaus would immediately cauterise the neck stump with a burning torch, preventing regeneration. After removing all the mortal heads, Heracles cut off the immortal head with a golden sword given to him by Athena and buried it under a huge rock. He then dipped his arrows in the Hydra\'s poisonous blood, creating weapons that would prove both useful and ultimately fatal to himself.',
            challenge: 'A many-headed serpent that grew two heads for each one cut off. Its breath and blood were deadly poison, and one head was immortal.',
            solution: 'With help from his nephew Iolaus, who cauterised each neck stump, Heracles defeated it. He buried the immortal head under a rock and dipped his arrows in its poisonous blood.',
            significance: 'Discounted by Eurystheus for receiving help. The poisoned arrows would later cause his own death. Showed that even heroes sometimes need assistance.'
        },
        {
            number: 3,
            name: 'Ceryneian Hind',
            icon: 'ü¶å',
            location: 'Ceryneia, Achaea',
            narrative: 'The Ceryneian Hind was a magnificent creature sacred to Artemis, goddess of the hunt. It had golden antlers like a stag and hooves of bronze, and could outrun an arrow in flight. Eurystheus chose this labour knowing that killing or harming the hind would incur Artemis\'s wrath, whilst failing to capture it would mean Heracles had failed.',
            narrative2: 'This labour required patience rather than strength. Heracles pursued the hind for a full year across Greece, through Arcadia, past the Danube, and even to the land of the Hyperboreans. The hind never seemed to tire, leading Heracles on an endless chase through forests and over mountains. Finally, as it crossed the river Ladon, Heracles saw his chance.',
            narrative3: 'Different versions tell different endings: in some, he shot it with a special arrow that pinned its legs together without drawing blood; in others, he caught it whilst it slept. When Artemis and Apollo confronted him for capturing their sacred animal, Heracles explained his servitude and promised to release the hind after showing it to Eurystheus. The gods, understanding his obligation, allowed him to complete the labour.',
            challenge: 'A sacred deer with golden antlers and bronze hooves, sacred to Artemis. It could outrun an arrow and had to be captured alive without harm.',
            solution: 'Heracles pursued it for a full year, finally capturing it whilst it slept or with a careful arrow shot. He apologised to Artemis and was allowed to borrow it.',
            significance: 'Showed patience and respect for the divine, not just brute strength. Proved Heracles could accomplish tasks requiring endurance and restraint.'
        },
        {
            number: 4,
            name: 'Erymanthian Boar',
            icon: 'üêó',
            location: 'Mount Erymanthus, Arcadia',
            narrative: 'The fourth labour seemed straightforward: capture a giant boar that was ravaging the countryside around Mount Erymanthus. However, the journey to find the boar would prove as significant as the capture itself. On his way, Heracles stopped to visit his friend Pholus, a civilised centaur who lived in a cave on Mount Pelion.',
            narrative2: 'Pholus offered Heracles cooked meat, but when Heracles asked for wine, Pholus hesitated - the wine jar belonged to all the centaurs collectively. Heracles insisted, and when the jar was opened, its scent attracted the other centaurs, who attacked in fury. Heracles defended himself with his poisoned arrows, killing many. Tragically, Pholus died when he accidentally dropped one of the poisoned arrows on his foot, and the immortal centaur Chiron was accidentally shot and suffered incurable agony.',
            narrative3: 'After this tragic interlude, Heracles tracked the boar to its lair. Using the advice of Chiron, he drove it into deep snow where its short legs couldn\'t manage. Exhausted and immobilised, the boar was easy to bind. Heracles carried it on his shoulders back to Eurystheus, who was so terrified he hid in a large bronze jar he had commissioned for protection. From then on, Eurystheus would only communicate with Heracles through a herald.',
            challenge: 'A gigantic boar that ravaged the countryside around Mount Erymanthus. Had to be captured alive in harsh winter conditions.',
            solution: 'Heracles chased it into deep snow where it couldn\'t move quickly, then bound it and carried it back on his shoulders.',
            significance: 'Eurystheus was so frightened he hid in a bronze jar, showing the cowardice of Heracles\' taskmaster. The journey involved the tragic death of centaur friends.'
        },
        {
            number: 5,
            name: 'Augean Stables',
            icon: 'üêÑ',
            location: 'Elis, western Peloponnese',
            narrative: 'King Augeas of Elis owned more cattle than any man in Greece - three thousand immortal cattle, including twelve pure white bulls sacred to Helios. These divine herds had been a gift from his father, the sun god. The stables had not been cleaned for thirty years, and the accumulation of dung was so great that the valley had become uninhabitable and the land could not be cultivated.',
            narrative2: 'Eurystheus set this labour believing it to be both impossible and humiliating - a hero reduced to shovelling dung. Before revealing his servitude, Heracles made a bargain with Augeas: if he could clean the stables in a single day, Augeas would give him one-tenth of his cattle. Augeas agreed, thinking it impossible. Heracles then made openings in the walls of the stable yard and diverted the rivers Alpheus and Peneus to flow through, washing away decades of filth in hours.',
            narrative3: 'When Augeas learnt that Heracles had been ordered to perform this task by Eurystheus, he refused to honour the agreement, claiming the rivers had done the work, not Heracles. Augeas even denied making the bargain, but his own son Phyleus testified against him. Both Heracles and Phyleus were banished. Later, Heracles would return with an army to claim his payment. Eurystheus also refused to count this labour, saying Heracles had attempted to profit from it.',
            challenge: '3000 immortal cattle had filled the stables with 30 years of dung. The task had to be completed in a single day - an impossible amount to shovel.',
            solution: 'Heracles diverted two rivers (Alpheus and Peneus) through the stables, washing them clean with the torrent. Intelligence triumphed over strength.',
            significance: 'Discounted by Eurystheus because Augeas offered payment. Showed that cleverness could achieve what seemed impossible. Located at Olympia\'s region.'
        },
        {
            number: 6,
            name: 'Stymphalian Birds',
            icon: 'ü¶Ö',
            location: 'Lake Stymphalia, Arcadia',
            narrative: 'The Stymphalian Birds were man-eating creatures with beaks of bronze, metallic feathers they could launch like arrows, and toxic dung that poisoned the land. They had migrated to Lake Stymphalia after being driven from their previous home by wolves. The dense marsh around the lake made it impossible to approach them on foot or by boat.',
            narrative2: 'Heracles was stumped by this challenge until Athena provided him with a pair of bronze krotala (noise-makers) forged by Hephaestus. Standing on a mountain overlooking the lake, Heracles clashed the krotala together, creating such a cacophony that the birds took flight in panic. As they flew up, Heracles shot them down with his arrows.',
            narrative3: 'Some versions say he killed them all; others that he simply drove them away to the island of Aretias in the Black Sea, where they would later be encountered by Jason and the Argonauts. This labour marked the first time Heracles received direct divine assistance with a tool specifically created for the task, showing that even the greatest hero needed help from the gods.',
            challenge: 'Man-eating birds with bronze beaks, metallic feathers they could shoot like arrows, and toxic dung. The marsh made them inaccessible.',
            solution: 'Using bronze castanets from Athena, Heracles frightened them into flight, then shot them with his arrows as they fled.',
            significance: 'First labour requiring divine assistance (Athena\'s help), showing even heroes need the gods. Marked the completion of the Peloponnesian labours.'
        }
    ],

    figures: {
        'hera': {
            name: 'Hera',
            role: 'Queen of the gods',
            significance: 'Zeus\'s wife who persecuted Heracles because he was the illegitimate son of her husband. Her jealousy drove him to madness and caused him to kill his own family, leading to the labours as penance.'
        },
        'eurystheus': {
            name: 'King Eurystheus',
            role: 'King of Tiryns',
            significance: 'Heracles\' cousin who inherited the kingship that should have been Heracles\'. Cowardly and petty, he set impossible tasks and hid in a bronze jar when frightened. He discounted two labours on technicalities.'
        }
    },

    places: {
        'delphi': {
            name: 'Oracle at Delphi',
            description: 'The most important oracle in ancient Greece, priestess of Apollo.',
            significance: 'Where Heracles was commanded to serve Eurystheus for twelve years as penance for killing his family. The Pythia\'s prophecy promised immortality if he completed the labours.'
        }
    },

    exitQuestions: [
        {
            question: 'Why did the Oracle at Delphi command Heracles to serve Eurystheus? What was the purpose of the labours?',
            answer: 'Heracles had to serve Eurystheus as penance for killing his own family in a fit of madness sent by Hera. The labours were meant to purify him of this terrible crime and prove him worthy of immortality.'
        },
        {
            question: 'Explain why Eurystheus discounted two of the original ten labours. What does this tell us about his character?',
            answer: 'Eurystheus discounted the Hydra (because Iolaus helped) and the Augean Stables (because Augeas offered payment). This shows his pettiness and cowardice - he used technicalities to extend Heracles\' suffering and keep him in servitude longer.'
        },
        {
            question: 'Choose one labour from 1-6. Describe: (a) the challenge Heracles faced, (b) how he overcame it, and (c) what this tells us about his character.',
            answer: 'Example - Nemean Lion: (a) Lion with impenetrable hide that no weapon could pierce. (b) Heracles strangled it with his bare hands and used its own claws to skin it. (c) Shows superhuman strength and quick thinking when conventional methods failed.'
        },
        {
            question: 'How do the first six labours show progression in difficulty and type? Consider geographic scope, the nature of the challenges, and the skills required.',
            answer: 'The labours progress from pure strength (Lion) to teamwork (Hydra), patience (Hind), capture (Boar), intelligence (Stables), and divine assistance (Birds). Geographically they expand across the Peloponnese, showing Heracles cleansing the entire region of threats.'
        },
        {
            question: 'The Augean Stables required intelligence rather than strength. Why was this an important inclusion in the labours? What does it teach about true heroism?',
            answer: 'It shows that heroism isn\'t just about physical strength - cleverness and problem-solving are equally important. By diverting rivers instead of shovelling, Heracles proved that intelligence can achieve what brute force cannot. True heroes must use their minds as well as their muscles.'
        }
    ]
};

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    initializeLabours();
    initializeExitQuestions();
    
    setTimeout(() => {
        setupInteractiveContent();
    }, 100);
});

// Navigation
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            showSection(this.getAttribute('data-section'));
        });
    });

    const navButtons = document.querySelectorAll('.nav-btn[data-goto]');
    navButtons.forEach(button => {
        button.addEventListener('click', function() {
            showSection(this.getAttribute('data-goto'));
        });
    });
}

function showSection(sectionId) {
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    window.scrollTo({ top: 0, behavior: 'smooth' });
    setupInteractiveContent();
}

// Labours Timeline
function initializeLabours() {
    const timeline = document.getElementById('labours-timeline');
    if (!timeline) return;
    
    timeline.innerHTML = laboursData.labours.map(labour => `
        <div class="timeline-labour" onclick="showLabourDetail(${labour.number})">
            <div class="timeline-labour-number">${labour.number}</div>
            <div class="timeline-labour-icon">${labour.icon}</div>
            <div class="timeline-labour-name">${labour.name}</div>
        </div>
    `).join('');
}

function showLabourDetail(labourNum) {
    const labour = laboursData.labours.find(l => l.number === labourNum);
    const detailBox = document.getElementById('labour-detail-box');
    
    if (labour && detailBox) {
        // Update active states
        document.querySelectorAll('.timeline-labour').forEach(el => {
            el.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        // Show detail
        detailBox.innerHTML = `
            <div class="labour-detail-header">
                <div class="labour-detail-number">${labour.number}</div>
                <div class="labour-detail-info">
                    <h4>${labour.name}</h4>
                    <div class="labour-detail-location">üìç ${labour.location}</div>
                </div>
            </div>
            
            <div class="labour-detail-narrative">
                <p>${labour.narrative}</p>
                ${labour.narrative2 ? `<p>${labour.narrative2}</p>` : ''}
                ${labour.narrative3 ? `<p>${labour.narrative3}</p>` : ''}
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'difficulty')">
                Reveal Chief Difficulty ‚¨á
            </button>
            <div class="reveal-content difficulty">
                <div class="reveal-label">Chief Difficulty</div>
                <div>${labour.challenge}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'solution')">
                Reveal How Heracles Succeeded ‚¨á
            </button>
            <div class="reveal-content solution">
                <div class="reveal-label">How Heracles Succeeded</div>
                <div>${labour.solution}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'significance')">
                Reveal Significance ‚¨á
            </button>
            <div class="reveal-content significance">
                <div class="reveal-label">Significance</div>
                <div>${labour.significance}</div>
            </div>
        `;
        detailBox.classList.add('active');
    }
}

function revealContent(button, type) {
    button.classList.add('revealed');
    button.nextElementSibling.classList.add('revealed');
}

// Interactive Content
function setupInteractiveContent() {
    document.querySelectorAll('.key-figure').forEach(figure => {
        const newFigure = figure.cloneNode(true);
        figure.parentNode.replaceChild(newFigure, figure);
        newFigure.addEventListener('click', function(e) {
            e.stopPropagation();
            showFigureInfo(this.dataset.info);
        });
    });

    document.querySelectorAll('.key-place').forEach(place => {
        const newPlace = place.cloneNode(true);
        place.parentNode.replaceChild(newPlace, place);
        newPlace.addEventListener('click', function(e) {
            e.stopPropagation();
            showPlaceInfo(this.dataset.info);
        });
    });
}

function showFigureInfo(figureId) {
    if (laboursData.figures[figureId]) {
        const fig = laboursData.figures[figureId];
        showInfoPanel('Historical Figure', `
            <h4>${fig.name}</h4>
            <p><strong>Role:</strong> ${fig.role}</p>
            <p><strong>Significance:</strong> ${fig.significance}</p>
        `);
    }
}

function showPlaceInfo(placeId) {
    if (laboursData.places[placeId]) {
        const place = laboursData.places[placeId];
        showInfoPanel('Key Place', `
            <h4>${place.name}</h4>
            <p><strong>Description:</strong> ${place.description}</p>
            <p><strong>Significance:</strong> ${place.significance}</p>
        `);
    }
}

function showInfoPanel(title, content) {
    const panel = document.getElementById('info-panel');
    const titleEl = document.getElementById('info-panel-title');
    const contentEl = document.getElementById('info-panel-content');
    
    if (panel && titleEl && contentEl) {
        titleEl.textContent = title;
        contentEl.innerHTML = content;
        panel.classList.add('active');
        
        setTimeout(() => {
            panel.classList.remove('active');
        }, 15000);
    }
}

function closeInfoPanel() {
    const panel = document.getElementById('info-panel');
    if (panel) {
        panel.classList.remove('active');
    }
}

// Exit Questions
let currentQuestion = 0;

function initializeExitQuestions() {
    loadExitQuestion();
    
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadExitQuestion();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentQuestion < laboursData.exitQuestions.length - 1) {
                currentQuestion++;
                loadExitQuestion();
            }
        });
    }
    
    if (revealBtn) {
        revealBtn.addEventListener('click', function() {
            const answerEl = document.getElementById('questionAnswer');
            if (answerEl && !answerEl.classList.contains('visible')) {
                answerEl.classList.add('visible');
                this.textContent = '‚úì Answer Revealed';
                this.classList.add('revealed');
            }
        });
    }
}

function loadExitQuestion() {
    const question = laboursData.exitQuestions[currentQuestion];
    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const questionAnswerEl = document.getElementById('questionAnswer');
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (questionNumberEl) questionNumberEl.textContent = `Question ${currentQuestion + 1} of ${laboursData.exitQuestions.length}`;
    if (questionTextEl) questionTextEl.textContent = question.question;
    if (questionAnswerEl) {
        questionAnswerEl.textContent = question.answer;
        questionAnswerEl.classList.remove('visible');
    }
    
    if (prevBtn) prevBtn.disabled = currentQuestion === 0;
    if (nextBtn) nextBtn.disabled = currentQuestion === laboursData.exitQuestions.length - 1;
    
    if (revealBtn) {
        revealBtn.textContent = 'Reveal Answer';
        revealBtn.classList.remove('revealed');
    }
}
