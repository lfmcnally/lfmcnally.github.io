// Hercules and Cacus Data File

const herculesData = {
    // Story passages from Virgil's Aeneid Book 8
    passages: [
        {
            id: 1,
            title: 'Setting the Scene: Cacus\'s Lair',
            text: `King Evander said: 'No idle superstition, or ignorance of the ancient gods, forced these solemn rites of ours, this ritual banquet, this altar to so great a divinity, upon us. We perform them, and repeat the honours due, Trojan guest, because we were saved from cruel perils. Now look first at this rocky overhanging cliff, how its bulk is widely shattered, and the mountain lair stands deserted, and the crags have been pulled down in mighty ruin. There was a cave here, receding to vast depths, untouched by the sun's rays, inhabited by the fell shape of Cacus, the half-human, and the ground was always warm with fresh blood, and the heads of men, insolently nailed to the doors, hung there pallid with sad decay. Vulcan was father to this monster: and, as he moved his massive bulk, he belched out his dark fires.'`,
            notes: [
                'The cave is dark, deep, and untouched by sunlight - a place of death',
                'Cacus is "half-human" - neither fully human nor beast, marking him as monstrous',
                'Fresh blood and decaying heads show constant murder',
                'Vulcan (god of fire) is his father - explaining his fire-breathing ability',
                'The setting establishes Cacus as utterly evil before we meet Hercules'
            ]
        },
        {
            id: 2,
            title: 'Hercules Arrives with the Cattle',
            text: `Now at last time brought what we wished, the presence and assistance of a god. Hercules, the greatest of avengers, appeared, proud of the killing and the spoils of three-fold Geryon, driving his great bulls along as victor, and his cattle occupied the valley and the river. And Cacus, his mind mad with frenzy, lest any wickedness or cunning be left un-dared or un-tried drove off four bulls of outstanding quality, and as many heifers of exceptional beauty, from their stalls and, so there might be no forward-pointing spoor, the thief dragged them into his cave by the tail, and, reversing the signs of their tracks, hid them in the stony dark: no one seeking them would find a trail to the cave.`,
            notes: [
                'Hercules is "the greatest of avengers" - established reputation',
                'Fresh from killing Geryon (one of the twelve labours)',
                'Cacus acts from "mad frenzy" - irrational evil',
                'His cunning: dragging cattle backwards to hide tracks',
                'The theft sets up the conflict - Hercules must respond to injustice'
            ]
        },
        {
            id: 3,
            title: 'Discovery and Rage',
            text: `Meanwhile, as Hercules, Amphitryon's son, was moving the well-fed herd from their stalls, and preparing to leave, the cattle lowed as they went out, all the woods were filled with their complaining, and the sound echoed from the hills. One heifer returned their call, and lowed from the deep cave, and foiled Cacus's hopes from her prison. At this Hercules's indignation truly blazed, with a venomous dark rage: he seized weapons in his hand, and his heavy knotted club, and quickly sought the slopes of the high mountain. Then for the first time my people saw Cacus afraid, confusion in his eyes: he fled at once, swifter than the East Wind, heading for his cave: fear lent wings to his feet.`,
            notes: [
                'The stolen heifer\'s call reveals Cacus\'s theft',
                'Hercules\' rage: "indignation truly blazed, with a venomous dark rage"',
                'Physical response: seizes weapons immediately',
                'Cacus finally shows fear - the monster is afraid of the hero',
                'Speed comparison: Cacus flees "swifter than the East Wind"'
            ]
        },
        {
            id: 4,
            title: 'Breaking Into the Cave',
            text: `As he shut himself in, and blocked the entrance securely, throwing against it a giant rock, hung there in chains by his father's craft, by shattering the links, behold Hercules arrived in a tearing passion, turning his head this way and that, scanning every approach, and gnashing his teeth. Hot with rage, three times he circled the whole Aventine Hill, three times he tried the stony doorway in vain, three times he sank down, exhausted, in the valley. A sharp pinnacle of flint, the rock shorn away on every side, stood, tall to see, rising behind the cave, a suitable place for vile birds to nest. He shook it, where it lay, its ridge sloping towards the river on the left, straining at it from the right, loosening its deepest roots, and tearing it out, then suddenly hurling it away, the highest heavens thundered with the blow, the banks broke apart, and the terrified river recoiled.`,
            notes: [
                'Strategic thinking: "turning his head this way and that, scanning every approach"',
                'Physical manifestation of rage: "gnashing his teeth"',
                'Persistence: circles three times, tries three times',
                'Identifies the weak point: the rock pinnacle',
                'Superhuman strength: his action makes "the highest heavens thunder"'
            ]
        },
        {
            id: 5,
            title: 'The Final Battle',
            text: `But Cacus's den and his vast realm stood revealed, and the shadowy caverns within lay open, no differently than if earth, gaping deep within, were to unlock the infernal regions by force, and disclose the pallid realms, hated by the gods, and the vast abyss be seen from above, and the spirits tremble at incoming light. So Hercules, calling upon all his weapons, hurled missiles at Cacus from above, caught suddenly in unexpected daylight, penned in the hollow rock, with unaccustomed howling, and rained boughs and giant blocks of stone on him. He on the other hand, since there was no escape now from the danger, belched thick smoke from his throat (marvellous to tell) and enveloped the place in blind darkness, blotting the view from sight, and gathering smoke-laden night in the cave, a darkness mixed with fire. Hercules in his pride could not endure it, and he threw himself, with a headlong leap, through the flames, where the smoke gave out its densest billows, and black mist heaved in the great cavern. Here, as Cacus belched out useless flame in the darkness, Hercules seized him in a knot-like clasp, and, clinging, choked him the eyes squeezed, and the throat drained of blood.`,
            notes: [
                'Opening the cave is like opening the Underworld itself',
                'Cacus uses his fire-breathing power defensively - creating darkness',
                'Hercules\' courage: "could not endure it" - refuses to be stopped',
                '"threw himself, with a headlong leap, through the flames" - fearless',
                'Victory: strangles Cacus - "knot-like clasp" and choking',
                'Cacus\'s powers become "useless" against Hercules\' determination'
            ]
        }
    ],

    // Exit questions
    exitQuestions: [
        {
            question: 'What is the prescribed source for Hercules and Cacus, and why is it significant?',
            answer: 'The prescribed source is Virgil\'s Aeneid, Book 8, lines 175-279, written in 19 BC. It is significant because Virgil wrote the Aeneid to glorify Rome and connect it to the heroic age. By including Hercules\' battle with Cacus, Virgil shows that even before Rome\'s founding, the greatest hero was destined to protect this sacred site.'
        },
        {
            question: 'How does Virgil characterise Cacus as a monster? Give three specific details.',
            answer: 'Virgil presents Cacus as monstrous through: (1) Physical description - "half-human" with "massive bulk" who "belched out dark fires"; (2) Evil actions - the cave floor is "always warm with fresh blood" and he displays victims\' heads on his doors; (3) Divine parentage - son of Vulcan, giving him supernatural fire-breathing powers that mark him as inhuman.'
        },
        {
            question: 'What qualities does Hercules show in this story? Explain how Virgil presents him as a hero.',
            answer: 'Hercules demonstrates: (1) Physical power - tears out rock pinnacles, makes "the highest heavens thunder"; (2) Righteous anger - his "indignation blazed" at injustice; (3) Strategic thinking - "scanning every approach" to find the cave\'s weakness; (4) Fearless courage - "threw himself, with a headlong leap, through the flames" despite danger. These qualities present him as the perfect Roman hero.'
        },
        {
            question: 'How does Hercules defeat Cacus? Describe the key stages of the battle.',
            answer: 'Discovery: A stolen heifer calls out, revealing Cacus\'s theft. Entry: Hercules tears away the rock pinnacle blocking the cave entrance. Battle: Cacus belches smoke and fire to create darkness, but Hercules leaps through the flames. Victory: Hercules seizes Cacus in a "knot-like clasp" and strangles him, draining his throat of blood.'
        },
        {
            question: 'What is the religious significance of this myth for the Romans?',
            answer: 'The myth explains why Romans worshipped Hercules at the Ara Maxima (Greatest Altar) in the Forum Boarium. It is an aetiological myth - an origin story for religious practise. By saving the future site of Rome from a monster, Hercules became its protector. The annual festival celebrated by the Potitii and Pinarii families connected Romans to this heroic past and sought Hercules\' continued protection.'
        },
        {
            question: 'How is the Roman Hercules different from the Greek Heracles? Give three key differences.',
            answer: 'Three key differences: (1) Purpose - Greek Heracles achieves personal glory and atones for his own crimes, whilst Roman Hercules protects communities and builds civilisation; (2) Focus - Heracles struggles with his own flaws (rage, madness), whilst Hercules uses his strength to establish order and defeat chaos; (3) Religious role - Heracles becomes a god after death (personal apotheosis), whilst Hercules is worshipped as protector of the Roman state during his life.'
        }
    ]
};

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    initializeStoryReader();
    initializeExitQuestions();
});

// Navigation
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            showSection(this.getAttribute('data-section'));
        });
    });

    const navButtons = document.querySelectorAll('.nav-btn[data-goto]');
    navButtons.forEach(button => {
        button.addEventListener('click', function() {
            showSection(this.getAttribute('data-goto'));
        });
    });
}

function showSection(sectionId) {
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Story Reader
let currentPassage = 0;

function initializeStoryReader() {
    loadPassage();
    
    const prevBtn = document.getElementById('prevPassage');
    const nextBtn = document.getElementById('nextPassage');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentPassage > 0) {
                currentPassage--;
                loadPassage();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentPassage < herculesData.passages.length - 1) {
                currentPassage++;
                loadPassage();
            }
        });
    }
}

function loadPassage() {
    const passage = herculesData.passages[currentPassage];
    const container = document.getElementById('passageContainer');
    const prevBtn = document.getElementById('prevPassage');
    const nextBtn = document.getElementById('nextPassage');
    
    if (container) {
        container.innerHTML = `
            <div class="story-passage">
                <h4 style="color: #0066ff; margin-bottom: 1rem; font-size: 1.2rem;">${passage.title}</h4>
                <div class="passage-text">
                    ${passage.text}
                </div>
                <div class="passage-notes">
                    <div class="passage-notes-title">Key Points to Notice:</div>
                    <ul>
                        ${passage.notes.map(note => `<li>${note}</li>`).join('')}
                    </ul>
                </div>
            </div>
        `;
    }
    
    // Update progress dots
    const progressDots = document.querySelectorAll('.progress-dot');
    progressDots.forEach((dot, index) => {
        dot.classList.remove('active', 'completed');
        if (index === currentPassage) {
            dot.classList.add('active');
        } else if (index < currentPassage) {
            dot.classList.add('completed');
        }
    });
    
    // Update button states
    if (prevBtn) prevBtn.disabled = currentPassage === 0;
    if (nextBtn) nextBtn.disabled = currentPassage === herculesData.passages.length - 1;
}

// Exit Questions
let currentQuestion = 0;

function initializeExitQuestions() {
    loadExitQuestion();
    
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadExitQuestion();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentQuestion < herculesData.exitQuestions.length - 1) {
                currentQuestion++;
                loadExitQuestion();
            }
        });
    }
    
    if (revealBtn) {
        revealBtn.addEventListener('click', function() {
            const answerEl = document.getElementById('questionAnswer');
            if (answerEl && !answerEl.classList.contains('visible')) {
                answerEl.classList.add('visible');
                this.textContent = 'âœ“ Answer Revealed';
                this.classList.add('revealed');
            }
        });
    }
}

function loadExitQuestion() {
    const question = herculesData.exitQuestions[currentQuestion];
    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const questionAnswerEl = document.getElementById('questionAnswer');
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (questionNumberEl) questionNumberEl.textContent = `Question ${currentQuestion + 1} of ${herculesData.exitQuestions.length}`;
    if (questionTextEl) questionTextEl.textContent = question.question;
    if (questionAnswerEl) {
        questionAnswerEl.textContent = question.answer;
        questionAnswerEl.classList.remove('visible');
    }
    
    if (prevBtn) prevBtn.disabled = currentQuestion === 0;
    if (nextBtn) nextBtn.disabled = currentQuestion === herculesData.exitQuestions.length - 1;
    
    if (revealBtn) {
        revealBtn.textContent = 'Reveal Answer';
        revealBtn.classList.remove('revealed');
    }
}
