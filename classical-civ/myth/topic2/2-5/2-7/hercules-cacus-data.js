// Hercules and Cacus Data File

const herculesData = {
    // Complete Virgil text with highlighting
    fullText: `Then he replied briefly, so: 'How gladly I know, and welcome you, bravest of Trojans! How it brings back your father's speech, the voice and features of noble Anchises! For I recall how Priam, son of Laomedon, visiting the realms of his sister, Hesione, and seeking Salamis, came on further to see the chill territories of Arcadia. In those days first youth clothed my cheeks with bloom, and I marvelled at the Trojan leaders, and marvelled at the son of Laomedon himself: but Anchises as he walked was taller than all. My mind burned with youthful desire to address the hero, and clasp his hand in mine: I approached and led him eagerly inside the walls of Pheneus. On leaving he gave me a noble quiver of Lycian arrows, a cloak woven with gold, and a pair of golden bits, that my Pallas now owns. So the hand of mine you look for is joined in alliance, and when tomorrow's dawn returns to the earth, I'll send you off cheered by my help, and aid you with stores. Meanwhile, since you come to us as friends, favour us by celebrating this annual festival, which it is wrong to delay, and become accustomed to your friends' table.'

When he had spoken he ordered the food and drink that had been removed to be replaced, and seated the warriors himself on the turf benches. He welcomed Aeneas as the principal guest, and invited him to a maple-wood throne covered by a shaggy lion's pelt. Then the altar priest with young men he had chosen competed to bring on the roast meat from the bulls, pile the baked bread in baskets, and serve the wine. Aeneas and the men of Troy feasted on an entire chine of beef, and the sacrificial organs.

When hunger had been banished, and desire for food sated, King Evander said: <span class="highlight-context" data-type="context" data-note="Evander explains why they worship Hercules - this is aetiological myth (explaining the origin of religious practice)">'No idle superstition, or ignorance of the ancient gods, forced these solemn rites of ours, this ritual banquet, this altar to so great a divinity, upon us. We perform them, and repeat the honours due, Trojan guest, because we were saved from cruel perils.</span> Now look first at this rocky overhanging cliff, how its bulk is widely shattered, and the mountain lair stands deserted, and the crags have been pulled down in mighty ruin. <span class="highlight-cacus" data-type="cacus" data-note="Setting: Cacus's lair is dark, hidden, and untouched by sunlight - a place of death and evil">There was a cave here, receding to vast depths, untouched by the sun's rays, inhabited by the fell shape of Cacus, the half-human,</span> <span class="highlight-cacus" data-type="cacus" data-note="Cacus is utterly evil: constant murder (fresh blood), displaying victims' heads as trophies, acting 'insolently' (arrogantly)">and the ground was always warm with fresh blood, and the heads of men, insolently nailed to the doors, hung there pallid with sad decay.</span> <span class="highlight-cacus" data-type="cacus" data-note="Divine parentage: Vulcan (god of fire) is his father, explaining his fire-breathing abilities">Vulcan was father to this monster: and, as he moved his massive bulk, he belched out his dark fires.</span> Now at last time brought what we wished, the presence and assistance of a god. <span class="highlight-hercules" data-type="hercules" data-note="Hercules' reputation established: 'greatest of avengers' - he rights wrongs and punishes evil">Hercules, the greatest of avengers, appeared, proud of the killing and the spoils of three-fold Geryon,</span> <span class="highlight-context" data-type="context" data-note="Hercules has just completed one of his twelve labours (killing Geryon) and is driving the cattle back to Greece">driving his great bulls along as victor, and his cattle occupied the valley and the river.</span> <span class="highlight-cacus" data-type="cacus" data-note="Cacus acts from 'mad frenzy' - irrational evil, unable to resist wickedness">And Cacus, his mind mad with frenzy, lest any wickedness or cunning be left un-dared or un-tried</span> drove off four bulls of outstanding quality, and as many heifers of exceptional beauty, from their stalls and, <span class="highlight-cacus" data-type="cacus" data-note="Cunning and deception: dragging cattle backwards by their tails to hide tracks - making it impossible to follow them">so there might be no forward-pointing spoor, the thief dragged them into his cave by the tail, and, reversing the signs of their tracks, hid them in the stony dark: no one seeking them would find a trail to the cave.</span> 

Meanwhile, as Hercules, Amphitryon's son, was moving the well-fed herd from their stalls, and preparing to leave, the cattle lowed as they went out, all the woods were filled with their complaining, and the sound echoed from the hills. <span class="highlight-context" data-type="context" data-note="Discovery: one stolen heifer calls back to the herd, revealing Cacus's theft - his clever plan is foiled by chance">One heifer returned their call, and lowed from the deep cave, and foiled Cacus's hopes from her prison.</span> <span class="highlight-hercules" data-type="hercules" data-note="Hercules' righteous anger: 'indignation truly blazed' with 'venomous dark rage' - his fury is justified response to theft and deception">At this Hercules's indignation truly blazed, with a venomous dark rage: he seized weapons in his hand, and his heavy knotted club, and quickly sought the slopes of the high mountain.</span> <span class="highlight-cacus" data-type="cacus" data-note="First time we see Cacus afraid: the monster fears the hero - 'confusion in his eyes', flees 'swifter than the East Wind'">Then for the first time my people saw Cacus afraid, confusion in his eyes: he fled at once, swifter than the East Wind, heading for his cave: fear lent wings to his feet.</span> As he shut himself in, and blocked the entrance securely, throwing against it a giant rock, hung there in chains by his father's craft, by shattering the links, <span class="highlight-hercules" data-type="hercules" data-note="Hercules' rage manifests physically: 'tearing passion', 'gnashing his teeth' - but also shows strategic thinking">behold Hercules arrived in a tearing passion, turning his head this way and that, scanning every approach, and gnashing his teeth.</span> <span class="highlight-hercules" data-type="hercules" data-note="Persistence and determination: three times circles, three times tries, three times sinks down exhausted - refuses to give up">Hot with rage, three times he circled the whole Aventine Hill, three times he tried the stony doorway in vain, three times he sank down, exhausted, in the valley.</span> A sharp pinnacle of flint, the rock shorn away on every side, stood, tall to see, rising behind the cave, a suitable place for vile birds to nest. <span class="highlight-hercules" data-type="hercules" data-note="Problem-solving: identifies the weak point (rock pinnacle) and uses leverage strategically">He shook it, where it lay, its ridge sloping towards the river on the left, straining at it from the right, loosening its deepest roots, and tearing it out,</span> <span class="highlight-hercules" data-type="hercules" data-note="Superhuman strength: his action makes 'the highest heavens thunder', breaks riverbanks, makes the river itself recoil in terror">then suddenly hurling it away, the highest heavens thundered with the blow, the banks broke apart, and the terrified river recoiled.</span> 

<span class="highlight-context" data-type="context" data-note="Epic simile: opening the cave is compared to opening the Underworld itself - showing the cosmic scale of this battle">But Cacus's den and his vast realm stood revealed, and the shadowy caverns within lay open, no differently than if earth, gaping deep within, were to unlock the infernal regions by force, and disclose the pallid realms, hated by the gods, and the vast abyss be seen from above, and the spirits tremble at incoming light.</span> <span class="highlight-hercules" data-type="hercules" data-note="Tactical advantage: Hercules attacks from above, raining missiles on Cacus who is trapped and exposed">So Hercules, calling upon all his weapons, hurled missiles at Cacus from above, caught suddenly in unexpected daylight, penned in the hollow rock, with unaccustomed howling, and rained boughs and giant blocks of stone on him.</span> <span class="highlight-cacus" data-type="cacus" data-note="Cacus's supernatural defence: belches thick smoke to create darkness - his fire power used defensively, not offensively">He on the other hand, since there was no escape now from the danger, belched thick smoke from his throat (marvellous to tell) and enveloped the place in blind darkness, blotting the view from sight, and gathering smoke-laden night in the cave, a darkness mixed with fire.</span> <span class="highlight-hercules" data-type="hercules" data-note="Ultimate courage: 'could not endure it' - refuses to be stopped, 'threw himself, with a headlong leap, through the flames' - fearless">Hercules in his pride could not endure it, and he threw himself, with a headlong leap, through the flames, where the smoke gave out its densest billows, and black mist heaved in the great cavern.</span> <span class="highlight-hercules" data-type="hercules" data-note="Victory: Hercules seizes Cacus in close combat, strangles him - 'knot-like clasp', eyes squeezed out, throat drained">Here, as Cacus belched out useless flame in the darkness, Hercules seized him in a knot-like clasp, and, clinging, choked him the eyes squeezed, and the throat drained of blood.</span> <span class="highlight-context" data-type="context" data-note="The aftermath: cave opened, stolen cattle revealed, Cacus's body dragged out for all to see - justice is done publicly">Immediately the doors were ripped out, and the dark den exposed, the stolen cattle, and the theft Cacus denied, were revealed to the heavens, and the shapeless carcass dragged out by the feet. The people could not get their fill of gazing at the hideous eyes, the face, and shaggy bristling chest of the half-man, and the ashes of the jaw's flames.</span> <span class="highlight-context" data-type="context" data-note="Religious conclusion: this is why we worship Hercules - the aetiological explanation for the Ara Maxima and annual festival">Because of that this rite is celebrated, and happy posterity remembers the day: and Potitius, the first, the founder, with the Pinarian House as guardians of the worship of Hercules, set up this altar in the grove, which shall be spoken of for ever by us as 'The Mightiest', and the mightiest it shall be for ever.</span> Come now, O you young men, wreathe your hair with leaves, hold out wine-cups in your right hands, in honour of such great glory, and call on the god we know, and pour out the wine with a will.' He spoke, while grey-green poplar veiled his hair with Hercules's own shade, hanging down in a knot of leaves, and the sacred cup filled his hand. Quickly they all poured a joyful libation on the table, and prayed to the gods.`,

    // Highlighting categories
    highlightCategories: {
        hercules: {
            name: 'Hercules Characterisation',
            color: '#fef3c7',
            borderColor: '#f59e0b',
            description: 'How Virgil presents Hercules as a hero'
        },
        cacus: {
            name: 'Cacus as Monster',
            color: '#fee2e2',
            borderColor: '#dc2626',
            description: 'How Virgil presents Cacus as evil and monstrous'
        },
        context: {
            name: 'Context & Explanation',
            color: '#dbeafe',
            borderColor: '#0ea5e9',
            description: 'Important background information and explanations'
        }
    },

    // Exit questions
    exitQuestions: [
        {
            question: 'What is the prescribed source for Hercules and Cacus, and why is it significant?',
            answer: 'The prescribed source is Virgil\'s Aeneid, Book 8, lines 175-279, written in 19 BC. It is significant because Virgil wrote the Aeneid to glorify Rome and connect it to the heroic age. By including Hercules\' battle with Cacus, Virgil shows that even before Rome\'s founding, the greatest hero was destined to protect this sacred site.'
        },
        {
            question: 'How does Virgil characterise Cacus as a monster? Give three specific details.',
            answer: 'Virgil presents Cacus as monstrous through: (1) Physical description - "half-human" with "massive bulk" who "belched out dark fires"; (2) Evil actions - the cave floor is "always warm with fresh blood" and he displays victims\' heads on his doors; (3) Divine parentage - son of Vulcan, giving him supernatural fire-breathing powers that mark him as inhuman.'
        },
        {
            question: 'What qualities does Hercules show in this story? Explain how Virgil presents him as a hero.',
            answer: 'Hercules demonstrates: (1) Physical power - tears out rock pinnacles, makes "the highest heavens thunder"; (2) Righteous anger - his "indignation blazed" at injustice; (3) Strategic thinking - "scanning every approach" to find the cave\'s weakness; (4) Fearless courage - "threw himself, with a headlong leap, through the flames" despite danger. These qualities present him as the perfect Roman hero.'
        },
        {
            question: 'How does Hercules defeat Cacus? Describe the key stages of the battle.',
            answer: 'Discovery: A stolen heifer calls out, revealing Cacus\'s theft. Entry: Hercules tears away the rock pinnacle blocking the cave entrance. Battle: Cacus belches smoke and fire to create darkness, but Hercules leaps through the flames. Victory: Hercules seizes Cacus in a "knot-like clasp" and strangles him, draining his throat of blood.'
        },
        {
            question: 'What is the religious significance of this myth for the Romans?',
            answer: 'The myth explains why Romans worshipped Hercules at the Ara Maxima (Greatest Altar) in the Forum Boarium. It is an aetiological myth - an origin story for religious practise. By saving the future site of Rome from a monster, Hercules became its protector. The annual festival celebrated by the Potitii and Pinarii families connected Romans to this heroic past and sought Hercules\' continued protection.'
        },
        {
            question: 'How is the Roman Hercules different from the Greek Heracles? Give three key differences.',
            answer: 'Three key differences: (1) Purpose - Greek Heracles achieves personal glory and atones for his own crimes, whilst Roman Hercules protects communities and builds civilisation; (2) Focus - Heracles struggles with his own flaws (rage, madness), whilst Hercules uses his strength to establish order and defeat chaos; (3) Religious role - Heracles becomes a god after death (personal apotheosis), whilst Hercules is worshipped as protector of the Roman state during his life.'
        }
    ]
};

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    initializeFullText();
    initializeExitQuestions();
});

// Navigation
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            showSection(this.getAttribute('data-section'));
        });
    });

    const navButtons = document.querySelectorAll('.nav-btn[data-goto]');
    navButtons.forEach(button => {
        button.addEventListener('click', function() {
            showSection(this.getAttribute('data-goto'));
        });
    });
}

function showSection(sectionId) {
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Full Text with Highlighting
function initializeFullText() {
    const container = document.getElementById('fullTextContainer');
    if (!container) return;
    
    // Insert the full text with highlighting
    container.innerHTML = herculesData.fullText;
    
    // Add click handlers to all highlighted spans
    const highlights = container.querySelectorAll('[data-note]');
    highlights.forEach(highlight => {
        highlight.addEventListener('click', function(e) {
            e.stopPropagation();
            showExplanation(this.dataset.type, this.dataset.note);
        });
    });
}

function showExplanation(type, note) {
    const explanationBox = document.getElementById('highlightExplanation');
    const titleEl = document.getElementById('explanationTitle');
    const textEl = document.getElementById('explanationText');
    
    if (!explanationBox || !titleEl || !textEl) return;
    
    const category = herculesData.highlightCategories[type];
    
    titleEl.textContent = category.name;
    titleEl.style.color = category.borderColor;
    textEl.textContent = note;
    
    explanationBox.style.display = 'block';
    explanationBox.style.borderColor = category.borderColor;
    
    // Scroll to explanation
    explanationBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function closeExplanation() {
    const explanationBox = document.getElementById('highlightExplanation');
    if (explanationBox) {
        explanationBox.style.display = 'none';
    }
}

// Exit Questions
let currentQuestion = 0;

function initializeExitQuestions() {
    loadExitQuestion();
    
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadExitQuestion();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentQuestion < herculesData.exitQuestions.length - 1) {
                currentQuestion++;
                loadExitQuestion();
            }
        });
    }
    
    if (revealBtn) {
        revealBtn.addEventListener('click', function() {
            const answerEl = document.getElementById('questionAnswer');
            if (answerEl && !answerEl.classList.contains('visible')) {
                answerEl.classList.add('visible');
                this.textContent = 'âœ“ Answer Revealed';
                this.classList.add('revealed');
            }
        });
    }
}

function loadExitQuestion() {
    const question = herculesData.exitQuestions[currentQuestion];
    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const questionAnswerEl = document.getElementById('questionAnswer');
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (questionNumberEl) questionNumberEl.textContent = `Question ${currentQuestion + 1} of ${herculesData.exitQuestions.length}`;
    if (questionTextEl) questionTextEl.textContent = question.question;
    if (questionAnswerEl) {
        questionAnswerEl.textContent = question.answer;
        questionAnswerEl.classList.remove('visible');
    }
    
    if (prevBtn) prevBtn.disabled = currentQuestion === 0;
    if (nextBtn) nextBtn.disabled = currentQuestion === herculesData.exitQuestions.length - 1;
    
    if (revealBtn) {
        revealBtn.textContent = 'Reveal Answer';
        revealBtn.classList.remove('revealed');
    }
}
