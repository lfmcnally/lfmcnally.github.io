// Lesson 2.4: The Distant Labours - Data File

const laboursData = {
    labours: [
        {
            number: 7,
            name: 'Cretan Bull',
            icon: 'üêÇ',
            location: 'Crete',
            narrative: 'The seventh labour took Heracles overseas for the first time, to the island of Crete. The bull in question had been sent by Poseidon to King Minos as a sign of divine favour - a magnificent white bull that emerged from the sea. Minos was supposed to sacrifice it to Poseidon, but its beauty was such that he kept it and sacrificed another. In punishment, Poseidon made the bull savage and caused Minos\' wife Pasiphae to fall in love with it, resulting in the birth of the Minotaur.',
            narrative2: 'By the time Heracles arrived, the bull was rampaging across Crete, destroying orchards, levelling walls, and breathing fire. Minos was happy for Heracles to remove this problem. Heracles tracked the bull and wrestled it into submission with his bare hands, demonstrating his superiority over the savage beast.',
            narrative3: 'Most remarkably, Heracles then rode the bull across the Mediterranean Sea back to Greece, presenting it alive to Eurystheus. The king, as usual, wanted nothing to do with the dangerous creature and released it. The bull then wandered to Marathon, where it would later be captured by Theseus. This labour showed Heracles\' power extending beyond Greece\'s borders.',
            challenge: 'The bull that fathered the Minotaur, now running wild and breathing fire, destroying Cretan crops and terrorising the island.',
            solution: 'Heracles wrestled it into submission with his bare hands and rode it across the sea back to Greece like a horse.',
            significance: 'First labour outside the Peloponnese, expanding the geographic scope of his heroism. The bull would later be captured again by Theseus.'
        },
        {
            number: 8,
            name: 'Mares of Diomedes',
            icon: 'üê¥',
            location: 'Thrace',
            narrative: 'King Diomedes of Thrace, son of Ares and Cyrene, owned four mares named Podargos (swift), Lampon (shining), Xanthos (yellow), and Deinos (terrible). He fed them human flesh, usually from unwitting guests, which had made them uncontrollably savage. They were kept tethered with iron chains to bronze mangers, as their madness made them impossible to handle.',
            narrative2: 'Heracles travelled to Thrace with a band of volunteers, including his young lover Abderus. They overpowered the grooms and drove the mares to the sea. When Diomedes and his men pursued them, Heracles left Abderus to guard the horses whilst he fought. He defeated the Thracians and fed Diomedes to his own mares. The horses, satisfied by eating their master, became calm enough to handle.',
            narrative3: 'Tragically, whilst Heracles was fighting, the mares had also killed and eaten Abderus. Heracles founded the city of Abdera in his honour. He then harnessed the now-calm mares to Diomedes\' chariot and drove them back to Eurystheus. The king dedicated them to Hera and set them free. They were eventually killed by wild beasts on Mount Olympus, or in some versions, their descendants survived to the time of Alexander the Great.',
            challenge: 'Four horses fed human flesh by King Diomedes, making them savage and uncontrollable. They were tethered with iron chains to bronze mangers.',
            solution: 'Heracles fed Diomedes to his own horses, calming them with their master\'s flesh, then drove them back to Eurystheus.',
            significance: 'Justice through poetic retribution. The death of his companion Abderus added tragic cost, showing heroism demands sacrifice.'
        },
        {
            number: 9,
            name: 'Belt of Hippolyta',
            icon: '‚öîÔ∏è',
            location: 'Themiscyra, land of Amazons',
            narrative: 'Eurystheus\' daughter Admete desired the belt of Hippolyta, Queen of the Amazons. This was no ordinary belt but a golden war-girdle given to Hippolyta by her father Ares, god of war. It symbolised her authority over the fierce warrior women who lived by the Black Sea, who had created a society entirely without men.',
            narrative2: 'Heracles sailed with a crew of heroes, including Theseus. When they arrived at Themiscyra, Queen Hippolyta came to meet them. Impressed by Heracles\' fame and attracted to him, she agreed to give him the belt peacefully. However, Hera, disguised as an Amazon, spread a rumour that Heracles intended to kidnap their queen. The Amazons attacked in force.',
            narrative3: 'In the ensuing battle, Heracles was forced to kill Hippolyta to get the belt, though some versions say she survived and it was her sister Antiope who died. The Greeks fought their way back to their ship with heavy losses. Theseus abducted an Amazon (Antiope or Hippolyta, depending on the version), which would later lead to an Amazon invasion of Athens. The belt was duly delivered to Admete, but the labour showed how divine interference could turn diplomacy into tragedy.',
            challenge: 'Retrieve the war belt of Hippolyta, Queen of the Amazons, a gift from Ares. Required travelling to the edge of the known world.',
            solution: 'Initially diplomatic success, but Hera disguised herself and turned the Amazons against him. Heracles had to fight and kill Hippolyta for the belt.',
            significance: 'Showed that even peaceful solutions could be sabotaged by divine interference. Led to future conflict between Athens and Amazons.'
        },
        {
            number: 10,
            name: 'Cattle of Geryon',
            icon: 'üêÑ',
            location: 'Erytheia, far western edge',
            narrative: 'This labour required Heracles to travel to the very edge of the world, to the island of Erytheia in the far western ocean. There lived Geryon, a giant with three bodies joined at the waist, making him the strongest mortal alive. He owned a herd of magnificent red cattle, guarded by the herdsman Eurytion and the two-headed dog Orthrus, brother to Cerberus.',
            narrative2: 'The journey itself was epic. When Heracles reached the straits between Europe and Africa, he set up the Pillars of Heracles (Rock of Gibraltar and Jebel Musa) to mark the edge of the civilised world. The heat of the African sun angered him so much that he shot an arrow at Helios. The sun god, impressed by his audacity, lent him the golden cup he used to sail across the ocean each night. Heracles used this cup to reach Erytheia.',
            narrative3: 'On the island, Heracles first killed Orthrus with his club, then Eurytion. When Geryon heard of this and came to fight, Heracles shot him through all three bodies with a single arrow. The return journey with the cattle was fraught with adventures across Europe - thieves, monsters, and gods all tried to steal the magnificent herd. When he finally delivered them to Eurystheus, they were sacrificed to Hera.',
            challenge: 'Steal the red cattle of Geryon, a three-bodied giant, from the edge of the world. Guarded by a two-headed dog and giant herdsman.',
            solution: 'Heracles travelled to the edge of the world in Helios\' golden cup, killed Geryon with an arrow through all three bodies, and drove the cattle back through Europe.',
            significance: 'Set up the Pillars of Heracles (Gibraltar) marking the edge of the world. Showed heroism expanding the boundaries of the known world.'
        },
        {
            number: 11,
            name: 'Apples of Hesperides',
            icon: 'üçé',
            location: 'Garden of Hesperides, far west',
            narrative: 'The golden apples grew in a garden at the edge of the world, a wedding gift from Gaia to Hera. They were tended by the Hesperides, daughters of the evening, and guarded by Ladon, an immortal dragon with a hundred heads that never slept. No mortal knew where this garden was located, adding another layer of difficulty to an already impossible task.',
            narrative2: 'Heracles first had to find the garden. He captured the sea-god Nereus, the Old Man of the Sea, and held him despite his shape-shifting until he revealed the location. On his journey, Heracles freed Prometheus from his eternal torment, killing the eagle that daily ate his liver. In gratitude, Prometheus advised him not to pick the apples himself but to get Atlas to do it.',
            narrative3: 'Atlas, who held up the sky, was the father of the Hesperides. Heracles offered to hold the sky whilst Atlas fetched the apples. Atlas agreed, relieved to be free of his burden. When Atlas returned with the apples, he suggested that he could deliver them himself whilst Heracles continued to hold the sky. Heracles pretended to agree but asked Atlas to hold the sky for just a moment whilst he adjusted his cloak as padding. When Atlas took back the sky, Heracles picked up the apples and left. The apples were later returned to the garden by Athena, as they were too sacred to remain in mortal hands.',
            challenge: 'Fetch golden apples from a garden at the edge of the world, guarded by the dragon Ladon and the Hesperides nymphs. Location unknown.',
            solution: 'Heracles held up the sky whilst Atlas fetched the apples, then tricked Atlas into taking the sky back by asking for help adjusting his cloak.',
            significance: 'Literally supported the heavens, proving divine-level strength. Showed that cleverness was as important as strength against Titans.'
        },
        {
            number: 12,
            name: 'Cerberus',
            icon: 'üê∫',
            location: 'The Underworld',
            narrative: 'The final labour was the most impossible of all: descend to the Underworld and bring back Cerberus, the three-headed hound that guarded the gates of the dead. This monstrous dog had a serpent for a tail and snakes growing from his back. His job was to prevent the living from entering and the dead from leaving. To attempt this labour was to challenge death itself.',
            narrative2: 'Heracles first underwent initiation into the Eleusinian Mysteries to learn how to enter and exit the Underworld safely. Guided by Hermes and Athena, he descended through the cave at Taenarum. The shades of the dead fled from him in fear, except for Meleager and Medusa. He even wrestled Menoetes, herdsman of Hades, breaking his ribs before Persephone intervened.',
            narrative3: 'When Heracles reached the throne of Hades and asked to borrow Cerberus, the god of the dead agreed on one condition: Heracles must subdue the beast using no weapons, only his bare hands. Heracles found Cerberus at the gates of Acheron, wrapped his arms around all three heads at once, and squeezed until the beast submitted, despite being bitten by the serpent tail. He carried Cerberus to the surface, where the hell-hound\'s drool created the poisonous plant aconite. After showing the beast to the terrified Eurystheus (who hid in his jar as usual), Heracles returned Cerberus to the Underworld, having conquered death itself.',
            challenge: 'Bring back Cerberus, the three-headed guardian of the Underworld, alive and without using weapons. To challenge death itself.',
            solution: 'With divine guidance from Hermes and Athena, Heracles wrestled Cerberus into submission with his bare hands and brought him to Eurystheus.',
            significance: 'Conquered death itself - the ultimate heroic achievement. Proved Heracles worthy of immortality. Even Hades respected his strength.'
        }
    ],

    figures: {
        'amazons': {
            name: 'The Amazons',
            role: 'Warrior women of Themiscyra',
            significance: 'A society of fierce female warriors who lived by the Black Sea without men. They were daughters of Ares and served as formidable opponents even for heroes like Heracles and Theseus.'
        }
    },

    places: {
        'crete': {
            name: 'Crete',
            description: 'Large island in the Mediterranean, home of King Minos.',
            significance: 'First labour location outside the Peloponnese. The Cretan Bull would father the Minotaur and later be captured by Theseus at Marathon.'
        },
        'thrace': {
            name: 'Thrace',
            description: 'Region in the northeastern corner of Greece, considered barbaric by southern Greeks.',
            significance: 'Home of King Diomedes and his man-eating horses. Represented the northern edge of civilisation in Greek thought.'
        },
        'underworld': {
            name: 'The Underworld',
            description: 'Realm of the dead ruled by Hades and Persephone.',
            significance: 'The ultimate destination - capturing Cerberus proved Heracles could conquer even death itself. Only heroes destined for immortality could enter and leave alive.'
        }
    },

    significanceThemes: [
        {
            icon: 'üåç',
            title: 'Geographic Expansion',
            description: 'The labours expanded from local (Peloponnese) to regional (Crete, Thrace) to cosmic (edge of world, Underworld), showing Heracles\' heroism had universal scope.'
        },
        {
            icon: '‚ö°',
            title: 'Divine Worthiness',
            description: 'By supporting the sky and conquering death, Heracles proved he possessed divine-level power and deserved immortality among the gods.'
        },
        {
            icon: 'üß†',
            title: 'Intelligence & Strength',
            description: 'The later labours required cleverness (tricking Atlas), patience (pursuing the hind), and divine assistance (Athena\'s castanets), not just brute force.'
        },
        {
            icon: 'üèõÔ∏è',
            title: 'Civilising Force',
            description: 'Heracles made the world safe for humanity by defeating monsters, establishing boundaries (Pillars of Heracles), and expanding Greek influence.'
        }
    ],

    exitQuestions: [
        {
            question: 'How do labours 7-12 differ in scope and difficulty from labours 1-6? Consider geography, opponents, and skills required.',
            answer: 'Labours 7-12 expand geographically beyond Greece (Crete, Thrace, western ocean, Underworld) and increase in cosmic significance. They require more than strength - diplomacy (Amazons), cleverness (Atlas), divine aid (Athena, Hermes), and supernatural endurance (holding the sky, entering Underworld). The opponents become more powerful and exotic.'
        },
        {
            question: 'Why was retrieving Cerberus considered the ultimate labour? What did it prove about Heracles?',
            answer: 'Descending to the Underworld and returning alive meant conquering death itself - something only heroes destined for divinity could achieve. It proved Heracles had transcended mortal limitations and was worthy of immortality. Even Hades, lord of the dead, respected his power.'
        },
        {
            question: 'The labour involving the Amazons began peacefully but ended in violence. What does this teach about divine interference in human affairs?',
            answer: 'Hera\'s interference turned a diplomatic success into tragedy, showing that even perfect human solutions can be sabotaged by the gods. It demonstrates that mortals cannot fully control their fate when gods choose to intervene, and that divine malice can destroy the best intentions.'
        },
        {
            question: 'How did Heracles demonstrate intelligence rather than just strength in obtaining the golden apples?',
            answer: 'Rather than fighting the immortal dragon Ladon, Heracles tricked Atlas into fetching the apples. Then, when Atlas tried to abandon him holding the sky, Heracles cleverly asked for help "adjusting his cloak" and escaped. This shows true heroism requires both brain and brawn.'
        },
        {
            question: 'What is the significance of Heracles establishing the Pillars of Heracles at Gibraltar?',
            answer: 'The Pillars marked the edge of the known world - the boundary between civilisation and the unknown. By placing them there, Heracles symbolically expanded Greek influence to its furthest limits and established himself as the hero who extended human achievement to its maximum possible extent.'
        }
    ]
};

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    initializeLabours();
    initializeSignificance();
    initializeExitQuestions();
    
    setTimeout(() => {
        setupInteractiveContent();
    }, 100);
});

// Navigation
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            showSection(this.getAttribute('data-section'));
        });
    });

    const navButtons = document.querySelectorAll('.nav-btn[data-goto]');
    navButtons.forEach(button => {
        button.addEventListener('click', function() {
            showSection(this.getAttribute('data-goto'));
        });
    });
}

function showSection(sectionId) {
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    window.scrollTo({ top: 0, behavior: 'smooth' });
    setupInteractiveContent();
}

// Labours Timeline
function initializeLabours() {
    const timeline = document.getElementById('labours-timeline');
    if (!timeline) return;
    
    timeline.innerHTML = laboursData.labours.map(labour => `
        <div class="timeline-labour" onclick="showLabourDetail(${labour.number})">
            <div class="timeline-labour-number">${labour.number}</div>
            <div class="timeline-labour-icon">${labour.icon}</div>
            <div class="timeline-labour-name">${labour.name}</div>
        </div>
    `).join('');
}

function showLabourDetail(labourNum) {
    const labour = laboursData.labours.find(l => l.number === labourNum);
    const detailBox = document.getElementById('labour-detail-box');
    
    if (labour && detailBox) {
        // Update active states
        document.querySelectorAll('.timeline-labour').forEach(el => {
            el.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        // Show detail
        detailBox.innerHTML = `
            <div class="labour-detail-header">
                <div class="labour-detail-number">${labour.number}</div>
                <div class="labour-detail-info">
                    <h4>${labour.name}</h4>
                    <div class="labour-detail-location">üìç ${labour.location}</div>
                </div>
            </div>
            
            <div class="labour-detail-narrative">
                <p>${labour.narrative}</p>
                ${labour.narrative2 ? `<p>${labour.narrative2}</p>` : ''}
                ${labour.narrative3 ? `<p>${labour.narrative3}</p>` : ''}
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'difficulty')">
                Reveal Chief Difficulty ‚¨á
            </button>
            <div class="reveal-content difficulty">
                <div class="reveal-label">Chief Difficulty</div>
                <div>${labour.challenge}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'solution')">
                Reveal How Heracles Succeeded ‚¨á
            </button>
            <div class="reveal-content solution">
                <div class="reveal-label">How Heracles Succeeded</div>
                <div>${labour.solution}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'significance')">
                Reveal Significance ‚¨á
            </button>
            <div class="reveal-content significance">
                <div class="reveal-label">Significance</div>
                <div>${labour.significance}</div>
            </div>
        `;
        detailBox.classList.add('active');
    }
}

function revealContent(button, type) {
    button.classList.add('revealed');
    button.nextElementSibling.classList.add('revealed');
}

// Significance Section
function initializeSignificance() {
    const grid = document.getElementById('significance-grid');
    if (!grid) return;
    
    grid.innerHTML = laboursData.significanceThemes.map(theme => `
        <div class="significance-card">
            <span class="significance-icon">${theme.icon}</span>
            <div class="significance-title">${theme.title}</div>
            <div class="significance-description">${theme.description}</div>
        </div>
    `).join('');
}

// Interactive Content
function setupInteractiveContent() {
    document.querySelectorAll('.key-figure').forEach(figure => {
        const newFigure = figure.cloneNode(true);
        figure.parentNode.replaceChild(newFigure, figure);
        newFigure.addEventListener('click', function(e) {
            e.stopPropagation();
            showFigureInfo(this.dataset.info);
        });
    });

    document.querySelectorAll('.key-place').forEach(place => {
        const newPlace = place.cloneNode(true);
        place.parentNode.replaceChild(newPlace, place);
        newPlace.addEventListener('click', function(e) {
            e.stopPropagation();
            showPlaceInfo(this.dataset.info);
        });
    });
}

function showFigureInfo(figureId) {
    if (laboursData.figures[figureId]) {
        const fig = laboursData.figures[figureId];
        showInfoPanel('Historical Figure', `
            <h4>${fig.name}</h4>
            <p><strong>Role:</strong> ${fig.role}</p>
            <p><strong>Significance:</strong> ${fig.significance}</p>
        `);
    }
}

function showPlaceInfo(placeId) {
    if (laboursData.places[placeId]) {
        const place = laboursData.places[placeId];
        showInfoPanel('Key Place', `
            <h4>${place.name}</h4>
            <p><strong>Description:</strong> ${place.description}</p>
            <p><strong>Significance:</strong> ${place.significance}</p>
        `);
    }
}

function showInfoPanel(title, content) {
    const panel = document.getElementById('info-panel');
    const titleEl = document.getElementById('info-panel-title');
    const contentEl = document.getElementById('info-panel-content');
    
    if (panel && titleEl && contentEl) {
        titleEl.textContent = title;
        contentEl.innerHTML = content;
        panel.classList.add('active');
        
        setTimeout(() => {
            panel.classList.remove('active');
        }, 15000);
    }
}

function closeInfoPanel() {
    const panel = document.getElementById('info-panel');
    if (panel) {
        panel.classList.remove('active');
    }
}

// Exit Questions
let currentQuestion = 0;

function initializeExitQuestions() {
    loadExitQuestion();
    
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadExitQuestion();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentQuestion < laboursData.exitQuestions.length - 1) {
                currentQuestion++;
                loadExitQuestion();
            }
        });
    }
    
    if (revealBtn) {
        revealBtn.addEventListener('click', function() {
            const answerEl = document.getElementById('questionAnswer');
            if (answerEl && !answerEl.classList.contains('visible')) {
                answerEl.classList.add('visible');
                this.textContent = '‚úì Answer Revealed';
                this.classList.add('revealed');
            }
        });
    }
}

function loadExitQuestion() {
    const question = laboursData.exitQuestions[currentQuestion];
    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const questionAnswerEl = document.getElementById('questionAnswer');
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (questionNumberEl) questionNumberEl.textContent = `Question ${currentQuestion + 1} of ${laboursData.exitQuestions.length}`;
    if (questionTextEl) questionTextEl.textContent = question.question;
    if (questionAnswerEl) {
        questionAnswerEl.textContent = question.answer;
        questionAnswerEl.classList.remove('visible');
    }
    
    if (prevBtn) prevBtn.disabled = currentQuestion === 0;
    if (nextBtn) nextBtn.disabled = currentQuestion === laboursData.exitQuestions.length - 1;
    
    if (revealBtn) {
        revealBtn.textContent = 'Reveal Answer';
        revealBtn.classList.remove('revealed');
    }
}
