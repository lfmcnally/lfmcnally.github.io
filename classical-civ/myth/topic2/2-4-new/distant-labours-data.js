// Lesson 2.4: The Distant Labours - Data File

const laboursData = {
    labours: [
        {
            number: 7,
            name: 'Cretan Bull',
            icon: 'üêÇ',
            location: 'Crete',
            narrative: 'The seventh labour took Heracles overseas for the first time, to the island of Crete. The bull in question had been sent by Poseidon to King Minos as a sign of divine favour - a magnificent white bull that emerged from the sea. Minos was supposed to sacrifice it to Poseidon, but its beauty was such that he kept it and sacrificed another. In punishment, Poseidon made the bull savage and caused Minos\' wife Pasiphae to fall in love with it, resulting in the birth of the Minotaur.',
            narrative2: 'By the time Heracles arrived, the bull was rampaging across Crete, destroying orchards, levelling walls, and breathing fire. King Minos was happy for Heracles to remove this problem. Heracles tracked the bull and wrestled it into submission with his bare hands, demonstrating his superiority over the savage beast.',
            narrative3: 'Most remarkably, Heracles then rode the bull across the Mediterranean Sea back to Greece, presenting it alive to Eurystheus. The king, as usual, wanted nothing to do with the dangerous creature and released it. The bull then wandered to Marathon, where it would later be captured by Theseus. This labour showed Heracles\' power extending beyond Greece\'s borders.',
            challenge: 'The bull that fathered the Minotaur, now running wild and breathing fire, destroying Cretan crops and terrorising the island.',
            solution: 'Heracles wrestled it into submission with his bare hands and rode it across the sea back to Greece like a horse.',
            significance: 'First labour outside the Peloponnese, expanding the geographic scope of his heroism. The bull would later be captured again by Theseus.'
        },
        {
            number: 8,
            name: 'Mares of Diomedes',
            icon: 'üê¥',
            location: 'Thrace',
            narrative: 'King Diomedes of Thrace, son of Ares and Cyrene, owned four mares named Podargos (swift), Lampon (shining), Xanthos (yellow), and Deinos (terrible). He fed them human flesh, usually from unwitting guests, which had made them uncontrollably savage. They were kept tethered with iron chains to bronze mangers, as their madness made them impossible to handle.',
            narrative2: 'Heracles travelled to Thrace with a band of volunteers, including his young lover Abderus. They overpowered the grooms and drove the mares to the sea. When Diomedes and his men pursued them, Heracles left Abderus to guard the horses whilst he fought. He defeated the Thracians and fed Diomedes to his own mares. The horses, satisfied by eating their master, became calm enough to handle.',
            narrative3: 'Tragically, whilst Heracles was fighting, the mares had also killed and eaten Abderus. Heracles founded the city of Abdera in his honour. He then harnessed the now-calm mares to Diomedes\' chariot and drove them back to Eurystheus. The king dedicated them to Hera and set them free. They were eventually killed by wild beasts on Mount Olympus, or in some versions, their descendants survived to the time of Alexander the Great.',
            challenge: 'Four horses fed human flesh by King Diomedes, making them savage and uncontrollable. They were tethered with iron chains to bronze mangers.',
            solution: 'Heracles fed Diomedes to his own horses, calming them with their master\'s flesh, then drove them back to Eurystheus.',
            significance: 'Justice through poetic retribution. The death of his companion Abderus added tragic cost, showing heroism demands sacrifice.'
        },
        {
            number: 9,
            name: 'Belt of Hippolyta',
            icon: '‚öîÔ∏è',
            location: 'Themiscyra, land of Amazons',
            narrative: 'Eurystheus\' daughter Admete desired the belt of Hippolyta, Queen of the Amazons. This was no ordinary belt but a golden war-girdle given to Hippolyta by her father Ares, god of war. It symbolised her authority over the fierce warrior women who lived by the Black Sea, who had created a society entirely without men.',
            narrative2: 'Heracles sailed with a crew of heroes, including Theseus. When they arrived at Themiscyra, Queen Hippolyta came to meet them. Impressed by Heracles\' fame and attracted to him, she agreed to give him the belt peacefully. However, Hera, disguised as an Amazon, spread a rumour that Heracles intended to kidnap their queen. The Amazons attacked in force.',
            narrative3: 'In the ensuing battle, Heracles was forced to kill Hippolyta to get the belt, though some versions say she survived and it was her sister Antiope who died. The Greeks fought their way back to their ship with heavy losses. Theseus abducted an Amazon (Antiope or Hippolyta, depending on the version), which would later lead to an Amazon invasion of Athens. The belt was duly delivered to Admete, but the labour showed how divine interference could turn diplomacy into tragedy.',
            challenge: 'Retrieve the war belt of Hippolyta, Queen of the Amazons, a gift from Ares. Required travelling to the edge of the known world.',
            solution: 'Initially diplomatic success, but Hera disguised herself and turned the Amazons against him. Heracles had to fight and kill Hippolyta for the belt.',
            significance: 'Showed that even peaceful solutions could be sabotaged by divine interference. Led to future conflict between Athens and Amazons.'
        },
        {
            number: 10,
            name: 'Cattle of Geryon',
            icon: 'üêÑ',
            location: 'Erytheia, far western edge',
            narrative: 'This labour required Heracles to travel to the very edge of the world, to the island of Erytheia in the far western ocean. There lived Geryon, a giant with three bodies joined at the waist, making him the strongest mortal alive. He owned a herd of magnificent red cattle, guarded by the herdsman Eurytion and the two-headed dog Orthrus, brother to Cerberus.',
            narrative2: 'The journey itself was epic. When Heracles reached the straits between Europe and Africa, he set up the Pillars of Heracles (Rock of Gibraltar and Jebel Musa) to mark the edge of the civilised world. The heat of the African sun angered him so much that he shot an arrow at Helios. The sun god, impressed by his audacity, lent him the golden cup he used to sail across the ocean each night. Heracles used this cup to reach Erytheia.',
            narrative3: 'On the island, Heracles first killed Orthrus with his club, then Eurytion. When Geryon heard of this and came to fight, Heracles shot him through all three bodies with a single arrow. The return journey with the cattle was fraught with adventures across Europe - thieves, monsters, and gods all tried to steal the magnificent herd. When he finally delivered them to Eurystheus, they were sacrificed to Hera.',
            challenge: 'Steal the red cattle of Geryon, a three-bodied giant, from the edge of the world. Guarded by a two-headed dog and giant herdsman.',
            solution: 'Heracles travelled to the edge of the world in Helios\' golden cup, killed Geryon with an arrow through all three bodies, and drove the cattle back through Europe.',
            significance: 'Set up the Pillars of Heracles (Gibraltar) marking the edge of the world. Showed heroism expanding the boundaries of the known world.'
        },
        {
            number: 11,
            name: 'Apples of Hesperides',
            icon: 'üçé',
            location: 'Garden of Hesperides, far west',
            narrative: 'The golden apples grew in a garden at the edge of the world, a wedding gift from Gaia to Hera. They were tended by the Hesperides, daughters of the evening, and guarded by Ladon, an immortal dragon with a hundred heads that never slept. No mortal knew where this garden was located, adding another layer of difficulty to an already impossible task.',
            narrative2: 'Heracles first had to find the garden. He captured the sea-god Nereus, the Old Man of the Sea, and held him despite his shape-shifting until he revealed the location. On his journey, Heracles freed Prometheus from his eternal torment, killing the eagle that daily ate his liver. In gratitude, Prometheus advised him not to pick the apples himself but to get Atlas to do it.',
            narrative3: 'Atlas, who held up the sky, was the father of the Hesperides. Heracles offered to hold the sky whilst Atlas fetched the apples. Atlas agreed, relieved to be free of his burden. When Atlas returned with the apples, he suggested that he could deliver them himself whilst Heracles continued to hold the sky. Heracles pretended to agree but asked Atlas to hold the sky for just a moment whilst he adjusted his cloak as padding. When Atlas took back the sky, Heracles picked up the apples and left. The apples were later returned to the garden by Athena, as they were too sacred to remain in mortal hands.',
            challenge: 'Fetch golden apples from a garden at the edge of the world, guarded by the dragon Ladon and the Hesperides nymphs. Location unknown.',
            solution: 'Heracles held up the sky whilst Atlas fetched the apples, then tricked Atlas into taking the sky back by asking for help adjusting his cloak.',
            significance: 'Literally supported the heavens, proving divine-level strength. Showed that cleverness was as important as strength against titans.'
        },
        {
            number: 12,
            name: 'Cerberus',
            icon: 'üê∫',
            location: 'The Underworld',
            narrative: 'The final labour was the most impossible of all: descend to the Underworld and bring back Cerberus, the three-headed hound that guarded the gates of the dead. This monstrous dog had a serpent for a tail and snakes growing from his back. His job was to prevent the living from entering and the dead from leaving. To attempt this labour was to challenge death itself.',
            narrative2: 'Heracles first underwent initiation into the Eleusinian Mysteries to learn how to enter and exit the Underworld safely. Guided by Hermes and Athena, he descended through the cave at Taenarum. The shades of the dead fled from him in fear, except for Meleager and Medusa. He even wrestled Menoetes, herdsman of Hades, breaking his ribs before Persephone intervened.',
            narrative3: 'When Heracles reached the throne of Hades and asked to borrow Cerberus, the god of the dead agreed on one condition: Heracles must subdue the beast using no weapons, only his bare hands. Heracles found Cerberus at the gates of Acheron, wrapped his arms around all three heads at once, and squeezed until the beast submitted, despite being bitten by the serpent tail. He carried Cerberus to the surface, where the hell-hound\'s drool created the poisonous plant aconite. After showing the beast to the terrified Eurystheus (who hid in his jar as usual), Heracles returned Cerberus to the Underworld, having conquered death itself.',
            challenge: 'Bring back Cerberus, the three-headed guardian of the underworld, alive and without using weapons. To challenge death itself.',
            solution: 'With divine guidance from Hermes and Athena, Heracles wrestled Cerberus into submission with his bare hands and brought him to Eurystheus.',
            significance: 'Conquered death itself - the ultimate heroic achievement. Proved Heracles worthy of immortality. Even Hades respected his strength.'
        }
    ],

    figures: {
        'hera': {
            name: 'Hera',
            role: 'Queen of the gods',
            significance: 'Zeus\'s wife who persecuted Heracles because he was the illegitimate son of her husband. Her interference turned the peaceful Amazon embassy into warfare.'
        },
        'atlas': {
            name: 'Atlas',
            role: 'Titan who holds up the sky',
            significance: 'Heracles temporarily took his burden during the eleventh labour, literally supporting the heavens. Atlas was the father of the Hesperides.'
        },
        'prometheus': {
            name: 'Prometheus',
            role: 'Titan who gave fire to humans',
            significance: 'Chained to a rock for his crime, freed by Heracles during the eleventh labour. In gratitude, he advised Heracles to trick Atlas.'
        },
        'hades': {
            name: 'Hades',
            role: 'God of the Underworld',
            significance: 'Allowed Heracles to borrow Cerberus on the condition he subdue the beast without weapons. Showed respect for Heracles\' strength.'
        }
    },

    places: {
        'erytheia': {
            name: 'Erytheia',
            description: 'A mythical island at the edge of the world in the far western ocean.',
            significance: 'Home of the giant Geryon and his red cattle. Represented the boundary between the civilised world and the unknown.'
        },
        'pillars': {
            name: 'Pillars of Heracles',
            description: 'The Rock of Gibraltar and Jebel Musa, marking the straits between Europe and Africa.',
            significance: 'Set up by Heracles to mark the edge of the known world. The inscription "Non plus ultra" (nothing further beyond) warned sailors.'
        },
        'underworld': {
            name: 'The Underworld',
            description: 'Realm of the dead ruled by Hades and Persephone.',
            significance: 'The ultimate destination - capturing Cerberus proved Heracles could conquer even death itself. No mortal had descended and returned alive.'
        },
        'themiscyra': {
            name: 'Themiscyra',
            description: 'Capital city of the Amazons on the southern shore of the Black Sea.',
            significance: 'A society of warrior women who lived without men. Represented the edges of the Greek world and alternative civilisations.'
        }
    },

    exitQuestions: [
        {
            question: 'How did the geographic scope of labours 7-12 differ from labours 1-6? What does this progression show about Heracles\' heroism?',
            answer: 'Labours 1-6 were in the Peloponnese (local), whilst 7-12 took him overseas to Crete, Thrace, the edge of the world, and the Underworld. This progression shows Heracles becoming a universal hero, not just a regional champion, with his fame spreading across and beyond the known world.'
        },
        {
            question: 'Why was the capture of Cerberus considered the ultimate labour? What did it prove about Heracles?',
            answer: 'Cerberus guarded the Underworld - the final barrier between mortals and gods. By descending to the realm of death and returning alive, Heracles conquered death itself. This proved he was worthy of immortality and showed he had transcended normal human limitations to achieve divine-level status.'
        },
        {
            question: 'Choose one labour from 7-12. Describe: (a) the challenge Heracles faced, (b) how he overcame it, and (c) what this tells us about his character.',
            answer: 'Example - Apples of Hesperides: (a) Had to fetch golden apples from unknown location guarded by an immortal dragon. (b) He captured Nereus to find it, held up the sky for Atlas, then tricked Atlas into taking the sky back. (c) Shows Heracles combined strength (holding up the heavens) with intelligence (tricking Atlas) - brains and brawn together.'
        },
        {
            question: 'How did divine assistance become more important in the later labours? Give two examples.',
            answer: 'Labour 10: Helios lent his golden cup to cross the ocean. Labour 12: Hermes and Athena guided him through the Underworld. The later labours involved cosmic forces that required divine help - Heracles couldn\'t reach these places or complete these tasks through strength alone.'
        },
        {
            question: 'The Pillars of Heracles at Gibraltar marked "the edge of the world". Why was this achievement significant for Greek culture?',
            answer: 'Heracles literally expanded the boundaries of the known world. By setting up these pillars, he showed that Greek heroism could reach anywhere. The inscription "Non plus ultra" (nothing further beyond) became a symbol of the limits of exploration. Later, when Spain colonised America, they changed it to "Plus ultra" (further beyond).'
        }
    ]
};

// Initialise
document.addEventListener('DOMContentLoaded', function() {
    initialiseNavigation();
    initialiseLabours();
    initialiseExitQuestions();
    
    setTimeout(() => {
        setupInteractiveContent();
    }, 100);
});

// Navigation
function initialiseNavigation() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            showSection(this.getAttribute('data-section'));
        });
    });

    const navButtons = document.querySelectorAll('.nav-btn[data-goto]');
    navButtons.forEach(button => {
        button.addEventListener('click', function() {
            showSection(this.getAttribute('data-goto'));
        });
    });
}

function showSection(sectionId) {
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    window.scrollTo({ top: 0, behavior: 'smooth' });
    setupInteractiveContent();
}

// Labours Timeline
function initialiseLabours() {
    const timeline = document.getElementById('labours-timeline');
    if (!timeline) return;
    
    timeline.innerHTML = laboursData.labours.map(labour => `
        <div class="timeline-labour" onclick="showLabourDetail(${labour.number})">
            <div class="timeline-labour-number">${labour.number}</div>
            <div class="timeline-labour-icon">${labour.icon}</div>
            <div class="timeline-labour-name">${labour.name}</div>
        </div>
    `).join('');
}

function showLabourDetail(labourNum) {
    const labour = laboursData.labours.find(l => l.number === labourNum);
    const detailBox = document.getElementById('labour-detail-box');
    
    if (labour && detailBox) {
        // Update active states
        document.querySelectorAll('.timeline-labour').forEach(el => {
            el.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        // Show detail
        detailBox.innerHTML = `
            <div class="labour-detail-header">
                <div class="labour-detail-number">${labour.number}</div>
                <div class="labour-detail-info">
                    <h4>${labour.name}</h4>
                    <div class="labour-detail-location">üìç ${labour.location}</div>
                </div>
            </div>
            
            <div class="labour-detail-narrative">
                <p>${labour.narrative}</p>
                ${labour.narrative2 ? `<p>${labour.narrative2}</p>` : ''}
                ${labour.narrative3 ? `<p>${labour.narrative3}</p>` : ''}
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'difficulty')">
                Reveal Chief Difficulty ‚¨á
            </button>
            <div class="reveal-content difficulty">
                <div class="reveal-label">Chief Difficulty</div>
                <div>${labour.challenge}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'solution')">
                Reveal How Heracles Succeeded ‚¨á
            </button>
            <div class="reveal-content solution">
                <div class="reveal-label">How Heracles Succeeded</div>
                <div>${labour.solution}</div>
            </div>
            
            <button class="reveal-button" onclick="revealContent(this, 'significance')">
                Reveal Significance ‚¨á
            </button>
            <div class="reveal-content significance">
                <div class="reveal-label">Significance</div>
                <div>${labour.significance}</div>
            </div>
        `;
        detailBox.classList.add('active');
    }
}

function revealContent(button, type) {
    button.classList.add('revealed');
    button.nextElementSibling.classList.add('revealed');
}

// Interactive Content
function setupInteractiveContent() {
    document.querySelectorAll('.key-figure').forEach(figure => {
        const newFigure = figure.cloneNode(true);
        figure.parentNode.replaceChild(newFigure, figure);
        newFigure.addEventListener('click', function(e) {
            e.stopPropagation();
            showFigureInfo(this.dataset.info);
        });
    });

    document.querySelectorAll('.key-place').forEach(place => {
        const newPlace = place.cloneNode(true);
        place.parentNode.replaceChild(newPlace, place);
        newPlace.addEventListener('click', function(e) {
            e.stopPropagation();
            showPlaceInfo(this.dataset.info);
        });
    });
}

function showFigureInfo(figureId) {
    if (laboursData.figures[figureId]) {
        const fig = laboursData.figures[figureId];
        showInfoPanel('Historical Figure', `
            <h4>${fig.name}</h4>
            <p><strong>Role:</strong> ${fig.role}</p>
            <p><strong>Significance:</strong> ${fig.significance}</p>
        `);
    }
}

function showPlaceInfo(placeId) {
    if (laboursData.places[placeId]) {
        const place = laboursData.places[placeId];
        showInfoPanel('Key Place', `
            <h4>${place.name}</h4>
            <p><strong>Description:</strong> ${place.description}</p>
            <p><strong>Significance:</strong> ${place.significance}</p>
        `);
    }
}

function showInfoPanel(title, content) {
    const panel = document.getElementById('info-panel');
    const titleEl = document.getElementById('info-panel-title');
    const contentEl = document.getElementById('info-panel-content');
    
    if (panel && titleEl && contentEl) {
        titleEl.textContent = title;
        contentEl.innerHTML = content;
        panel.classList.add('active');
        
        setTimeout(() => {
            panel.classList.remove('active');
        }, 15000);
    }
}

function closeInfoPanel() {
    const panel = document.getElementById('info-panel');
    if (panel) {
        panel.classList.remove('active');
    }
}

// Exit Questions
let currentQuestion = 0;

function initialiseExitQuestions() {
    loadExitQuestion();
    
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadExitQuestion();
            }
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function() {
            if (currentQuestion < laboursData.exitQuestions.length - 1) {
                currentQuestion++;
                loadExitQuestion();
            }
        });
    }
    
    if (revealBtn) {
        revealBtn.addEventListener('click', function() {
            const answerEl = document.getElementById('questionAnswer');
            if (answerEl && !answerEl.classList.contains('visible')) {
                answerEl.classList.add('visible');
                this.textContent = '‚úì Answer Revealed';
                this.classList.add('revealed');
            }
        });
    }
}

function loadExitQuestion() {
    const question = laboursData.exitQuestions[currentQuestion];
    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const questionAnswerEl = document.getElementById('questionAnswer');
    const prevBtn = document.getElementById('prevQuestion');
    const nextBtn = document.getElementById('nextQuestion');
    const revealBtn = document.getElementById('revealAnswer');
    
    if (questionNumberEl) questionNumberEl.textContent = `Question ${currentQuestion + 1} of ${laboursData.exitQuestions.length}`;
    if (questionTextEl) questionTextEl.textContent = question.question;
    if (questionAnswerEl) {
        questionAnswerEl.textContent = question.answer;
        questionAnswerEl.classList.remove('visible');
    }
    
    if (prevBtn) prevBtn.disabled = currentQuestion === 0;
    if (nextBtn) nextBtn.disabled = currentQuestion === laboursData.exitQuestions.length - 1;
    
    if (revealBtn) {
        revealBtn.textContent = 'Reveal Answer';
        revealBtn.classList.remove('revealed');
    }
}
