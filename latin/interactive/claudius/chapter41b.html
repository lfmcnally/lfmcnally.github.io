<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classicalia - Tacitus Annals 12.41b</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .logo-section {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .nav-section {
            padding: 1rem 0.5rem;
        }

        .nav-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #9ca3af;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            margin: 0.125rem 0;
            border-radius: 8px;
            text-decoration: none;
            color: #4b5563;
            font-size: 0.9rem;
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .nav-item.active {
            background: #eef2ff;
            color: #0066ff;
            font-weight: 500;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .main-content {
            margin-left: 240px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.875rem 2rem;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .content-wrapper {
            flex: 1;
            overflow-y: auto;
        }

        .content-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .lesson-header {
            margin-bottom: 2rem;
        }

        .lesson-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .lesson-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .lesson-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 1.5rem;
            align-items: start;
        }

        .card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        .card-body {
            padding: 1.5rem;
        }

        .tabs {
            display: flex;
            gap: 0.25rem;
            background: #f3f4f6;
            padding: 0.25rem;
            border-radius: 8px;
        }

        .tab {
            flex: 1;
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .tab.active {
            background: white;
            color: #0066ff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .latin-text {
            font-size: 1.25rem;
            line-height: 2.2;
            color: #1f2937;
            margin: 1.5rem 0;
        }

        .phrase {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
        }

        .phrase.phrase-1 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-1:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-2 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-2:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-3 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-3:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-4 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-4:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-5 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-5:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-6 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-6:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-7 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-7:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-8 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-8:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-9 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-9:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-10 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-10:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-11 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-11:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-12 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-12:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-13 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-13:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-14 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-14:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-15 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-15:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-16 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-16:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-17 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-17:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-18 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-18:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-19 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-19:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-20 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-20:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-21 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-21:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-22 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-22:hover { background: rgba(255, 152, 0, 0.3); }

        .highlight-style {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
            background: transparent;
        }

        .mode-style .highlight-style.style-1 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-1:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-2 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-2:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-3 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-3:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-4 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-4:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-5 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-5:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-6 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-6:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-7 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-7:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-8 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-8:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-9 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-9:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-10 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-10:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-11 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-11:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-12 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-12:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-13 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-13:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-14 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-14:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-15 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-15:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-16 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-16:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-17 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-17:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-18 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-18:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-19 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-19:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-20 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-20:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-21 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-21:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-22 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-22:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-23 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-23:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-24 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-24:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-25 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-25:hover { background: rgba(33, 150, 243, 0.4); }

        .mode-style .phrase {
            background: transparent !important;
            cursor: default;
        }

        .latin-text:not(.mode-style) .highlight-style {
            background: transparent;
            cursor: default;
            padding: 0;
            pointer-events: none;
        }

        .analysis-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            display: none;
        }

        .analysis-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-badge {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }

        .analysis-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .analysis-card p {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        .analysis-card .vocab-list {
            font-size: 0.85rem;
            line-height: 1.7;
            color: #4b5563;
            margin: 0.5rem 0;
        }

        .analysis-card strong {
            color: #0066ff;
        }

        .translation-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        .translation-text {
            display: none;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #059669;
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: rgba(5, 150, 105, 0.05);
            border-radius: 6px;
            border-left: 3px solid #059669;
        }

        .translation-text.visible {
            display: block;
        }

        .reveal-translation-btn {
            background: #0066ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reveal-translation-btn:hover {
            background: #0052cc;
        }

        .reveal-translation-btn.revealed {
            background: #10b981;
        }

        .reveal-translation-btn.revealed:hover {
            background: #059669;
        }

        .resource-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            display: none;
        }

        .resource-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .resource-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .resource-card p {
            font-size: 0.875rem;
            line-height: 1.7;
            color: #4b5563;
            margin-bottom: 0.75rem;
        }

        .resource-card ul {
            margin: 0.75rem 0;
            padding-left: 1.5rem;
        }

        .resource-card li {
            font-size: 0.875rem;
            line-height: 1.7;
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .default-message {
            text-align: center;
            padding: 2rem 1rem;
            color: #9ca3af;
            font-style: italic;
            font-size: 0.9rem;
        }

        @media (max-width: 1024px) {
            .lesson-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-section">
            <a href="../../index.html" class="logo">
                <div class="logo-icon">C</div>
                <span class="logo-text">Classicalia</span>
            </a>
        </div>

        <nav class="nav-section">
            <div class="nav-title">Resources</div>
            <div class="nav-item active" onclick="showView('text')">
                <span class="nav-icon">üìñ</span>
                <span>Read</span>
            </div>
            <div class="nav-item" onclick="showView('context')">
                <span class="nav-icon">üèõÔ∏è</span>
                <span>Context</span>
            </div>
            <div class="nav-item" onclick="showView('summary')">
                <span class="nav-icon">üìã</span>
                <span>Summary</span>
            </div>
            <div class="nav-item" onclick="showView('comprehension')">
                <span class="nav-icon">‚ùì</span>
                <span>Comprehension</span>
            </div>
            <div class="nav-item" onclick="showView('sources')">
                <span class="nav-icon">üìö</span>
                <span>Sources</span>
            </div>
            <div class="nav-item" onclick="showView('themes')">
                <span class="nav-icon">üé≠</span>
                <span>Themes</span>
            </div>
            <div class="nav-item" onclick="showView('extension')">
                <span class="nav-icon">‚ú®</span>
                <span>Extension</span>
            </div>
        </nav>
    </aside>

    <main class="main-content">
        <div class="top-bar"></div>

        <div class="content-wrapper">
            <div class="content-container">
                <header class="lesson-header">
                    <h1 class="lesson-title" id="lessonTitle">Britannicus's Isolation</h1>
                    <div class="lesson-meta">
                        <span>üìï Tacitus Annals 12.41b</span>
                        <span>‚è±Ô∏è 55 min</span>
                        <span>üìä A-Level</span>
                    </div>
                </header>

                <div class="lesson-layout">
                    <div class="card" id="textCard">
                        <div class="card-header">
                            <h3 class="card-title">Latin Text</h3>
                            <div class="tabs">
                                <button class="tab active" onclick="setMode('grammar')">Grammar</button>
                                <button class="tab" onclick="setMode('style')">Style</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="latin-text" id="latinText"></div>
                            
                            <div class="btn-group">
                                <button class="btn" onclick="toggleFullTranslation()">Show Translation</button>
                                <button class="btn" onclick="resetView()">Reset View</button>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="panelTitle">Analysis</h3>
                            </div>
                            <div class="card-body" id="analysisPanel">
                                <div class="default-message" id="defaultMessage">
                                    Click any coloured phrase to see vocabulary and grammar
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const lessonData = {
            fullTranslation: "At the same time, those of the centurions and tribunes who were pitying the fate of Britannicus were removed on false pretexts, and others under the pretence of some distinction or other; also, if anyone of the freedmen had incorruptible loyalty, he was driven out on a similar pretext. When they met each other, Nero greeted Britannicus by name, Britannicus greeted the other as Domitius. Agrippina reported this to her husband with much complaining as the beginning of disharmony: (she said that) of course, the adoption was being disregarded, and what the senators had resolved and the people ordered was being annulled within their own home; and unless the wickedness of those who were teaching such hostility was prevented, it would break out to the ruination of the state. Disturbed by these (remarks) as if they were accusations, (Claudius) exiled or killed all the best teachers and put men who had been assigned by his stepmother in charge of him.",

            latinText: `
                <span class="phrase phrase-1" onclick="showAnalysis('phrase1')">
                    <span class="highlight-style style-1" onclick="showAnalysis('style1'); event.stopPropagation()">simul</span> qui centurionum tribunorumque sortem Britannici miserabantur
                </span>,
                <span class="phrase phrase-2" onclick="showAnalysis('phrase2')">remoti 
                    <span class="highlight-style style-2" onclick="showAnalysis('style2'); event.stopPropagation()">fictis causis</span>
                </span>
                <span class="phrase phrase-3" onclick="showAnalysis('phrase3')">et alii 
                    <span class="highlight-style style-3" onclick="showAnalysis('style3'); event.stopPropagation()">per speciem honoris</span>
                </span>;
                <span class="phrase phrase-4" onclick="showAnalysis('phrase4')">etiam libertorum 
                    <span class="highlight-style style-4" onclick="showAnalysis('style4'); event.stopPropagation()">si quis incorrupta fide</span>
                </span>,
                <span class="phrase phrase-5" onclick="showAnalysis('phrase5')">depellitur 
                    <span class="highlight-style style-5" onclick="showAnalysis('style5'); event.stopPropagation()">tali occasione</span>
                </span>.
                
                <span class="phrase phrase-6" onclick="showAnalysis('phrase6')">
                    <span class="highlight-style style-6" onclick="showAnalysis('style6'); event.stopPropagation()">obvii inter se</span>
                    Nero Britannicum nomine
                </span>,
                <span class="phrase phrase-7" onclick="showAnalysis('phrase7')">ille 
                    <span class="highlight-style style-7" onclick="showAnalysis('style7'); event.stopPropagation()">Domitium</span>
                    <span class="highlight-style style-8" onclick="showAnalysis('style8'); event.stopPropagation()">salutavere</span>
                </span>.
                
                <span class="phrase phrase-8" onclick="showAnalysis('phrase8')">quod ut 
                    <span class="highlight-style style-9" onclick="showAnalysis('style9'); event.stopPropagation()">discordiae initium</span>
                </span>
                <span class="phrase phrase-9" onclick="showAnalysis('phrase9')">Agrippina 
                    <span class="highlight-style style-10" onclick="showAnalysis('style10'); event.stopPropagation()">multo questu</span>
                    ad maritum defert
                </span>:
                <span class="phrase phrase-10" onclick="showAnalysis('phrase10')">
                    <span class="highlight-style style-11" onclick="showAnalysis('style11'); event.stopPropagation()">sperni quippe</span>
                    adoptionem
                </span>,
                <span class="phrase phrase-11" onclick="showAnalysis('phrase11')">
                    <span class="highlight-style style-12" onclick="showAnalysis('style12'); event.stopPropagation()">quaeque censuerint patres, iusserit populus</span>
                </span>,
                <span class="phrase phrase-12" onclick="showAnalysis('phrase12')">
                    <span class="highlight-style style-13" onclick="showAnalysis('style13'); event.stopPropagation()">intra penates</span>
                    <span class="highlight-style style-14" onclick="showAnalysis('style14'); event.stopPropagation()">abrogari</span>
                </span>;
                <span class="phrase phrase-13" onclick="showAnalysis('phrase13')">ac nisi 
                    <span class="highlight-style style-15" onclick="showAnalysis('style15'); event.stopPropagation()">pravitas tam infensa</span>
                    docentium arceatur
                </span>,
                <span class="phrase phrase-14" onclick="showAnalysis('phrase14')">
                    <span class="highlight-style style-16" onclick="showAnalysis('style16'); event.stopPropagation()">eruptura</span>
                    in publicam perniciem
                </span>.
                
                <span class="phrase phrase-15" onclick="showAnalysis('phrase15')">
                    <span class="highlight-style style-17" onclick="showAnalysis('style17'); event.stopPropagation()">commotus his quasi criminibus</span>
                </span>
                <span class="phrase phrase-16" onclick="showAnalysis('phrase16')">
                    <span class="highlight-style style-18" onclick="showAnalysis('style18'); event.stopPropagation()">optimum quemque</span>
                    educatorem filii
                </span>
                <span class="phrase phrase-17" onclick="showAnalysis('phrase17')">
                    <span class="highlight-style style-19" onclick="showAnalysis('style19'); event.stopPropagation()">exilio aut morte</span>
                    adficit
                </span>
                <span class="phrase phrase-18" onclick="showAnalysis('phrase18')">
                    <span class="highlight-style style-20" onclick="showAnalysis('style20'); event.stopPropagation()">datosque a noverca</span>
                    custodiae eius imponit
                </span>.
            `,

            grammar: {
                phrase1: {
                    title: "simul qui centurionum tribunorumque sortem Britannici miserabantur",
                    vocab: [
                        "<strong>simul</strong> = at the same time (adverb)",
                        "<strong>qui</strong> = who (nominative plural masculine)",
                        "<strong>centurionum</strong> = of centurions (genitive plural)",
                        "<strong>tribunorum</strong> = of tribunes (genitive plural)",
                        "<strong>-que</strong> = and (enclitic)",
                        "<strong>sortem</strong> = fate, lot (accusative singular)",
                        "<strong>Britannici</strong> = of Britannicus (genitive singular)",
                        "<strong>miserabantur</strong> = were pitying (imperfect deponent, 3rd plural)"
                    ],
                    grammar: "Relative clause with qui introducing the subject. Imperfect tense shows ongoing action in the past. Genitive Britannici depends on sortem. The -que enclitic joins centurionum and tribunorum.",
                    translation: "At the same time, those who were pitying the fate of Britannicus among the centurions and tribunes"
                },
                phrase2: {
                    title: "remoti fictis causis",
                    vocab: [
                        "<strong>remoti</strong> = removed (perfect passive participle, nominative plural)",
                        "<strong>fictis</strong> = false, fabricated (perfect passive participle, ablative plural)",
                        "<strong>causis</strong> = by pretexts, reasons (ablative plural)"
                    ],
                    grammar: "Perfect passive participle agreeing with qui. Ablative of means shows the instrument of removal. The participle 'fictis' emphasises the dishonest nature of the official reasons given.",
                    translation: "were removed on false pretexts"
                },
                phrase3: {
                    title: "et alii per speciem honoris",
                    vocab: [
                        "<strong>et</strong> = and",
                        "<strong>alii</strong> = others (nominative plural)",
                        "<strong>per</strong> = through, by means of (+ accusative)",
                        "<strong>speciem</strong> = appearance, pretence (accusative)",
                        "<strong>honoris</strong> = of honour, distinction (genitive)"
                    ],
                    grammar: "New subject introduced. Per with accusative shows means. Objective genitive honoris depends on speciem - the appearance is 'of honour'. Shows the deception was varied in its methods.",
                    translation: "and others under the pretence of some distinction"
                },
                phrase4: {
                    title: "etiam libertorum si quis incorrupta fide",
                    vocab: [
                        "<strong>etiam</strong> = also, even",
                        "<strong>libertorum</strong> = of freedmen (genitive plural partitive)",
                        "<strong>si</strong> = if",
                        "<strong>quis</strong> = anyone (nominative indefinite)",
                        "<strong>incorrupta</strong> = incorruptible, unbribed (ablative feminine)",
                        "<strong>fide</strong> = with loyalty (ablative)"
                    ],
                    grammar: "Partitive genitive libertorum with indefinite quis. Conditional si introduces protasis. Ablative of description showing the quality that made them dangerous. The loyalty itself becomes the crime.",
                    translation: "also, if anyone of the freedmen with incorruptible loyalty"
                },
                phrase5: {
                    title: "depellitur tali occasione",
                    vocab: [
                        "<strong>depellitur</strong> = is driven out (present passive, 3rd singular)",
                        "<strong>tali</strong> = such, similar (ablative)",
                        "<strong>occasione</strong> = by pretext, opportunity (ablative)"
                    ],
                    grammar: "Historic present for vividness. Passive voice emphasises the victim's lack of agency. Ablative of means with demonstrative tali referring back to the fictitious pretexts already mentioned.",
                    translation: "is driven out on a similar pretext"
                },
                phrase6: {
                    title: "obvii inter se Nero Britannicum nomine",
                    vocab: [
                        "<strong>obvii</strong> = meeting (nominative plural masculine)",
                        "<strong>inter</strong> = between, among (+ accusative)",
                        "<strong>se</strong> = themselves (accusative)",
                        "<strong>Nero</strong> = Nero (nominative)",
                        "<strong>Britannicum</strong> = Britannicus (accusative)",
                        "<strong>nomine</strong> = by name (ablative)"
                    ],
                    grammar: "Ablative absolute construction with obvii. Ablative of means (nomine) shows how Nero greeted him - using his proper name, not 'brother'. The reciprocal inter se sets up the contrast to follow.",
                    translation: "When they met each other, Nero (greeted) Britannicus by name"
                },
                phrase7: {
                    title: "ille Domitium salutavere",
                    vocab: [
                        "<strong>ille</strong> = that one, he (nominative - Britannicus)",
                        "<strong>Domitium</strong> = Domitius (accusative - Nero's birth name)",
                        "<strong>salutavere</strong> = greeted (perfect, 3rd plural = salutaverunt)"
                    ],
                    grammar: "Demonstrative ille refers back to Britannicus. Domitium is accusative object - Britannicus refuses to use the adoptive name 'Nero', instead using the pre-adoption family name. The archaic -ere ending adds formal, historical tone.",
                    translation: "he (Britannicus) greeted (him as) Domitius"
                },
                phrase8: {
                    title: "quod ut discordiae initium",
                    vocab: [
                        "<strong>quod</strong> = which (accusative neuter - referring to the name incident)",
                        "<strong>ut</strong> = as (comparative)",
                        "<strong>discordiae</strong> = of discord, disharmony (genitive)",
                        "<strong>initium</strong> = beginning (accusative in apposition)"
                    ],
                    grammar: "Relative pronoun quod refers to the entire previous incident. Ut introduces the way Agrippina characterises it. Objective genitive discordiae depends on initium. In apposition to quod.",
                    translation: "which as the beginning of discord"
                },
                phrase9: {
                    title: "Agrippina multo questu ad maritum defert",
                    vocab: [
                        "<strong>Agrippina</strong> = Agrippina (nominative)",
                        "<strong>multo</strong> = with much (ablative)",
                        "<strong>questu</strong> = complaining (ablative)",
                        "<strong>ad</strong> = to (+ accusative)",
                        "<strong>maritum</strong> = husband (accusative - Claudius)",
                        "<strong>defert</strong> = reports, brings (present, 3rd singular)"
                    ],
                    grammar: "Historic present for dramatic immediacy. Ablative of manner (multo questu) emphasises her emotional manipulation. Ad maritum shows the report's direction - she goes to the authority figure.",
                    translation: "Agrippina reports with much complaining to her husband"
                },
                phrase10: {
                    title: "sperni quippe adoptionem",
                    vocab: [
                        "<strong>sperni</strong> = to be disregarded (present passive infinitive)",
                        "<strong>quippe</strong> = of course, indeed (emphatic particle)",
                        "<strong>adoptionem</strong> = adoption (accusative subject of infinitive)"
                    ],
                    grammar: "Indirect statement begins - accusative-infinitive construction. Quippe adds indignant emphasis. The passive infinitive shows adoption as the victim of the disrespect. This begins Agrippina's direct speech.",
                    translation: "that of course the adoption was being disregarded"
                },
                phrase11: {
                    title: "quaeque censuerint patres, iusserit populus",
                    vocab: [
                        "<strong>quae</strong> = what things (accusative neuter plural)",
                        "<strong>-que</strong> = and (enclitic)",
                        "<strong>censuerint</strong> = have resolved (perfect subjunctive, 3rd plural)",
                        "<strong>patres</strong> = senators (nominative plural)",
                        "<strong>iusserit</strong> = has ordered (perfect subjunctive, 3rd singular)",
                        "<strong>populus</strong> = people (nominative)"
                    ],
                    grammar: "Relative clause with subjunctive (generic/characteristic use). Perfect subjunctive shows completed action viewed as characteristic. Balances senatorial and popular authority - the adoption had full constitutional legitimacy.",
                    translation: "and what the senators have resolved, the people have ordered"
                },
                phrase12: {
                    title: "intra penates abrogari",
                    vocab: [
                        "<strong>intra</strong> = within (+ accusative)",
                        "<strong>penates</strong> = household gods, home (accusative plural)",
                        "<strong>abrogari</strong> = to be annulled, repealed (present passive infinitive)"
                    ],
                    grammar: "Continues indirect statement. Intra penates is highly emotive - the sacred household itself becomes the site of constitutional violation. Passive infinitive emphasises what is being done to public law.",
                    translation: "was being annulled within the home"
                },
                phrase13: {
                    title: "ac nisi pravitas tam infensa docentium arceatur",
                    vocab: [
                        "<strong>ac</strong> = and",
                        "<strong>nisi</strong> = unless, if not",
                        "<strong>pravitas</strong> = wickedness, perversity (nominative)",
                        "<strong>tam</strong> = so (adverb)",
                        "<strong>infensa</strong> = hostile (nominative feminine)",
                        "<strong>docentium</strong> = of those teaching (genitive plural present participle)",
                        "<strong>arceatur</strong> = is prevented (present subjunctive passive, 3rd singular)"
                    ],
                    grammar: "Conditional clause with nisi and subjunctive (arceatur). Genitive docentium depends on pravitas - she blames the teachers' wickedness. Tam intensifies infensa, creating sense of dangerous conspiracy.",
                    translation: "and unless the wickedness so hostile of those teaching is prevented"
                },
                phrase14: {
                    title: "eruptura in publicam perniciem",
                    vocab: [
                        "<strong>eruptura</strong> = about to break out (future participle, nominative feminine)",
                        "<strong>in</strong> = into, to (+ accusative)",
                        "<strong>publicam</strong> = public (accusative feminine)",
                        "<strong>perniciem</strong> = ruin, destruction (accusative)"
                    ],
                    grammar: "Future participle with esse understood (periphrastic construction showing imminence). In with accusative shows direction of the outbreak. Publicam emphasises state-level consequences from domestic incident.",
                    translation: "it would break out into public ruin"
                },
                phrase15: {
                    title: "commotus his quasi criminibus",
                    vocab: [
                        "<strong>commotus</strong> = disturbed, moved (perfect passive participle, nominative)",
                        "<strong>his</strong> = by these (ablative plural neuter)",
                        "<strong>quasi</strong> = as if, as though",
                        "<strong>criminibus</strong> = by accusations, charges (ablative plural)"
                    ],
                    grammar: "Perfect passive participle agreeing with understood subject Claudius. Ablative of cause. Quasi is crucial - Tacitus suggests these weren't real crimes but were treated as such. Shows Claudius's manipulation.",
                    translation: "disturbed by these things as if they were accusations"
                },
                phrase16: {
                    title: "optimum quemque educatorem filii",
                    vocab: [
                        "<strong>optimum</strong> = best (accusative superlative)",
                        "<strong>quemque</strong> = each (accusative distributive)",
                        "<strong>educatorem</strong> = teacher, tutor (accusative)",
                        "<strong>filii</strong> = of his son (genitive)"
                    ],
                    grammar: "Accusative object of adficit. Quemque is distributive ('each and every') emphasising the purge's totality. Superlative optimum with distributive creates tragic irony - the best teachers specifically targeted. Genitive filii objective.",
                    translation: "each and every best teacher of his son"
                },
                phrase17: {
                    title: "exilio aut morte adficit",
                    vocab: [
                        "<strong>exilio</strong> = with exile (ablative)",
                        "<strong>aut</strong> = or",
                        "<strong>morte</strong> = with death (ablative)",
                        "<strong>adficit</strong> = affects, treats (present, 3rd singular)"
                    ],
                    grammar: "Ablative of means showing two methods. Aut creates stark binary choice. Historic present for vividness. The verb adficit (affects with) takes ablative showing the condition imposed. The casualness is chilling.",
                    translation: "treats with exile or death"
                },
                phrase18: {
                    title: "datosque a noverca custodiae eius imponit",
                    vocab: [
                        "<strong>datos</strong> = having been assigned (perfect passive participle, accusative plural)",
                        "<strong>-que</strong> = and (enclitic)",
                        "<strong>a</strong> = by (+ ablative of agent)",
                        "<strong>noverca</strong> = stepmother (ablative - Agrippina)",
                        "<strong>custodiae</strong> = to guardianship (dative)",
                        "<strong>eius</strong> = of him (genitive - Britannicus)",
                        "<strong>imponit</strong> = puts in charge, imposes (present, 3rd singular)"
                    ],
                    grammar: "Perfect passive participle in accusative, agreeing with understood object (homines). A with ablative shows agent - the replacements are Agrippina's creatures. Dative custodiae shows what they're placed in charge of. Historic present.",
                    translation: "and puts those assigned by his stepmother in charge of him"
                }
            },

            style: {
                style1: {
                    title: "simul",
                    device: "Temporal Connection",
                    effect: "Opens with 'simul' (at the same time) connecting this purge to previous events - shows systematic campaign, not isolated incident. Creates sense of coordinated attack from multiple directions simultaneously."
                },
                style2: {
                    title: "fictis causis",
                    device: "Loaded Vocabulary",
                    effect: "'Fictis' (fabricated, false) from fingo (to shape, feign) exposes the official reasons as manufactured lies. The ablative of means suggests pretexts are tools - lies as instruments of political elimination."
                },
                style3: {
                    title: "per speciem honoris",
                    device: "Irony",
                    effect: "'Per speciem honoris' (through the appearance of honour) - promotions as weapon. Shows totalitarian sophistication: some enemies removed through disgrace, others through 'honour' that removes them from Britannicus. Both achieve same goal."
                },
                style4: {
                    title: "si quis incorrupta fide",
                    device: "Paradox",
                    effect: "Loyalty itself ('incorrupta fide') becomes the crime. The conditional 'si quis' suggests automatic removal for this quality alone. In corrupted palace, integrity is dangerous - virtue transformed into vulnerability."
                },
                style5: {
                    title: "tali occasione",
                    device: "Euphemism",
                    effect: "'Tali occasione' (on such a pretext) uses neutral vocabulary for purge. The demonstrative 'tali' (such) refers back without repeating the lies - creates impression of routine process, bureaucratising the terror."
                },
                style6: {
                    title: "obvii inter se",
                    device: "Scene-Setting",
                    effect: "'Obvii inter se' (meeting each other) creates specific visual moment - the boys encountering in corridor or courtyard. Shifts from abstract policy to concrete incident, making political abstract suddenly personal."
                },
                style7: {
                    title: "Domitium",
                    device: "Loaded Vocabulary",
                    effect: "Britannicus uses 'Domitium' (Nero's birth name) not 'Nero' - rejection of adoption through nomenclature. In status-conscious Rome, refusing the adoptive name is constitutional challenge, denying legitimacy of succession."
                },
                style8: {
                    title: "salutavere",
                    device: "Archaic Form",
                    effect: "Uses archaic perfect ending '-ere' for '-erunt' (greeted). Adds formal, historical gravitas to moment. Makes the greeting seem ceremonial, ritual - this name-choice is deliberate political statement, not casual."
                },
                style9: {
                    title: "discordiae initium",
                    device: "Metaphor",
                    effect: "'Discordiae initium' (beginning of discord) treats discord as entity with genesis. Agrippina frames boys' relationship as narrative with origin point - this moment becomes mythology of family breakdown she can exploit."
                },
                style10: {
                    title: "multo questu",
                    device: "Ablative of Manner",
                    effect: "'Multo questu' (with much complaining) emphasises performative emotion. Not simple report but theatrical display of distress. The ablative manner shows complaint itself as weapon - tears as political tool."
                },
                style11: {
                    title: "sperni quippe",
                    device: "Indignant Particle",
                    effect: "'Quippe' (of course, indeed) adds indignation - 'naturally the adoption is being scorned!' Makes her interpretation seem obvious, inevitable. Loads reader toward her view through linguistic manipulation before presenting evidence."
                },
                style12: {
                    title: "quaeque censuerint patres, iusserit populus",
                    device: "Chiasmus",
                    effect: "Balances 'patres censuerint' and 'populus iusserit' - both constitutional authorities invoked. Creates rhetorical weight through structural balance. Makes domestic incident seem constitutional crisis through parallel structure."
                },
                style13: {
                    title: "intra penates",
                    device: "Emotive Vocabulary",
                    effect: "'Intra penates' (within the household gods) makes home sacred space. Violation isn't just domestic but religious - profaning the household deities. Transforms greeting into sacrilege through spatial vocabulary."
                },
                style14: {
                    title: "abrogari",
                    device: "Legal Vocabulary",
                    effect: "'Abrogari' is technical term for repealing laws. Applies constitutional language to domestic behaviour - family dynamics become legislation. Makes Britannicus's greeting seem like legislative coup."
                },
                style15: {
                    title: "pravitas tam infensa",
                    device: "Loaded Vocabulary",
                    effect: "'Pravitas' (wickedness, perversity) treats teaching as moral corruption. 'Tam infensa' (so hostile) makes education seem warfare. Teachers become conspirators, lessons become attacks - pedagogical relationship transformed into political threat."
                },
                style16: {
                    title: "eruptura",
                    device: "Volcanic Metaphor",
                    effect: "'Eruptura' (about to break out) uses volcanic/disease imagery - domestic problem will 'erupt' into public space. Future participle shows imminent explosion. Private becomes public disaster through geological metaphor."
                },
                style17: {
                    title: "commotus his quasi criminibus",
                    device: "Authorial Commentary",
                    effect: "'Quasi' (as if) is Tacitus interjecting - these weren't real accusations but treated as such. Shows Claudius's susceptibility to manipulation whilst maintaining narrator's judgement. One word exposes entire dynamic."
                },
                style18: {
                    title: "optimum quemque",
                    device: "Distributive with Superlative",
                    effect: "'Optimum quemque' (each and every best) - distributive intensifies superlative. Not just 'the best' but 'every single one of the best'. Creates tragic irony: quality itself makes them targets. Excellence becomes death sentence."
                },
                style19: {
                    title: "exilio aut morte",
                    device: "Hendiadys",
                    effect: "'Exilio aut morte' (exile or death) presents binary with brutal casualness. The 'aut' (or) makes them equivalent options - death as administrative choice. Chilling bureaucratisation of extreme penalties."
                },
                style20: {
                    title: "datosque a noverca",
                    device: "Loaded Vocabulary",
                    effect: "'Noverca' (stepmother) not 'Agrippina' - uses family role emphasising unnaturalness. Stepmothers in Roman culture are proverbially wicked (cf. Medea). Single word choice activates entire literary tradition of evil stepmothers."
                },
                style21: {
                    title: "custodiae eius imponit",
                    device: "Military Vocabulary",
                    effect: "'Custodiae imponit' (puts in charge of guard/custody) uses military language. Not 'teachers' but 'guards'. Britannicus under house arrest, education becomes surveillance. Transforms pedagogy into imprisonment."
                },
                style22: {
                    title: "centurionum tribunorumque",
                    device: "Military Ranks",
                    effect: "Lists military ranks from lower (centurions) to higher (tribunes) - shows purge affects all levels. Creates sense of systematic dismantling of military support base. Even middle ranks aren't safe."
                },
                style23: {
                    title: "remoti... depellitur... imponit",
                    device: "Varied Vocabulary",
                    effect: "Three different verbs for removal: 'remoti' (removed), 'depellitur' (driven out), 'imponit' (imposes). Variation prevents monotony whilst showing range of methods. Each verb carries slightly different nuance of forcible elimination."
                },
                style24: {
                    title: "Nero Britannicum nomine, ille Domitium",
                    device: "Antithesis",
                    effect: "Perfect structural antithesis: Nero uses Britannicus's name, Britannicus uses Nero's birth name. The balance emphasises the contrast. Names become weapons in nomenclatural warfare over legitimacy."
                },
                style25: {
                    title: "ad maritum",
                    device: "Periphrasis",
                    effect: "Calls Claudius 'maritum' (husband) not by name - defines him through relationship to Agrippina. Shows her perspective dominates. He's characterised through his utility to her, not as independent agent."
                }
            },

            resources: {
                summary: `
                    <h4>Summary</h4>
                    <p>Tacitus describes the systematic isolation of Britannicus. Military officers and freedmen who sympathised with him were removed through fabricated pretexts, some disguised as promotions. When Nero and Britannicus met, Nero addressed him by his proper name whilst Britannicus pointedly called Nero 'Domitius' (his pre-adoption name), refusing to acknowledge the adoption.</p>
                    <p>Agrippina reported this name incident to Claudius as the beginning of discord, arguing that the legal adoption was being nullified within their own household. She warned that unless the 'hostile teachers' were stopped, their influence would threaten the state. Claudius, manipulated by these 'accusations', exiled or killed Britannicus's best teachers and replaced them with Agrippina's appointees.</p>
                `,
                context: `
                    <h4>Historical Context</h4>
                    <p><strong>The Adoption:</strong> In AD 50, Claudius formally adopted Nero (born Lucius Domitius Ahenobarbus). This made Nero senior to his own biological son Britannicus in succession, despite being three years younger. The adoption required senatorial approval and popular ratification - hence Agrippina's appeal to constitutional legitimacy.</p>
                    <p><strong>Roman Names:</strong> Adoption meant complete name change. By calling him 'Domitius', Britannicus denied the adoption's validity - essentially calling him an impostor. In Roman culture, refusing someone's legal name was profound insult and political challenge.</p>
                    <p><strong>Military Loyalty:</strong> Centurions and tribunes were crucial to succession. Their 'pity' for Britannicus was dangerous because military support determined legitimacy. Agrippina and Nero needed to eliminate any garrison sympathy for the biological heir.</p>
                    <p><strong>The Teachers:</strong> Roman elite education was political. Teachers didn't just teach grammar but shaped character and loyalty. Controlling Britannicus's educators meant controlling his political formation and potential supporter network.</p>
                `,
                comprehension: `
                    <h4>Comprehension Questions</h4>
                    <ul>
                        <li>What types of people were removed from Britannicus's circle?</li>
                        <li>What two methods were used to remove them?</li>
                        <li>What name did Nero use for Britannicus?</li>
                        <li>What name did Britannicus use for Nero? Why was this significant?</li>
                        <li>To whom did Agrippina report the incident?</li>
                        <li>How did Agrippina characterise the name incident?</li>
                        <li>What constitutional authorities did she invoke?</li>
                        <li>What did she claim would happen if the teachers weren't stopped?</li>
                        <li>What does Tacitus's use of 'quasi' reveal about his judgement?</li>
                        <li>What happened to Britannicus's teachers? Who replaced them?</li>
                    </ul>
                `,
                sources: `
                    <h4>Source Analysis</h4>
                    <p><strong>Tacitus's Vocabulary:</strong> Note how Tacitus reveals judgement through word choice. 'Fictis causis' (false pretexts) and 'quasi criminibus' (as if accusations) show authorial commentary embedded in vocabulary rather than explicit statement.</p>
                    <p><strong>Agrippina's Speech:</strong> The indirect statement preserves her manipulative rhetoric - constitutional language ('quaeque censuerint patres'), emotive spatial metaphors ('intra penates'), apocalyptic warnings ('publicam perniciem'). Tacitus lets her words reveal her character.</p>
                    <p><strong>Multiple Perspectives:</strong> Passage shows military officers' sympathy, Britannicus's resistance, Agrippina's manipulation, Claudius's weakness. Tacitus presents complex situation through interwoven viewpoints rather than single narrative.</p>
                    <p><strong>Historic Present:</strong> 'Defert', 'adficit', 'imponit' use present tense for vividness and dramatic immediacy. Makes past events feel present, drawing reader into moment. Alternates with perfect tense to vary pace.</p>
                `,
                themes: `
                    <h4>Key Themes</h4>
                    <p><strong>Systematic Elimination:</strong> The purge is methodical, varied, complete. From military officers to freedmen to teachers, every support system dismantled. Shows totalitarian thoroughness in removing potential centres of resistance.</p>
                    <p><strong>Virtue as Vulnerability:</strong> 'Incorrupta fide' (incorruptible loyalty) becomes crime. The best teachers ('optimum quemque') specifically targeted. In corrupted system, integrity itself is dangerous - quality becomes liability.</p>
                    <p><strong>Names and Power:</strong> The greeting scene shows nomenclature as political weapon. Names carry constitutional weight - refusing adoptive name challenges legitimacy. Identity becomes battlefield in succession struggle.</p>
                    <p><strong>Manipulation and Weakness:</strong> Agrippina transforms trivial incident into constitutional crisis through rhetoric. Claudius's susceptibility ('quasi criminibus') shows how weakness enables tyranny. Strong manipulator plus weak authority equals purge.</p>
                    <p><strong>Public vs Private:</strong> Agrippina's rhetoric collapses distinction - domestic greeting becomes state emergency. 'Intra penates' (within home) versus 'publicam perniciem' (public ruin) shows how private life becomes political in imperial household.</p>
                `,
                extension: `
                    <h4>Extension Activities</h4>
                    <p><strong>Comparison:</strong> Compare this passage with Suetonius's account of Britannicus's later poisoning (Nero 33). How does Tacitus's earlier isolation scene set up the murder? Track the progressive elimination.</p>
                    <p><strong>Rhetorical Analysis:</strong> Analyse Agrippina's speech structure. Map out her argumentation: constitutional authority ‚Üí domestic violation ‚Üí apocalyptic warning. How does she construct persuasive escalation?</p>
                    <p><strong>Name Analysis:</strong> Research Roman adoption and naming conventions. Why did name changes matter so much? Compare with modern examples of name politics (monarchical succession, etc.).</p>
                    <p><strong>Characterisation:</strong> Track Tacitus's characterisation of Claudius throughout Annals 12. How does this passage fit the pattern of his weakness and manipulation? Is he victim or accomplice?</p>
                    <p><strong>Creative Task:</strong> Write the scene from Britannicus's perspective. What did he know was happening? Was the name choice deliberate political statement or childish defiance?</p>
                `
            }
        };

        let currentAnalysis = null;
        let currentMode = 'grammar';
        let currentView = 'text';

        document.addEventListener('DOMContentLoaded', function() {
            loadLesson();
            document.querySelector('.nav-item').classList.add('active');
            const textCard = document.getElementById('textCard');
            const panelTitle = document.getElementById('panelTitle');
            const analysisPanel = document.getElementById('analysisPanel');
            
            textCard.style.display = 'block';
            panelTitle.textContent = 'Analysis';
            analysisPanel.innerHTML = '<div class="default-message">Click any coloured phrase to see vocabulary and grammar</div>';
            
            for (const [id, data] of Object.entries(lessonData.grammar)) {
                const card = createGrammarCard(id, data);
                analysisPanel.appendChild(card);
            }
            for (const [id, data] of Object.entries(lessonData.style)) {
                const card = createStyleCard(id, data);
                analysisPanel.appendChild(card);
            }
        });

        function loadLesson() {
            const latinTextEl = document.getElementById('latinText');
            latinTextEl.innerHTML = lessonData.latinText;
        }

        function showView(view) {
            currentView = view;
            
            if (event && event.currentTarget) {
                document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            }

            const textCard = document.getElementById('textCard');
            const panelTitle = document.getElementById('panelTitle');
            const analysisPanel = document.getElementById('analysisPanel');

            if (view === 'text') {
                textCard.style.display = 'block';
                panelTitle.textContent = 'Analysis';
                analysisPanel.innerHTML = '<div class="default-message">Click any coloured phrase to see vocabulary and grammar</div>';
                
                for (const [id, data] of Object.entries(lessonData.grammar)) {
                    const card = createGrammarCard(id, data);
                    analysisPanel.appendChild(card);
                }
                for (const [id, data] of Object.entries(lessonData.style)) {
                    const card = createStyleCard(id, data);
                    analysisPanel.appendChild(card);
                }
            } else {
                textCard.style.display = 'none';
                panelTitle.textContent = view.charAt(0).toUpperCase() + view.slice(1);
                
                const resourceData = lessonData.resources[view];
                analysisPanel.innerHTML = `
                    <div class="resource-card active">
                        ${resourceData}
                    </div>
                `;
            }

            currentAnalysis = null;
        }

        function setMode(mode) {
            currentMode = mode;
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            const latinText = document.getElementById('latinText');
            if (mode === 'style') {
                latinText.classList.add('mode-style');
            } else {
                latinText.classList.remove('mode-style');
            }
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
        }

        function showAnalysis(phraseId) {
            if (currentView !== 'text') return;
            
            if (phraseId.startsWith('style') && currentMode !== 'style') {
                return;
            }
            if (phraseId.startsWith('phrase') && currentMode === 'style') {
                return;
            }
            
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'none';
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
            }
            
            const card = document.getElementById(phraseId);
            if (card) {
                card.classList.add('active');
                currentAnalysis = card;
                card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        function createGrammarCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            let vocabHTML = data.vocab.map(v => `<p>‚Ä¢ ${v}</p>`).join('');
            
            card.innerHTML = `
                <div class="analysis-badge">Grammar & Vocabulary</div>
                <h4>${data.title}</h4>
                <div class="vocab-list">${vocabHTML}</div>
                <p><strong>Grammar:</strong> ${data.grammar}</p>
                <div class="translation-section">
                    <button class="reveal-translation-btn" onclick="revealTranslation('${id}')">Reveal Translation</button>
                    <div class="translation-text" id="${id}-translation">
                        <strong>Translation:</strong> "${data.translation}"
                    </div>
                </div>
            `;
            
            return card;
        }

        function revealTranslation(cardId) {
            const translationEl = document.getElementById(cardId + '-translation');
            const button = event.currentTarget;
            
            if (translationEl && !translationEl.classList.contains('visible')) {
                translationEl.classList.add('visible');
                button.textContent = '‚úì Translation Revealed';
                button.classList.add('revealed');
            }
        }

        function createStyleCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            card.innerHTML = `
                <div class="analysis-badge">Literary Device</div>
                <h4>${data.title}</h4>
                <p><strong>Device:</strong> ${data.device}</p>
                <p><strong>Effect:</strong> ${data.effect}</p>
            `;
            
            return card;
        }

        function toggleFullTranslation() {
            const existing = document.getElementById('fullTranslationBox');
            if (existing) {
                existing.remove();
                event.currentTarget.textContent = 'Show Translation';
                return;
            }
            
            const translationBox = document.createElement('div');
            translationBox.id = 'fullTranslationBox';
            translationBox.style.cssText = 'background: rgba(230, 240, 255, 0.8); border-radius: 12px; padding: 1.5rem; margin-top: 1rem; border: 1px solid rgba(0, 102, 255, 0.2);';
            translationBox.innerHTML = `
                <h4 style="font-size: 0.9rem; font-weight: 600; color: #0066ff; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem;">Full Translation</h4>
                <p style="font-size: 1rem; line-height: 1.8; color: #333;">${lessonData.fullTranslation}</p>
            `;
            
            document.querySelector('.btn-group').insertAdjacentElement('beforebegin', translationBox);
            event.currentTarget.textContent = 'Hide Translation';
        }

        function resetView() {
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
            
            const fullTransBox = document.getElementById('fullTranslationBox');
            if (fullTransBox) fullTransBox.remove();
        }
    </script>
</body>
</html>
