<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messalina - Section 5</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #ffffff;
            color: #333;
            padding: 25px 45px;
            min-height: 100vh;
            margin: 0;
            font-size: 22px;
        }

        .header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-top: 2px;
        }

        .logo:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .title-area {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        h1 {
            color: #222;
            margin: 0;
            font-size: 1.6em;
            font-weight: 600;
        }

        .subtitle {
            font-size: 1em;
            color: #666;
            margin: 0;
        }

        /* Compact controls */
        .controls-area {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 4px;
        }

        .controls {
            display: flex;
            gap: 6px;
            justify-content: flex-end;
        }

        .controls button {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
            flex: 1;
            text-align: center;
        }

        .controls button:hover {
            background: rgba(0, 102, 255, 0.15);
            transform: translateY(-1px);
        }

        #showAllBtn {
            background: #0066ff;
            color: white;
        }

        #showAllBtn:hover {
            background: #0052cc;
        }

        #hideAllBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleColoursBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleStyleBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        body.style-mode #toggleStyleBtn {
            background: #0066ff;
            color: white;
        }

        /* Key - compact squares in header */
        .key {
            display: flex;
            gap: 6px;
        }

        .key-item {
            padding: 0.6rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            text-align: center;
            border: none;
            flex: 1;
        }

        .key-item:hover {
            transform: translateY(-1px);
            filter: brightness(0.95);
        }

        .key-item.active {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Main content area */
        .translation-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
        }

        .column-header {
            font-size: 0.9em;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-left: 0;
        }

        /* Each line row */
        .line-row {
            display: flex;
            align-items: flex-end;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .line-number {
            display: none;
            color: #0066ff;
            font-weight: bold;
            min-width: 45px;
            margin-right: 10px;
            font-size: 1.15em;
            align-self: flex-end;
            padding-bottom: 4px;
        }

        .words-container {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            flex-wrap: wrap;
        }

        /* Word group with number above */
        .word-group {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .word-order {
            font-size: 0.65em;
            color: #888;
            margin-bottom: 4px;
            height: 1em;
            font-weight: 600;
        }

        .latin-word, .english-word {
            padding: 3px 7px;
            border-radius: 3px;
            font-size: 1em;
            transition: background-color 0.3s, opacity 0.3s;
            cursor: pointer;
        }

        .latin-word {
            background-color: transparent;
        }

        .english-word {
            opacity: 0;
        }

        .english-word.revealed {
            opacity: 1;
        }

        /* Colours */
        .subject .latin-word { background-color: #ffb3b3; }
        .english-word.subject { background-color: #ffb3b3; }

        .verb .latin-word { background-color: #b3e6ff; }
        .english-word.verb { background-color: #b3e6ff; }

        .object .latin-word { background-color: #b3ffcc; }
        .english-word.object { background-color: #b3ffcc; }

        .genitive .latin-word { background-color: #ffd9b3; }
        .english-word.genitive { background-color: #ffd9b3; }

        .dative .latin-word { background-color: #e6b3ff; }
        .english-word.dative { background-color: #e6b3ff; }

        .ablative .latin-word { background-color: #ffffb3; }
        .english-word.ablative { background-color: #ffffb3; }

        .preposition .latin-word { background-color: #ffb3e6; }
        .english-word.preposition { background-color: #ffb3e6; }

        .conjunction .latin-word { background-color: #d9ffb3; }
        .english-word.conjunction { background-color: #d9ffb3; }

        .adverb .latin-word { background-color: #ccb3ff; }
        .english-word.adverb { background-color: #ccb3ff; }

        .gerundive .latin-word { background-color: #ffcbb3; }
        .english-word.gerundive { background-color: #ffcbb3; }

        /* Highlighting */
        .subject.highlighted .latin-word { background-color: #ffb3b3 !important; }
        .english-word.subject.highlighted { background-color: #ffb3b3 !important; }
        .verb.highlighted .latin-word { background-color: #b3e6ff !important; }
        .english-word.verb.highlighted { background-color: #b3e6ff !important; }
        .object.highlighted .latin-word { background-color: #b3ffcc !important; }
        .english-word.object.highlighted { background-color: #b3ffcc !important; }
        .genitive.highlighted .latin-word { background-color: #ffd9b3 !important; }
        .english-word.genitive.highlighted { background-color: #ffd9b3 !important; }
        .dative.highlighted .latin-word { background-color: #e6b3ff !important; }
        .english-word.dative.highlighted { background-color: #e6b3ff !important; }
        .ablative.highlighted .latin-word { background-color: #ffffb3 !important; }
        .english-word.ablative.highlighted { background-color: #ffffb3 !important; }
        .preposition.highlighted .latin-word { background-color: #ffb3e6 !important; }
        .english-word.preposition.highlighted { background-color: #ffb3e6 !important; }
        .conjunction.highlighted .latin-word { background-color: #d9ffb3 !important; }
        .english-word.conjunction.highlighted { background-color: #d9ffb3 !important; }
        .adverb.highlighted .latin-word { background-color: #ccb3ff !important; }
        .english-word.adverb.highlighted { background-color: #ccb3ff !important; }
        .gerundive.highlighted .latin-word { background-color: #ffcbb3 !important; }
        .english-word.gerundive.highlighted { background-color: #ffcbb3 !important; }

        /* Hide colours mode */
        body.hide-colours .subject .latin-word,
        body.hide-colours .english-word.subject.revealed,
        body.hide-colours .verb .latin-word,
        body.hide-colours .english-word.verb.revealed,
        body.hide-colours .object .latin-word,
        body.hide-colours .english-word.object.revealed,
        body.hide-colours .genitive .latin-word,
        body.hide-colours .english-word.genitive.revealed,
        body.hide-colours .dative .latin-word,
        body.hide-colours .english-word.dative.revealed,
        body.hide-colours .ablative .latin-word,
        body.hide-colours .english-word.ablative.revealed,
        body.hide-colours .preposition .latin-word,
        body.hide-colours .english-word.preposition.revealed,
        body.hide-colours .conjunction .latin-word,
        body.hide-colours .english-word.conjunction.revealed,
        body.hide-colours .adverb .latin-word,
        body.hide-colours .english-word.adverb.revealed,
        body.hide-colours .gerundive .latin-word,
        body.hide-colours .english-word.gerundive.revealed {
            background-color: #e0e0e0;
        }

        /* Style Mode */
        .style-highlight {
            position: relative;
        }

        .style-highlight.active-style .latin-word {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Style panel at bottom */
        .style-panel {
            display: none;
            background: rgba(0, 102, 255, 0.03);
            border-top: 2px solid rgba(0, 102, 255, 0.15);
            padding: 18px 24px;
            margin-top: 20px;
        }

        body.style-mode .style-panel {
            display: block;
        }

        .style-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .style-panel h3 {
            margin: 0;
            color: #0066ff;
            font-size: 1rem;
            font-weight: 600;
        }

        .style-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .style-tag {
            padding: 8px 14px;
            background: white;
            border: 1px solid rgba(0, 102, 255, 0.25);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #333;
        }

        .style-tag:hover {
            border-color: #0066ff;
            background: rgba(0, 102, 255, 0.05);
        }

        .style-tag.active {
            background: #0066ff;
            color: white;
            border-color: #0066ff;
        }

        .style-tag em {
            font-style: italic;
        }

        .style-analysis {
            display: none;
            padding: 16px 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid rgba(0, 102, 255, 0.15);
        }

        .style-analysis.active {
            display: block;
        }

        .style-analysis-title {
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 6px;
            font-size: 1rem;
        }

        .style-analysis-lines {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .style-analysis-effect {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .style-analysis-effect strong {
            color: #0066ff;
        }

        .style-analysis-exam {
            padding-top: 12px;
            border-top: 1px dashed #ddd;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.5;
        }

        .style-analysis-exam strong {
            color: #333;
        }

        .style-analysis em {
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-top">
            <div class="header-left">
                <a href="https://www.classicalia.co.uk" class="logo">C</a>
                <div class="title-area">
                    <h1>Messalina</h1>
                    <p class="subtitle">Section 5 (Lines 39-49): The marriage becomes known to Claudius</p>
                </div>
            </div>
            <div class="controls-area">
                <div class="controls">
                    <button id="showAllBtn">Show All</button>
                    <button id="hideAllBtn">Hide All</button>
                    <button id="toggleColoursBtn">Hide Colours</button>
                    <button id="toggleStyleBtn">Style Notes</button>
                </div>
                <div class="key">
                    <span class="key-item" data-category="subject" style="background-color: #ffb3b3;">Subj.</span>
                    <span class="key-item" data-category="object" style="background-color: #b3ffcc;">Obj.</span>
                    <span class="key-item" data-category="verb" style="background-color: #b3e6ff;">Verb</span>
                    <span class="key-item" data-category="genitive" style="background-color: #ffd9b3;">Gen.</span>
                    <span class="key-item" data-category="dative" style="background-color: #e6b3ff;">Dat.</span>
                    <span class="key-item" data-category="ablative" style="background-color: #ffffb3;">Abl.</span>
                    <span class="key-item" data-category="preposition" style="background-color: #ffb3e6;">Prep.</span>
                    <span class="key-item" data-category="conjunction" style="background-color: #d9ffb3;">Conj.</span>
                    <span class="key-item" data-category="adverb" style="background-color: #ccb3ff;">Adv.</span>
                    <span class="key-item" data-category="gerundive" style="background-color: #ffcbb3;">Gdv.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="translation-area">
        <!-- LATIN COLUMN -->
        <div class="latin-column">
            <div class="column-header">Latin</div>

            <!-- Sentence 1: qui 'discidiumne tuum' inquit 'novisti?' -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group subject style-highlight" data-order="01-01" data-style-feature="discidiumne"><span class="word-order">1</span><span class="latin-word">qui</span></span>
                    <span class="word-group object style-highlight" data-order="01-05" data-style-feature="discidiumne"><span class="word-order">5</span><span class="latin-word">'discidiumne</span></span>
                    <span class="word-group genitive style-highlight" data-order="01-04" data-style-feature="discidiumne"><span class="word-order">4</span><span class="latin-word">tuum'</span></span>
                    <span class="word-group verb" data-order="01-02"><span class="word-order">2</span><span class="latin-word">inquit</span></span>
                    <span class="word-group verb" data-order="01-03"><span class="word-order">3</span><span class="latin-word">'novisti?</span></span>
                </div>
            </div>

            <!-- Sentence 2: Nam matrimonium Silii vidit populus et senatus et milites; -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="02-01"><span class="word-order">1</span><span class="latin-word">Nam</span></span>
                    <span class="word-group object" data-order="02-08"><span class="word-order">8</span><span class="latin-word">matrimonium</span></span>
                    <span class="word-group genitive" data-order="02-09"><span class="word-order">9</span><span class="latin-word">Silii</span></span>
                    <span class="word-group verb" data-order="02-07"><span class="word-order">7</span><span class="latin-word">vidit</span></span>
                    <span class="word-group subject style-highlight" data-order="02-02" data-style-feature="tricolon"><span class="word-order">2</span><span class="latin-word">populus</span></span>
                    <span class="word-group conjunction style-highlight" data-order="02-03" data-style-feature="tricolon"><span class="word-order">3</span><span class="latin-word">et</span></span>
                    <span class="word-group subject style-highlight" data-order="02-04" data-style-feature="tricolon"><span class="word-order">4</span><span class="latin-word">senatus</span></span>
                    <span class="word-group conjunction style-highlight" data-order="02-05" data-style-feature="tricolon"><span class="word-order">5</span><span class="latin-word">et</span></span>
                    <span class="word-group subject style-highlight" data-order="02-06" data-style-feature="tricolon"><span class="word-order">6</span><span class="latin-word">milites;</span></span>
                </div>
            </div>

            <!-- Sentence 3: ac nisi celeriter agis, tenet urbem maritus.' -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="03-01"><span class="word-order">1</span><span class="latin-word">ac</span></span>
                    <span class="word-group conjunction" data-order="03-02"><span class="word-order">2</span><span class="latin-word">nisi</span></span>
                    <span class="word-group adverb" data-order="03-04"><span class="word-order">4</span><span class="latin-word">celeriter</span></span>
                    <span class="word-group verb" data-order="03-03"><span class="word-order">3</span><span class="latin-word">agis,</span></span>
                    <span class="word-group verb style-highlight" data-order="03-06" data-style-feature="historic-present"><span class="word-order">6</span><span class="latin-word">tenet</span></span>
                    <span class="word-group object" data-order="03-07"><span class="word-order">7</span><span class="latin-word">urbem</span></span>
                    <span class="word-group subject style-highlight" data-order="03-05" data-style-feature="maritus"><span class="word-order">5</span><span class="latin-word">maritus.'</span></span>
                </div>
            </div>

            <!-- Sentence 4: non solum rumor interea, sed undique nuntii ad Messalinam contendunt, qui Claudium omnia cognovisse et venire promptum ultioni adferrent. -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="04-02"><span class="word-order">2</span><span class="latin-word">non</span></span>
                    <span class="word-group conjunction" data-order="04-02b"><span class="word-order"></span><span class="latin-word">solum</span></span>
                    <span class="word-group subject" data-order="04-03"><span class="word-order">3</span><span class="latin-word">rumor</span></span>
                    <span class="word-group adverb" data-order="04-01"><span class="word-order">1</span><span class="latin-word">interea,</span></span>
                    <span class="word-group conjunction" data-order="04-04"><span class="word-order">4</span><span class="latin-word">sed</span></span>
                    <span class="word-group adverb" data-order="04-05"><span class="word-order">5</span><span class="latin-word">undique</span></span>
                    <span class="word-group subject" data-order="04-06"><span class="word-order">6</span><span class="latin-word">nuntii</span></span>
                    <span class="word-group preposition" data-order="04-07"><span class="word-order">7</span><span class="latin-word">ad</span></span>
                    <span class="word-group object" data-order="04-08"><span class="word-order">8</span><span class="latin-word">Messalinam</span></span>
                    <span class="word-group verb style-highlight" data-order="04-09" data-style-feature="historic-present"><span class="word-order">9</span><span class="latin-word">contendunt,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="4b">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group subject" data-order="04-10"><span class="word-order">10</span><span class="latin-word">qui</span></span>
                    <span class="word-group object" data-order="04-12"><span class="word-order">12</span><span class="latin-word">Claudium</span></span>
                    <span class="word-group object" data-order="04-14"><span class="word-order">14</span><span class="latin-word">omnia</span></span>
                    <span class="word-group verb" data-order="04-13"><span class="word-order">13</span><span class="latin-word">cognovisse</span></span>
                    <span class="word-group conjunction" data-order="04-15"><span class="word-order">15</span><span class="latin-word">et</span></span>
                    <span class="word-group verb" data-order="04-16"><span class="word-order">16</span><span class="latin-word">venire</span></span>
                    <span class="word-group object" data-order="04-17"><span class="word-order">17</span><span class="latin-word">promptum</span></span>
                    <span class="word-group dative" data-order="04-18"><span class="word-order">18</span><span class="latin-word">ultioni</span></span>
                    <span class="word-group verb" data-order="04-11"><span class="word-order">11</span><span class="latin-word">adferrent.</span></span>
                </div>
            </div>

            <!-- Sentence 5: igitur Messalina Lucullianos in hortos, Silius dissimulando metui ad forum digrediuntur. -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="05-01"><span class="word-order">1</span><span class="latin-word">igitur</span></span>
                    <span class="word-group subject style-highlight" data-order="05-02" data-style-feature="antithesis"><span class="word-order">2</span><span class="latin-word">Messalina</span></span>
                    <span class="word-group object" data-order="05-05"><span class="word-order">5</span><span class="latin-word">Lucullianos</span></span>
                    <span class="word-group preposition" data-order="05-04"><span class="word-order">4</span><span class="latin-word">in</span></span>
                    <span class="word-group object" data-order="05-06"><span class="word-order">6</span><span class="latin-word">hortos,</span></span>
                    <span class="word-group subject style-highlight" data-order="05-07" data-style-feature="antithesis"><span class="word-order">7</span><span class="latin-word">Silius</span></span>
                    <span class="word-group gerundive" data-order="05-10"><span class="word-order">10</span><span class="latin-word">dissimulando</span></span>
                    <span class="word-group object" data-order="05-11"><span class="word-order">11</span><span class="latin-word">metui</span></span>
                    <span class="word-group preposition" data-order="05-08"><span class="word-order">8</span><span class="latin-word">ad</span></span>
                    <span class="word-group object" data-order="05-09"><span class="word-order">9</span><span class="latin-word">forum</span></span>
                    <span class="word-group verb style-highlight" data-order="05-03" data-style-feature="historic-present antithesis"><span class="word-order">3</span><span class="latin-word">digrediuntur.</span></span>
                </div>
            </div>

            <!-- Sentence 6: illa tamen, quamquam res adversae consilium eximerent, ire obviam et aspici a marito statim constituit, quod saepe ei fuerat subsidium. -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group subject" data-order="06-01"><span class="word-order">1</span><span class="latin-word">illa</span></span>
                    <span class="word-group conjunction" data-order="06-02"><span class="word-order">2</span><span class="latin-word">tamen,</span></span>
                    <span class="word-group conjunction style-highlight" data-order="06-03" data-style-feature="concessive"><span class="word-order">3</span><span class="latin-word">quamquam</span></span>
                    <span class="word-group subject style-highlight" data-order="06-05" data-style-feature="concessive"><span class="word-order">5</span><span class="latin-word">res</span></span>
                    <span class="word-group subject style-highlight" data-order="06-04" data-style-feature="concessive"><span class="word-order">4</span><span class="latin-word">adversae</span></span>
                    <span class="word-group object style-highlight" data-order="06-07" data-style-feature="concessive"><span class="word-order">7</span><span class="latin-word">consilium</span></span>
                    <span class="word-group verb style-highlight" data-order="06-06" data-style-feature="concessive"><span class="word-order">6</span><span class="latin-word">eximerent,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="6b">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group verb" data-order="06-10"><span class="word-order">10</span><span class="latin-word">ire</span></span>
                    <span class="word-group adverb" data-order="06-11"><span class="word-order">11</span><span class="latin-word">obviam</span></span>
                    <span class="word-group conjunction" data-order="06-12"><span class="word-order">12</span><span class="latin-word">et</span></span>
                    <span class="word-group verb" data-order="06-13"><span class="word-order">13</span><span class="latin-word">aspici</span></span>
                    <span class="word-group preposition" data-order="06-14"><span class="word-order">14</span><span class="latin-word">a</span></span>
                    <span class="word-group ablative" data-order="06-15"><span class="word-order">15</span><span class="latin-word">marito</span></span>
                    <span class="word-group adverb" data-order="06-08"><span class="word-order">8</span><span class="latin-word">statim</span></span>
                    <span class="word-group verb" data-order="06-09"><span class="word-order">9</span><span class="latin-word">constituit,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="6c">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="06-16"><span class="word-order">16</span><span class="latin-word">quod</span></span>
                    <span class="word-group adverb" data-order="06-17"><span class="word-order">17</span><span class="latin-word">saepe</span></span>
                    <span class="word-group dative" data-order="06-18"><span class="word-order">18</span><span class="latin-word">ei</span></span>
                    <span class="word-group verb" data-order="06-19"><span class="word-order">19</span><span class="latin-word">fuerat</span></span>
                    <span class="word-group object" data-order="06-20"><span class="word-order">20</span><span class="latin-word">subsidium.</span></span>
                </div>
            </div>

            <!-- Sentence 7: misitque ut Britannicus et Octavia in complexum patris irent. -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group verb style-highlight" data-order="07-01" data-style-feature="manipulation"><span class="word-order">1</span><span class="latin-word">misitque</span></span>
                    <span class="word-group conjunction style-highlight" data-order="07-02" data-style-feature="manipulation"><span class="word-order">2</span><span class="latin-word">ut</span></span>
                    <span class="word-group subject style-highlight" data-order="07-03" data-style-feature="manipulation"><span class="word-order">3</span><span class="latin-word">Britannicus</span></span>
                    <span class="word-group conjunction style-highlight" data-order="07-04" data-style-feature="manipulation"><span class="word-order">4</span><span class="latin-word">et</span></span>
                    <span class="word-group subject style-highlight" data-order="07-05" data-style-feature="manipulation"><span class="word-order">5</span><span class="latin-word">Octavia</span></span>
                    <span class="word-group preposition style-highlight" data-order="07-07" data-style-feature="manipulation"><span class="word-order">7</span><span class="latin-word">in</span></span>
                    <span class="word-group object style-highlight" data-order="07-08" data-style-feature="manipulation"><span class="word-order">8</span><span class="latin-word">complexum</span></span>
                    <span class="word-group genitive style-highlight" data-order="07-09" data-style-feature="manipulation"><span class="word-order">9</span><span class="latin-word">patris</span></span>
                    <span class="word-group verb style-highlight" data-order="07-06" data-style-feature="manipulation"><span class="word-order">6</span><span class="latin-word">irent.</span></span>
                </div>
            </div>
        </div>

        <!-- ENGLISH COLUMN -->
        <div class="english-column">
            <div class="column-header">English</div>

            <!-- Sentence 1 English -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="01-01">"He</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="01-02">said:</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="01-03">'Do you know of</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="01-04">your</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="01-05">divorce?'"</span></span>
                </div>
            </div>

            <!-- Sentence 2 English -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="02-01">For</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="02-02">the people</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="02-03">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="02-04">the senate</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="02-05">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="02-06">the soldiers</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="02-07">saw</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="02-08">the marriage</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="02-09">of Silius;</span></span>
                </div>
            </div>

            <!-- Sentence 3 English -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="03-01">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="03-02">unless</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="03-03">you act</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="03-04">quickly,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="03-05">the husband</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="03-06">holds</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-07">the city.'"</span></span>
                </div>
            </div>

            <!-- Sentence 4 English -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="04-01">Meanwhile,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="04-02,04-02b">not only</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-03">rumour,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="04-04">but</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="04-05">from all sides</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-06">messengers</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="04-07">to</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-08">Messalina</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-09">rush,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="4b">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-10">who</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-11">reported that</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-12">Claudius</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-13">had learned</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-14">everything</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="04-15">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-16">was coming</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-17">ready</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="04-18">for vengeance.</span></span>
                </div>
            </div>

            <!-- Sentence 5 English -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="05-01">Therefore</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-02">Messalina</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-03">departs</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="05-04">to</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-05">the Lucullan</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-06">gardens,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-07">Silius</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="05-08">to</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-09">the forum,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word gerundive" data-order="05-10">to conceal</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-11">his fear.</span></span>
                </div>
            </div>

            <!-- Sentence 6 English -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="06-01">She,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="06-02">however,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="06-03">although</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="06-04">adverse</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="06-05">circumstances</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-06">were removing</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-07">her judgement,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="6b">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-08">immediately</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-09">decided</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-10">to go</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-11">to meet him</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="06-12">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-13">be seen</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="06-14">by</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-15">her husband,</span></span>
                </div>
            </div>

            <div class="line-row" data-line="6c">
                <span class="line-number"></span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="06-16">which</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-17">often</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="06-18">for her</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-19">had been</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-20">a help.</span></span>
                </div>
            </div>

            <!-- Sentence 7 English -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-01">And she sent orders</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="07-02">that</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="07-03">Britannicus</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="07-04">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="07-05">Octavia</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-06">should go</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="07-07">into</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="07-08">the embrace</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="07-09">of their father.</span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Style Panel -->
    <div class="style-panel">
        <div class="style-panel-header">
            <h3>Stylistic Features</h3>
        </div>
        <div class="style-list">
            <span class="style-tag" data-feature="discidiumne">Direct Speech — <em>discidiumne tuum novisti?</em></span>
            <span class="style-tag" data-feature="tricolon">Tricolon — <em>populus et senatus et milites</em></span>
            <span class="style-tag" data-feature="historic-present">Historic Present — <em>contendunt, digrediuntur</em></span>
            <span class="style-tag" data-feature="antithesis">Antithesis — <em>Messalina... Silius</em></span>
            <span class="style-tag" data-feature="concessive">Concessive Clause — <em>quamquam res adversae</em></span>
            <span class="style-tag" data-feature="manipulation">Emotional Manipulation — <em>Britannicus et Octavia</em></span>
            <span class="style-tag" data-feature="maritus">Loaded Vocabulary — <em>maritus</em></span>
        </div>

        <div class="style-analysis" id="analysis-discidiumne">
            <div class="style-analysis-title">Direct Speech — discidiumne tuum novisti?</div>
            <div class="style-analysis-lines">Line 1</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Narcissus speaks bluntly to the emperor. No soft preamble, no diplomatic circumlocution. He opens with <em>discidiumne</em> — "your divorce" — and the <em>-ne</em> question particle turns it into a direct challenge: "Do you know about your divorce?" The word <em>discidium</em> is a legal term. It's not gossip or rumour; it's a formal dissolution of marriage. Narcissus is telling Claudius that his marriage is already over, whether he knew it or not. The brutality is calculated — shock the emperor into action before he can retreat into denial.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "Narcissus's opening question, <em>discidiumne tuum novisti?</em>, employs a deliberately shocking directness. The legal term <em>discidium</em> (divorce) and the enclitic <em>-ne</em> force Claudius to confront the reality of his situation, preventing evasion through its blunt urgency."
            </div>
        </div>

        <div class="style-analysis" id="analysis-tricolon">
            <div class="style-analysis-title">Tricolon — populus et senatus et milites</div>
            <div class="style-analysis-lines">Line 2</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Three groups, three pillars of Roman power: the people, the senate, and the soldiers. Narcissus lists all three to show that the humiliation is total and universal. There's nowhere to hide. The polysyndeton (<em>et... et...</em>) hammers each group like individual nails in the coffin — it's not just one group, it's not two, it's <em>all three</em>. Every sector of Roman society has witnessed the marriage. Claudius's disgrace is complete and public.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The tricolon <em>populus et senatus et milites</em>, reinforced by polysyndeton, enumerates the three pillars of Roman power to emphasise the universality of the scandal. The accumulation demonstrates that Claudius's humiliation is total and publicly witnessed."
            </div>
        </div>

        <div class="style-analysis" id="analysis-historic-present">
            <div class="style-analysis-title">Historic Present — contendunt, digrediuntur</div>
            <div class="style-analysis-lines">Lines 4-5</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Tacitus switches to the present tense for past events: messengers "rush" (<em>contendunt</em>), Messalina and Silius "depart" (<em>digrediuntur</em>). This is the historic present — one of Tacitus's favourite tricks for creating cinematic urgency. Instead of describing events that happened in the past, he drops us into the middle of the action as if it's unfolding right now. We're not reading a history book; we're watching a thriller. The effect is breathless, immediate, and compelling.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The historic present tenses <em>contendunt</em> ('they rush') and <em>digrediuntur</em> ('they depart') create vivid immediacy, transforming historical narrative into something cinematic. Tacitus places the reader in the midst of the unfolding crisis."
            </div>
        </div>

        <div class="style-analysis" id="analysis-antithesis">
            <div class="style-analysis-title">Antithesis — Messalina... Silius</div>
            <div class="style-analysis-lines">Line 5</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> They scatter in opposite directions. Messalina flees to the Gardens of Lucullus; Silius goes to the forum. The antithesis is structural — the sentence splits them apart just as the crisis splits their conspiracy. Their partnership, which was bold enough to attempt a public marriage, fractures the moment real danger arrives. <em>Digrediuntur</em> literally means "they go apart." One verb, two separate destinies. The unity of their ambition dissolves into individual survival.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The antithetical structure — <em>Messalina Lucullianos in hortos, Silius... ad forum</em> — physically enacts the fragmentation of their conspiracy. The single verb <em>digrediuntur</em> ('they go apart') serving both subjects emphasises how the crisis dissolves their partnership."
            </div>
        </div>

        <div class="style-analysis" id="analysis-concessive">
            <div class="style-analysis-title">Concessive Clause — quamquam res adversae</div>
            <div class="style-analysis-lines">Line 6</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> "Although unfavourable circumstances were taking away time for deliberation..." Despite everything going wrong, Messalina's instinct is to manipulate. The concessive clause (<em>quamquam</em>) acknowledges the desperation of her position — circumstances are removing her ability to plan — and yet she still forms a strategy. The imperfect subjunctive <em>eximerent</em> suggests an ongoing process: her judgement is slipping away as events unfold, and yet she clings to her old playbook. It's both impressive and futile.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The concessive clause <em>quamquam res adversae consilium eximerent</em> acknowledges Messalina's desperation while the imperfect subjunctive conveys the ongoing erosion of her composure. Despite this, her immediate resort to manipulation reveals deeply ingrained cunning."
            </div>
        </div>

        <div class="style-analysis" id="analysis-manipulation">
            <div class="style-analysis-title">Emotional Manipulation — Britannicus et Octavia</div>
            <div class="style-analysis-lines">Line 7</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> The ultimate cynical move: using her own children as political pawns. <em>In complexum patris</em> — "into their father's embrace" — is a phrase dripping with emotional manipulation. She sends Britannicus and Octavia to soften Claudius's heart before she arrives herself. If the emperor is holding his children when their mother approaches, perhaps he won't order her death. It's brilliant, it's ruthless, and it tells you everything about Messalina: even facing destruction, she calculates. Even her children are instruments.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The purpose clause <em>ut Britannicus et Octavia in complexum patris irent</em> reveals Messalina's calculated deployment of her children as emotional weapons. The tender language of <em>complexum</em> ('embrace') masks a ruthless political manoeuvre, characterising her as manipulative to the very end."
            </div>
        </div>

        <div class="style-analysis" id="analysis-maritus">
            <div class="style-analysis-title">Loaded Vocabulary — maritus</div>
            <div class="style-analysis-lines">Line 3</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Narcissus doesn't say "Silius controls the city." He says "the <em>husband</em> controls the city." That one word — <em>maritus</em> — is devastating. It declares that Silius, not Claudius, now holds the title of husband. Claudius has been replaced. The word is placed emphatically at the end of the clause (<em>tenet urbem maritus</em>), landing like a punch. It's not just a political warning; it's a personal humiliation delivered with surgical precision.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The emphatic final position of <em>maritus</em> ('the husband') is devastating: Narcissus deliberately avoids naming Silius, instead using the title that should belong to Claudius. The word simultaneously conveys political threat and personal humiliation."
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let coloursHidden = false;
        const activeCategories = new Set();

        const wordOrders = [];
        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            if (group.dataset.order) {
                wordOrders.push(group.dataset.order);
            }
        });
        wordOrders.sort((a, b) => {
            const [lineA, numA] = a.split('-');
            const [lineB, numB] = b.split('-');
            if (lineA !== lineB) return parseInt(lineA) - parseInt(lineB);
            return parseInt(numA) - parseInt(numB);
        });

        function revealWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.add('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.add('revealed');
                    }
                }
            });
        }

        function hideWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.remove('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.remove('revealed');
                    }
                }
            });
        }

        function toggleWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup && latinGroup.classList.contains('revealed')) {
                hideWord(order);
            } else {
                revealWord(order);
            }
        }

        function stepForward() {
            if (currentStep < wordOrders.length) {
                revealWord(wordOrders[currentStep]);
                currentStep++;
            }
        }

        function stepBackward() {
            if (currentStep > 0) {
                currentStep--;
                hideWord(wordOrders[currentStep]);
            }
        }

        function toggleCategory(category) {
            const keyItem = document.querySelector(`.key-item[data-category="${category}"]`);

            if (activeCategories.has(category)) {
                activeCategories.delete(category);
                keyItem.classList.remove('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.remove('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.remove('highlighted');
                });
            } else {
                activeCategories.add(category);
                keyItem.classList.add('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.add('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.add('highlighted');
                });
            }
        }

        document.getElementById('showAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.latin-column .word-group').forEach(group => {
                if (group.dataset.order) {
                    revealWord(group.dataset.order);
                }
            });
            currentStep = wordOrders.length;
        });

        document.getElementById('hideAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.revealed').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.english-word').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.highlighted').forEach(el => {
                el.classList.remove('highlighted');
            });
            document.querySelectorAll('.key-item').forEach(el => {
                el.classList.remove('active');
            });
            activeCategories.clear();
            currentStep = 0;
        });

        document.getElementById('toggleColoursBtn').addEventListener('click', () => {
            coloursHidden = !coloursHidden;
            document.body.classList.toggle('hide-colours', coloursHidden);
            document.getElementById('toggleColoursBtn').textContent =
                coloursHidden ? 'Show Colours' : 'Hide Colours';
        });

        document.querySelectorAll('.key-item').forEach(item => {
            item.addEventListener('click', () => {
                toggleCategory(item.dataset.category);
            });
        });

        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            group.addEventListener('click', () => {
                if (group.dataset.order) {
                    toggleWord(group.dataset.order);
                }
            });
        });

        document.querySelectorAll('.english-word').forEach(word => {
            word.addEventListener('click', () => {
                if (word.dataset.order) {
                    const order = word.dataset.order.split(',')[0];
                    toggleWord(order);
                }
            });
        });

        document.querySelectorAll('.english-column .line-number').forEach(lineNum => {
            lineNum.style.cursor = 'pointer';
            lineNum.addEventListener('click', () => {
                const lineRow = lineNum.closest('.line-row');
                const lineOrders = [];
                lineRow.querySelectorAll('.english-word').forEach(word => {
                    if (word.dataset.order) {
                        word.dataset.order.split(',').forEach(order => {
                            if (!lineOrders.includes(order)) {
                                lineOrders.push(order);
                            }
                        });
                    }
                });

                const firstWord = lineRow.querySelector('.english-word');
                const isRevealed = firstWord && firstWord.classList.contains('revealed');

                lineOrders.forEach(order => {
                    if (isRevealed) {
                        hideWord(order);
                    } else {
                        revealWord(order);
                    }
                });
            });
        });

        document.getElementById('toggleStyleBtn').addEventListener('click', () => {
            document.body.classList.toggle('style-mode');
            const isStyleMode = document.body.classList.contains('style-mode');
            document.getElementById('toggleStyleBtn').textContent =
                isStyleMode ? 'Hide Style' : 'Style Notes';

            if (!isStyleMode) {
                document.querySelectorAll('.style-tag.active').forEach(tag => {
                    tag.classList.remove('active');
                });
                document.querySelectorAll('.style-analysis.active').forEach(analysis => {
                    analysis.classList.remove('active');
                });
                document.querySelectorAll('.active-style').forEach(el => {
                    el.classList.remove('active-style');
                });
            }
        });

        document.querySelectorAll('.style-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                const featureId = tag.dataset.feature;
                const isActive = tag.classList.contains('active');

                document.querySelectorAll('.style-tag.active').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.style-analysis.active').forEach(a => a.classList.remove('active'));
                document.querySelectorAll('.active-style').forEach(el => el.classList.remove('active-style'));

                if (!isActive) {
                    tag.classList.add('active');

                    const analysis = document.getElementById('analysis-' + featureId);
                    if (analysis) {
                        analysis.classList.add('active');
                    }

                    document.querySelectorAll('[data-style-feature]').forEach(el => {
                        const features = el.dataset.styleFeature.split(' ');
                        if (features.includes(featureId)) {
                            el.classList.add('active-style');
                        }
                    });
                }
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'ArrowRight' || e.code === 'ArrowDown' || e.code === 'PageDown' || e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                stepForward();
            }
            else if (e.code === 'ArrowLeft' || e.code === 'ArrowUp' || e.code === 'PageUp' || e.code === 'Backspace') {
                e.preventDefault();
                stepBackward();
            }
            else if (e.code === 'Escape' || e.code === 'KeyR') {
                document.getElementById('hideAllBtn').click();
            }
        });
    </script>
</body>
</html>