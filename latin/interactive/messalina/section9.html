<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messalina - Section 9</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #ffffff;
            color: #333;
            padding: 25px 45px;
            min-height: 100vh;
            margin: 0;
            font-size: 22px;
        }

        .header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-top: 2px;
        }

        .logo:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .title-area {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        h1 {
            color: #222;
            margin: 0;
            font-size: 1.6em;
            font-weight: 600;
        }

        .subtitle {
            font-size: 1em;
            color: #666;
            margin: 0;
        }

        /* Compact controls */
        .controls-area {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 4px;
        }

        .controls {
            display: flex;
            gap: 6px;
            justify-content: flex-end;
        }

        .controls button {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
            flex: 1;
            text-align: center;
        }

        .controls button:hover {
            background: rgba(0, 102, 255, 0.15);
            transform: translateY(-1px);
        }

        #showAllBtn {
            background: #0066ff;
            color: white;
        }

        #showAllBtn:hover {
            background: #0052cc;
        }

        #hideAllBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleColoursBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleStyleBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        body.style-mode #toggleStyleBtn {
            background: #0066ff;
            color: white;
        }

        /* Key - compact squares in header */
        .key {
            display: flex;
            gap: 6px;
        }

        .key-item {
            padding: 0.6rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            text-align: center;
            border: none;
            flex: 1;
        }

        .key-item:hover {
            transform: translateY(-1px);
            filter: brightness(0.95);
        }

        .key-item.active {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Main content area */
        .translation-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
        }

        .column-header {
            font-size: 0.9em;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-left: 55px;
        }

        /* Each line row */
        .line-row {
            display: flex;
            align-items: flex-end;
            margin-bottom: 14px;
            white-space: nowrap;
        }

        .line-number {
            color: #0066ff;
            font-weight: bold;
            min-width: 45px;
            margin-right: 10px;
            font-size: 1.15em;
            align-self: flex-end;
            padding-bottom: 4px;
        }

        .words-container {
            display: flex;
            align-items: flex-end;
            gap: 3px;
        }

        /* Word group with number above */
        .word-group {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .word-order {
            font-size: 0.65em;
            color: #888;
            margin-bottom: 4px;
            height: 1em;
            font-weight: 600;
        }

        .latin-word, .english-word {
            padding: 3px 7px;
            border-radius: 3px;
            font-size: 1em;
            transition: background-color 0.3s, opacity 0.3s;
            cursor: pointer;
        }

        .latin-word {
            background-color: transparent;
        }

        .english-word {
            opacity: 0;
        }

        .english-word.revealed {
            opacity: 1;
        }

        /* Colours */
        .subject .latin-word { background-color: #ffb3b3; }
        .english-word.subject { background-color: #ffb3b3; }

        .verb .latin-word { background-color: #b3e6ff; }
        .english-word.verb { background-color: #b3e6ff; }

        .object .latin-word { background-color: #b3ffcc; }
        .english-word.object { background-color: #b3ffcc; }

        .genitive .latin-word { background-color: #ffd9b3; }
        .english-word.genitive { background-color: #ffd9b3; }

        .dative .latin-word { background-color: #e6b3ff; }
        .english-word.dative { background-color: #e6b3ff; }

        .ablative .latin-word { background-color: #ffffb3; }
        .english-word.ablative { background-color: #ffffb3; }

        .preposition .latin-word { background-color: #ffb3e6; }
        .english-word.preposition { background-color: #ffb3e6; }

        .conjunction .latin-word { background-color: #d9ffb3; }
        .english-word.conjunction { background-color: #d9ffb3; }

        .adverb .latin-word { background-color: #ccb3ff; }
        .english-word.adverb { background-color: #ccb3ff; }

        .gerundive .latin-word { background-color: #ffcbb3; }
        .english-word.gerundive { background-color: #ffcbb3; }

        /* Highlighting */
        .subject.highlighted .latin-word { background-color: #ffb3b3 !important; }
        .english-word.subject.highlighted { background-color: #ffb3b3 !important; }
        .verb.highlighted .latin-word { background-color: #b3e6ff !important; }
        .english-word.verb.highlighted { background-color: #b3e6ff !important; }
        .object.highlighted .latin-word { background-color: #b3ffcc !important; }
        .english-word.object.highlighted { background-color: #b3ffcc !important; }
        .genitive.highlighted .latin-word { background-color: #ffd9b3 !important; }
        .english-word.genitive.highlighted { background-color: #ffd9b3 !important; }
        .dative.highlighted .latin-word { background-color: #e6b3ff !important; }
        .english-word.dative.highlighted { background-color: #e6b3ff !important; }
        .ablative.highlighted .latin-word { background-color: #ffffb3 !important; }
        .english-word.ablative.highlighted { background-color: #ffffb3 !important; }
        .preposition.highlighted .latin-word { background-color: #ffb3e6 !important; }
        .english-word.preposition.highlighted { background-color: #ffb3e6 !important; }
        .conjunction.highlighted .latin-word { background-color: #d9ffb3 !important; }
        .english-word.conjunction.highlighted { background-color: #d9ffb3 !important; }
        .adverb.highlighted .latin-word { background-color: #ccb3ff !important; }
        .english-word.adverb.highlighted { background-color: #ccb3ff !important; }
        .gerundive.highlighted .latin-word { background-color: #ffcbb3 !important; }
        .english-word.gerundive.highlighted { background-color: #ffcbb3 !important; }

        /* Hide colours mode */
        body.hide-colours .subject .latin-word,
        body.hide-colours .english-word.subject.revealed,
        body.hide-colours .verb .latin-word,
        body.hide-colours .english-word.verb.revealed,
        body.hide-colours .object .latin-word,
        body.hide-colours .english-word.object.revealed,
        body.hide-colours .genitive .latin-word,
        body.hide-colours .english-word.genitive.revealed,
        body.hide-colours .dative .latin-word,
        body.hide-colours .english-word.dative.revealed,
        body.hide-colours .ablative .latin-word,
        body.hide-colours .english-word.ablative.revealed,
        body.hide-colours .preposition .latin-word,
        body.hide-colours .english-word.preposition.revealed,
        body.hide-colours .conjunction .latin-word,
        body.hide-colours .english-word.conjunction.revealed,
        body.hide-colours .adverb .latin-word,
        body.hide-colours .english-word.adverb.revealed,
        body.hide-colours .gerundive .latin-word,
        body.hide-colours .english-word.gerundive.revealed {
            background-color: #e0e0e0;
        }

        /* Style Mode */
        .style-highlight {
            position: relative;
        }

        .style-highlight.active-style .latin-word {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Style panel at bottom */
        .style-panel {
            display: none;
            background: rgba(0, 102, 255, 0.03);
            border-top: 2px solid rgba(0, 102, 255, 0.15);
            padding: 18px 24px;
            margin-top: 20px;
        }

        body.style-mode .style-panel {
            display: block;
        }

        .style-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .style-panel h3 {
            margin: 0;
            color: #0066ff;
            font-size: 1rem;
            font-weight: 600;
        }

        .style-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .style-tag {
            padding: 8px 14px;
            background: white;
            border: 1px solid rgba(0, 102, 255, 0.25);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #333;
        }

        .style-tag:hover {
            border-color: #0066ff;
            background: rgba(0, 102, 255, 0.05);
        }

        .style-tag.active {
            background: #0066ff;
            color: white;
            border-color: #0066ff;
        }

        .style-tag em {
            font-style: italic;
        }

        .style-analysis {
            display: none;
            padding: 16px 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid rgba(0, 102, 255, 0.15);
        }

        .style-analysis.active {
            display: block;
        }

        .style-analysis-title {
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 6px;
            font-size: 1rem;
        }

        .style-analysis-lines {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .style-analysis-effect {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .style-analysis-effect strong {
            color: #0066ff;
        }

        .style-analysis-exam {
            padding-top: 12px;
            border-top: 1px dashed #ddd;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.5;
        }

        .style-analysis-exam strong {
            color: #333;
        }

        .style-analysis em {
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-top">
            <div class="header-left">
                <a href="https://www.classicalia.co.uk" class="logo">C</a>
                <div class="title-area">
                    <h1>Messalina</h1>
                    <p class="subtitle">Section 9 (Lines 79-89): Messalina is killed by the tribune</p>
                </div>
            </div>
            <div class="controls-area">
                <div class="controls">
                    <button id="showAllBtn">Show All</button>
                    <button id="hideAllBtn">Hide All</button>
                    <button id="toggleColoursBtn">Hide Colours</button>
                    <button id="toggleStyleBtn">Style Notes</button>
                </div>
                <div class="key">
                    <span class="key-item" data-category="subject" style="background-color: #ffb3b3;">Subj.</span>
                    <span class="key-item" data-category="object" style="background-color: #b3ffcc;">Obj.</span>
                    <span class="key-item" data-category="verb" style="background-color: #b3e6ff;">Verb</span>
                    <span class="key-item" data-category="genitive" style="background-color: #ffd9b3;">Gen.</span>
                    <span class="key-item" data-category="dative" style="background-color: #e6b3ff;">Dat.</span>
                    <span class="key-item" data-category="ablative" style="background-color: #ffffb3;">Abl.</span>
                    <span class="key-item" data-category="preposition" style="background-color: #ffb3e6;">Prep.</span>
                    <span class="key-item" data-category="conjunction" style="background-color: #d9ffb3;">Conj.</span>
                    <span class="key-item" data-category="adverb" style="background-color: #ccb3ff;">Adv.</span>
                    <span class="key-item" data-category="gerundive" style="background-color: #ffcbb3;">Gdv.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="translation-area">
        <!-- LATIN COLUMN -->
        <div class="latin-column">
            <div class="column-header">Latin</div>

            <!-- Sentence 1: adsidebat mater Lepida, quae florenti filiae haud concors fuerat; -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group verb" data-order="01-02"><span class="word-order">2</span><span class="latin-word">adsidebat</span></span>
                    <span class="word-group subject" data-order="01-01"><span class="word-order">1</span><span class="latin-word">mater</span></span>
                    <span class="word-group subject style-highlight" data-order="01-03" data-style-feature="florenti-supremis"><span class="word-order">3</span><span class="latin-word">Lepida,</span></span>
                    <span class="word-group subject" data-order="01-04"><span class="word-order">4</span><span class="latin-word">quae</span></span>
                    <span class="word-group dative style-highlight" data-order="01-07" data-style-feature="florenti-supremis"><span class="word-order">7</span><span class="latin-word">florenti</span></span>
                    <span class="word-group dative" data-order="01-06"><span class="word-order">6</span><span class="latin-word">filiae</span></span>
                    <span class="word-group adverb" data-order="01-08"><span class="word-order">8</span><span class="latin-word">haud</span></span>
                    <span class="word-group adverb" data-order="01-05"><span class="word-order">5</span><span class="latin-word">concors</span></span>
                    <span class="word-group verb" data-order="01-09"><span class="word-order">9</span><span class="latin-word">fuerat;</span></span>
                </div>
            </div>

            <!-- Sentence 2: sed supremis eius necessitatibus ad miserationem versa suadebat ne percussorem opperiretur: -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="02-01"><span class="word-order">1</span><span class="latin-word">sed</span></span>
                    <span class="word-group ablative style-highlight" data-order="02-04" data-style-feature="florenti-supremis"><span class="word-order">4</span><span class="latin-word">supremis</span></span>
                    <span class="word-group genitive" data-order="02-05"><span class="word-order">5</span><span class="latin-word">eius</span></span>
                    <span class="word-group ablative style-highlight" data-order="02-06" data-style-feature="florenti-supremis"><span class="word-order">6</span><span class="latin-word">necessitatibus</span></span>
                    <span class="word-group preposition" data-order="02-07"><span class="word-order">7</span><span class="latin-word">ad</span></span>
                    <span class="word-group object" data-order="02-08"><span class="word-order">8</span><span class="latin-word">miserationem</span></span>
                    <span class="word-group verb" data-order="02-02"><span class="word-order">2</span><span class="latin-word">versa</span></span>
                    <span class="word-group verb" data-order="02-03"><span class="word-order">3</span><span class="latin-word">suadebat</span></span>
                    <span class="word-group conjunction" data-order="02-09"><span class="word-order">9</span><span class="latin-word">ne</span></span>
                    <span class="word-group object" data-order="02-11"><span class="word-order">11</span><span class="latin-word">percussorem</span></span>
                    <span class="word-group verb" data-order="02-10"><span class="word-order">10</span><span class="latin-word">opperiretur:</span></span>
                </div>
            </div>

            <!-- Sentence 3: transiisse vitam neque aliud quam mortem decoram quaerendum. -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group verb" data-order="03-02"><span class="word-order">2</span><span class="latin-word">transiisse</span></span>
                    <span class="word-group object" data-order="03-01"><span class="word-order">1</span><span class="latin-word">vitam</span></span>
                    <span class="word-group conjunction" data-order="03-03"><span class="word-order">3</span><span class="latin-word">neque</span></span>
                    <span class="word-group object" data-order="03-05"><span class="word-order">5</span><span class="latin-word">aliud</span></span>
                    <span class="word-group conjunction" data-order="03-06"><span class="word-order">6</span><span class="latin-word">quam</span></span>
                    <span class="word-group object style-highlight" data-order="03-07" data-style-feature="mortem-decoram"><span class="word-order">7</span><span class="latin-word">mortem</span></span>
                    <span class="word-group object style-highlight" data-order="03-08" data-style-feature="mortem-decoram"><span class="word-order">8</span><span class="latin-word">decoram</span></span>
                    <span class="word-group gerundive" data-order="03-04"><span class="word-order">4</span><span class="latin-word">quaerendum.</span></span>
                </div>
            </div>

            <!-- Sentence 4: sed nihil honestum inerat Messalinae animo per libidines corrupto; -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="04-01"><span class="word-order">1</span><span class="latin-word">sed</span></span>
                    <span class="word-group subject style-highlight" data-order="04-03" data-style-feature="nihil-honestum"><span class="word-order">3</span><span class="latin-word">nihil</span></span>
                    <span class="word-group subject style-highlight" data-order="04-04" data-style-feature="nihil-honestum"><span class="word-order">4</span><span class="latin-word">honestum</span></span>
                    <span class="word-group verb style-highlight" data-order="04-02" data-style-feature="nihil-honestum"><span class="word-order">2</span><span class="latin-word">inerat</span></span>
                    <span class="word-group genitive" data-order="04-06"><span class="word-order">6</span><span class="latin-word">Messalinae</span></span>
                    <span class="word-group dative" data-order="04-05"><span class="word-order">5</span><span class="latin-word">animo</span></span>
                    <span class="word-group preposition" data-order="04-07"><span class="word-order">7</span><span class="latin-word">per</span></span>
                    <span class="word-group object" data-order="04-08"><span class="word-order">8</span><span class="latin-word">libidines</span></span>
                    <span class="word-group verb" data-order="04-09"><span class="word-order">9</span><span class="latin-word">corrupto;</span></span>
                </div>
            </div>

            <!-- Sentence 5: lacrimae et questus inriti effundebantur, cum impetu venientium pulsae sunt fores adstititque tribunus. -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group subject" data-order="05-01"><span class="word-order">1</span><span class="latin-word">lacrimae</span></span>
                    <span class="word-group conjunction" data-order="05-02"><span class="word-order">2</span><span class="latin-word">et</span></span>
                    <span class="word-group subject" data-order="05-03"><span class="word-order">3</span><span class="latin-word">questus</span></span>
                    <span class="word-group subject" data-order="05-04"><span class="word-order">4</span><span class="latin-word">inriti</span></span>
                    <span class="word-group verb" data-order="05-05"><span class="word-order">5</span><span class="latin-word">effundebantur,</span></span>
                    <span class="word-group conjunction" data-order="05-06"><span class="word-order">6</span><span class="latin-word">cum</span></span>
                    <span class="word-group ablative" data-order="05-08"><span class="word-order">8</span><span class="latin-word">impetu</span></span>
                    <span class="word-group genitive" data-order="05-09"><span class="word-order">9</span><span class="latin-word">venientium</span></span>
                    <span class="word-group verb" data-order="05-07"><span class="word-order">7</span><span class="latin-word">pulsae sunt</span></span>
                    <span class="word-group subject" data-order="05-10"><span class="word-order">10</span><span class="latin-word">fores</span></span>
                    <span class="word-group verb" data-order="05-11"><span class="word-order">11</span><span class="latin-word">adstititque</span></span>
                    <span class="word-group subject" data-order="05-12"><span class="word-order">12</span><span class="latin-word">tribunus.</span></span>
                </div>
            </div>

            <!-- Sentence 6: tunc primum Messalina fortunam suam intellexit ferrumque accepit; -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group adverb" data-order="06-01"><span class="word-order">1</span><span class="latin-word">tunc</span></span>
                    <span class="word-group adverb" data-order="06-02"><span class="word-order">2</span><span class="latin-word">primum</span></span>
                    <span class="word-group subject" data-order="06-03"><span class="word-order">3</span><span class="latin-word">Messalina</span></span>
                    <span class="word-group object" data-order="06-05"><span class="word-order">5</span><span class="latin-word">fortunam</span></span>
                    <span class="word-group genitive" data-order="06-06"><span class="word-order">6</span><span class="latin-word">suam</span></span>
                    <span class="word-group verb" data-order="06-04"><span class="word-order">4</span><span class="latin-word">intellexit</span></span>
                    <span class="word-group object" data-order="06-07"><span class="word-order">7</span><span class="latin-word">ferrumque</span></span>
                    <span class="word-group verb" data-order="06-08"><span class="word-order">8</span><span class="latin-word">accepit;</span></span>
                </div>
            </div>

            <!-- Sentence 7: quod frustra iugulo aut pectori per trepidationem admovens, ictu tribuni transigitur. -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group object" data-order="07-01"><span class="word-order">1</span><span class="latin-word">quod</span></span>
                    <span class="word-group adverb" data-order="07-03"><span class="word-order">3</span><span class="latin-word">frustra</span></span>
                    <span class="word-group dative style-highlight" data-order="07-04" data-style-feature="frustra-admovens"><span class="word-order">4</span><span class="latin-word">iugulo</span></span>
                    <span class="word-group conjunction" data-order="07-05"><span class="word-order">5</span><span class="latin-word">aut</span></span>
                    <span class="word-group dative style-highlight" data-order="07-06" data-style-feature="frustra-admovens"><span class="word-order">6</span><span class="latin-word">pectori</span></span>
                    <span class="word-group preposition" data-order="07-07"><span class="word-order">7</span><span class="latin-word">per</span></span>
                    <span class="word-group object" data-order="07-08"><span class="word-order">8</span><span class="latin-word">trepidationem</span></span>
                    <span class="word-group verb style-highlight" data-order="07-02" data-style-feature="frustra-admovens"><span class="word-order">2</span><span class="latin-word">admovens,</span></span>
                    <span class="word-group ablative" data-order="07-09"><span class="word-order">9</span><span class="latin-word">ictu</span></span>
                    <span class="word-group genitive" data-order="07-10"><span class="word-order">10</span><span class="latin-word">tribuni</span></span>
                    <span class="word-group verb style-highlight" data-order="07-11" data-style-feature="transigitur"><span class="word-order">11</span><span class="latin-word">transigitur.</span></span>
                </div>
            </div>

            <!-- Sentence 8: corpus matri concessum. -->
            <div class="line-row" data-line="8">
                <span class="line-number">8</span>
                <div class="words-container">
                    <span class="word-group subject style-highlight" data-order="08-01" data-style-feature="corpus-matri"><span class="word-order">1</span><span class="latin-word">corpus</span></span>
                    <span class="word-group dative style-highlight" data-order="08-03" data-style-feature="corpus-matri"><span class="word-order">3</span><span class="latin-word">matri</span></span>
                    <span class="word-group verb style-highlight" data-order="08-02" data-style-feature="corpus-matri"><span class="word-order">2</span><span class="latin-word">concessum.</span></span>
                </div>
            </div>
        </div>

        <!-- ENGLISH COLUMN -->
        <div class="english-column">
            <div class="column-header">English</div>

            <!-- Sentence 1 English -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="01-01">(her) mother</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="01-02">Sitting beside (her) was</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="01-03">Lepida,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="01-04">who</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="01-05">in harmony</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="01-06">with her daughter</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="01-07">(when she was) flourishing,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="01-08">not</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="01-09">had been;</span></span>
                </div>
            </div>

            <!-- Sentence 2 English -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="02-01">but</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="02-02">having turned</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="02-03">she advised (her)</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="02-04">(her) final</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="02-05">(hours of)</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="02-06">need,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="02-07">to</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="02-08">pity,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="02-09">not</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="02-10">to wait for</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="02-11">an assassin:</span></span>
                </div>
            </div>

            <!-- Sentence 3 English -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-01">her life</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="03-02">was past</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="03-03">and ... not</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word gerundive" data-order="03-04">she should seek</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-05">anything other</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="03-06">than</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-07">a ... death.</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-08">noble</span></span>
                </div>
            </div>

            <!-- Sentence 4 English -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="04-01">But</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-02">there was</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-03">nothing</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-04">honourable</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="04-05">in ... mind,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="04-06">Messalina's</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="04-07">by</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-08">(her) lusts;</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="04-09">which was corrupted</span></span>
                </div>
            </div>

            <!-- Sentence 5 English -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-01">tears</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="05-02">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-03">complaints</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-04">futile</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-05">were pouring forth,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="05-06">when</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-07">were struck</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="05-08">by the force</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="05-09">of those arriving</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-10">the doors</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-11">and ... stood nearby.</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-12">the tribune</span></span>
                </div>
            </div>

            <!-- Sentence 6 English -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-01">Then</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-02">for the first time</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="06-03">Messalina</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-04">recognised</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-05">her fate</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="06-06">her</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-07">the sword;</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-08">and took up</span></span>
                </div>
            </div>

            <!-- Sentence 7 English -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="07-01">(this)</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-02">applying</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="07-03">in vain</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="07-04">to her throat</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="07-05">or</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="07-06">chest</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="07-07">because of</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="07-08">her panic,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="07-09">by the blow</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="07-10">of the tribune.</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-11">she was pierced</span></span>
                </div>
            </div>

            <!-- Sentence 8 English -->
            <div class="line-row" data-line="8">
                <span class="line-number">8</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="08-01">The body</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="08-02">was granted</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="08-03">to the mother.</span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Style Panel -->
    <div class="style-panel">
        <div class="style-panel-header">
            <h3>Stylistic Features</h3>
        </div>
        <div class="style-list">
            <span class="style-tag" data-feature="florenti-supremis">Antithesis — <em>florenti... supremis necessitatibus</em></span>
            <span class="style-tag" data-feature="mortem-decoram">Stoic Exhortation — <em>mortem decoram quaerendum</em></span>
            <span class="style-tag" data-feature="nihil-honestum">Moral Judgement — <em>nihil honestum inerat... animo per libidines corrupto</em></span>
            <span class="style-tag" data-feature="frustra-admovens">Dramatic Irony — <em>frustra iugulo aut pectori admovens</em></span>
            <span class="style-tag" data-feature="transigitur">Passive Voice — <em>transigitur</em></span>
            <span class="style-tag" data-feature="corpus-matri">Brevity — <em>corpus matri concessum</em></span>
        </div>

        <div class="style-analysis" id="analysis-florenti-supremis">
            <div class="style-analysis-title">Antithesis — florenti... supremis necessitatibus</div>
            <div class="style-analysis-lines">Lines 1-2</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Tacitus sets up a devastating contrast between Messalina's past and present. <em>Florenti</em> ("flourishing") — that was Messalina in her prime, powerful, dangerous, untouchable. Now? <em>Supremis necessitatibus</em> ("final hours of need"). The woman who once made emperors tremble is now the one trembling. Her mother Lepida kept her distance during the glory days ("haud concors"), but now, when everything has collapsed, she returns. The antithesis isn't just about Messalina — it's about how power distorts every relationship, even between mother and daughter.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The antithesis between <em>florenti</em> ('flourishing') and <em>supremis necessitatibus</em> ('final crisis') sharply contrasts Messalina's former power with her current desperation, while Lepida's changed attitude underscores how Messalina's fall has transformed all relationships around her."
            </div>
        </div>

        <div class="style-analysis" id="analysis-mortem-decoram">
            <div class="style-analysis-title">Stoic Exhortation — mortem decoram quaerendum</div>
            <div class="style-analysis-lines">Line 3</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Lepida's advice echoes centuries of Roman Stoic philosophy: when life is over, seek a noble death. <em>Transiisse vitam</em> — "life has passed." It's done. No appeals, no escape, no miracles. The only question left is <em>how</em> to die. And Lepida's answer is clear: <em>mortem decoram</em> — a death that befits your station. In Roman thinking, suicide before execution wasn't cowardice; it was the ultimate act of self-mastery. Lepida is offering her daughter the one thing left worth having: dignity in death.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "Lepida's counsel to seek <em>mortem decoram</em> ('a noble death') reflects the Roman Stoic ideal that dying with dignity could partially redeem a dishonourable life, offering Messalina a final opportunity to exercise moral agency."
            </div>
        </div>

        <div class="style-analysis" id="analysis-nihil-honestum">
            <div class="style-analysis-title">Moral Judgement — nihil honestum inerat... animo per libidines corrupto</div>
            <div class="style-analysis-lines">Line 4</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> This is Tacitus at his most brutal. <em>Nihil honestum inerat</em> — "nothing honourable was in her." Not "little honour" or "fading honour" — <em>nothing</em>. Zero. The verdict is absolute. And then the reason: <em>animo per libidines corrupto</em> — her mind was corrupted by her lusts. The <em>per</em> makes her lusts the active agent of destruction. She didn't just have vices; they consumed her, ate away every trace of honour until there was nothing left. She can't die nobly because she can't <em>be</em> noble. Her mother's advice falls on barren ground.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "Tacitus's devastating judgement — <em>nihil honestum inerat</em> ('nothing honourable was within') — delivers an absolute moral verdict. The phrase <em>per libidines corrupto</em> identifies her lusts as the causal agent of her spiritual destruction, rendering her incapable of the <em>mors decora</em> her mother urged."
            </div>
        </div>

        <div class="style-analysis" id="analysis-frustra-admovens">
            <div class="style-analysis-title">Dramatic Irony — frustra iugulo aut pectori admovens</div>
            <div class="style-analysis-lines">Line 7</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> She can't even kill herself properly. <em>Frustra</em> — "in vain." The sword moves towards her throat, towards her chest, but her hands shake too much (<em>per trepidationem</em> — "because of her panic"). The irony is excruciating: the woman who boldly committed treason, bigamy, and countless acts of ruthless scheming cannot summon the courage for one clean stroke. <em>Iugulo aut pectori</em> — throat or chest — these are the proper spots for an honourable Roman suicide. She knows what to do. She just can't do it. Her trepidation prevents the dignified end her mother advised.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The phrase <em>frustra iugulo aut pectori... admovens</em> creates dramatic irony: Messalina, so bold in her crimes, is paralysed by <em>trepidatio</em> when attempting the honourable self-death that would have redeemed her, exposing the gap between her former audacity and her moral cowardice."
            </div>
        </div>

        <div class="style-analysis" id="analysis-transigitur">
            <div class="style-analysis-title">Passive Voice — transigitur</div>
            <div class="style-analysis-lines">Line 7</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> "She was pierced." Passive voice. Not "she killed herself" or even "the tribune killed her" — just <em>transigitur</em>, she is pierced, she is run through. At this final moment, Messalina is no longer the subject of her own story. She's no longer the agent who acts — she's the object that receives the action. A woman who commanded empires, manipulated an emperor, and terrified the Roman elite is now reduced to a body receiving a blow. The passive is Tacitus's stylistic coup de grace before the literal one.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The passive voice <em>transigitur</em> ('she was pierced') strips Messalina of all agency in her final moment. Having failed to act as subject of her own death, she becomes the grammatical and literal object of another's action — a devastating structural reflection of her complete loss of power."
            </div>
        </div>

        <div class="style-analysis" id="analysis-corpus-matri">
            <div class="style-analysis-title">Brevity — corpus matri concessum</div>
            <div class="style-analysis-lines">Line 8</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Three words to end a life. <em>Corpus matri concessum.</em> The body was granted to the mother. That's it. No funeral oration, no mourning, no dramatic final words. Just a body, a mother, and a bureaucratic verb. <em>Corpus</em> — not "Messalina" or even "her" but "the body." She's already been reduced from a person to a thing. <em>Concessum</em> — "granted," as though returning a piece of property. The stark, minimal final sentence is devastating in its economy — no emotion, just disposal.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The three-word conclusion <em>corpus matri concessum</em> achieves devastating effect through extreme brevity. The reduction from <em>Messalina</em> to <em>corpus</em> ('body') completes her dehumanisation, while the impersonal <em>concessum</em> ('granted') treats her remains as mere administrative business — a stark, emotionless coda to an empress's life."
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let coloursHidden = false;
        const activeCategories = new Set();

        const wordOrders = [];
        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            if (group.dataset.order) {
                wordOrders.push(group.dataset.order);
            }
        });
        wordOrders.sort((a, b) => {
            const [lineA, numA] = a.split('-');
            const [lineB, numB] = b.split('-');
            if (lineA !== lineB) return parseInt(lineA) - parseInt(lineB);
            return parseInt(numA) - parseInt(numB);
        });

        function revealWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.add('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.add('revealed');
                    }
                }
            });
        }

        function hideWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.remove('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.remove('revealed');
                    }
                }
            });
        }

        function toggleWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup && latinGroup.classList.contains('revealed')) {
                hideWord(order);
            } else {
                revealWord(order);
            }
        }

        function stepForward() {
            if (currentStep < wordOrders.length) {
                revealWord(wordOrders[currentStep]);
                currentStep++;
            }
        }

        function stepBackward() {
            if (currentStep > 0) {
                currentStep--;
                hideWord(wordOrders[currentStep]);
            }
        }

        function toggleCategory(category) {
            const keyItem = document.querySelector(`.key-item[data-category="${category}"]`);

            if (activeCategories.has(category)) {
                activeCategories.delete(category);
                keyItem.classList.remove('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.remove('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.remove('highlighted');
                });
            } else {
                activeCategories.add(category);
                keyItem.classList.add('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.add('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.add('highlighted');
                });
            }
        }

        document.getElementById('showAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.latin-column .word-group').forEach(group => {
                if (group.dataset.order) {
                    revealWord(group.dataset.order);
                }
            });
            currentStep = wordOrders.length;
        });

        document.getElementById('hideAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.revealed').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.english-word').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.highlighted').forEach(el => {
                el.classList.remove('highlighted');
            });
            document.querySelectorAll('.key-item').forEach(el => {
                el.classList.remove('active');
            });
            activeCategories.clear();
            currentStep = 0;
        });

        document.getElementById('toggleColoursBtn').addEventListener('click', () => {
            coloursHidden = !coloursHidden;
            document.body.classList.toggle('hide-colours', coloursHidden);
            document.getElementById('toggleColoursBtn').textContent =
                coloursHidden ? 'Show Colours' : 'Hide Colours';
        });

        document.querySelectorAll('.key-item').forEach(item => {
            item.addEventListener('click', () => {
                toggleCategory(item.dataset.category);
            });
        });

        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            group.addEventListener('click', () => {
                if (group.dataset.order) {
                    toggleWord(group.dataset.order);
                }
            });
        });

        document.querySelectorAll('.english-word').forEach(word => {
            word.addEventListener('click', () => {
                if (word.dataset.order) {
                    const order = word.dataset.order.split(',')[0];
                    toggleWord(order);
                }
            });
        });

        document.querySelectorAll('.english-column .line-number').forEach(lineNum => {
            lineNum.style.cursor = 'pointer';
            lineNum.addEventListener('click', () => {
                const lineRow = lineNum.closest('.line-row');
                const lineOrders = [];
                lineRow.querySelectorAll('.english-word').forEach(word => {
                    if (word.dataset.order) {
                        word.dataset.order.split(',').forEach(order => {
                            if (!lineOrders.includes(order)) {
                                lineOrders.push(order);
                            }
                        });
                    }
                });

                const firstWord = lineRow.querySelector('.english-word');
                const isRevealed = firstWord && firstWord.classList.contains('revealed');

                lineOrders.forEach(order => {
                    if (isRevealed) {
                        hideWord(order);
                    } else {
                        revealWord(order);
                    }
                });
            });
        });

        document.getElementById('toggleStyleBtn').addEventListener('click', () => {
            document.body.classList.toggle('style-mode');
            const isStyleMode = document.body.classList.contains('style-mode');
            document.getElementById('toggleStyleBtn').textContent =
                isStyleMode ? 'Hide Style' : 'Style Notes';

            if (!isStyleMode) {
                document.querySelectorAll('.style-tag.active').forEach(tag => {
                    tag.classList.remove('active');
                });
                document.querySelectorAll('.style-analysis.active').forEach(analysis => {
                    analysis.classList.remove('active');
                });
                document.querySelectorAll('.active-style').forEach(el => {
                    el.classList.remove('active-style');
                });
            }
        });

        document.querySelectorAll('.style-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                const featureId = tag.dataset.feature;
                const isActive = tag.classList.contains('active');

                document.querySelectorAll('.style-tag.active').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.style-analysis.active').forEach(a => a.classList.remove('active'));
                document.querySelectorAll('.active-style').forEach(el => el.classList.remove('active-style'));

                if (!isActive) {
                    tag.classList.add('active');

                    const analysis = document.getElementById('analysis-' + featureId);
                    if (analysis) {
                        analysis.classList.add('active');
                    }

                    document.querySelectorAll('[data-style-feature]').forEach(el => {
                        const features = el.dataset.styleFeature.split(' ');
                        if (features.includes(featureId)) {
                            el.classList.add('active-style');
                        }
                    });
                }
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'ArrowRight' || e.code === 'ArrowDown' || e.code === 'PageDown' || e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                stepForward();
            }
            else if (e.code === 'ArrowLeft' || e.code === 'ArrowUp' || e.code === 'PageUp' || e.code === 'Backspace') {
                e.preventDefault();
                stepBackward();
            }
            else if (e.code === 'Escape' || e.code === 'KeyR') {
                document.getElementById('hideAllBtn').click();
            }
        });
    </script>
</body>
</html>