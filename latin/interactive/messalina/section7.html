<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messalina - Section 7</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #ffffff;
            color: #333;
            padding: 25px 45px;
            min-height: 100vh;
            margin: 0;
            font-size: 22px;
        }

        .header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-top: 2px;
        }

        .logo:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .title-area {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        h1 {
            color: #222;
            margin: 0;
            font-size: 1.6em;
            font-weight: 600;
        }

        .subtitle {
            font-size: 1em;
            color: #666;
            margin: 0;
        }

        /* Compact controls */
        .controls-area {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 4px;
        }

        .controls {
            display: flex;
            gap: 6px;
            justify-content: flex-end;
        }

        .controls button {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
            flex: 1;
            text-align: center;
        }

        .controls button:hover {
            background: rgba(0, 102, 255, 0.15);
            transform: translateY(-1px);
        }

        #showAllBtn {
            background: #0066ff;
            color: white;
        }

        #showAllBtn:hover {
            background: #0052cc;
        }

        #hideAllBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleColoursBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        #toggleStyleBtn {
            background: rgba(0, 102, 255, 0.08);
            color: #0066ff;
        }

        body.style-mode #toggleStyleBtn {
            background: #0066ff;
            color: white;
        }

        /* Key - compact squares in header */
        .key {
            display: flex;
            gap: 6px;
        }

        .key-item {
            padding: 0.6rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            text-align: center;
            border: none;
            flex: 1;
        }

        .key-item:hover {
            transform: translateY(-1px);
            filter: brightness(0.95);
        }

        .key-item.active {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Main content area */
        .translation-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
        }

        .column-header {
            font-size: 0.9em;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-left: 0;
        }

        /* Each line row */
        .line-row {
            display: flex;
            align-items: flex-end;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .line-number {
            display: none;
            color: #0066ff;
            font-weight: bold;
            min-width: 45px;
            margin-right: 10px;
            font-size: 1.15em;
            align-self: flex-end;
            padding-bottom: 4px;
        }

        .words-container {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            flex-wrap: wrap;
        }

        /* Word group with number above */
        .word-group {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .word-order {
            font-size: 0.65em;
            color: #888;
            margin-bottom: 4px;
            height: 1em;
            font-weight: 600;
        }

        .latin-word, .english-word {
            padding: 3px 7px;
            border-radius: 3px;
            font-size: 1em;
            transition: background-color 0.3s, opacity 0.3s;
            cursor: pointer;
        }

        .latin-word {
            background-color: transparent;
        }

        .english-word {
            opacity: 0;
        }

        .english-word.revealed {
            opacity: 1;
        }

        /* Colours */
        .subject .latin-word { background-color: #ffb3b3; }
        .english-word.subject { background-color: #ffb3b3; }

        .verb .latin-word { background-color: #b3e6ff; }
        .english-word.verb { background-color: #b3e6ff; }

        .object .latin-word { background-color: #b3ffcc; }
        .english-word.object { background-color: #b3ffcc; }

        .genitive .latin-word { background-color: #ffd9b3; }
        .english-word.genitive { background-color: #ffd9b3; }

        .dative .latin-word { background-color: #e6b3ff; }
        .english-word.dative { background-color: #e6b3ff; }

        .ablative .latin-word { background-color: #ffffb3; }
        .english-word.ablative { background-color: #ffffb3; }

        .preposition .latin-word { background-color: #ffb3e6; }
        .english-word.preposition { background-color: #ffb3e6; }

        .conjunction .latin-word { background-color: #d9ffb3; }
        .english-word.conjunction { background-color: #d9ffb3; }

        .adverb .latin-word { background-color: #ccb3ff; }
        .english-word.adverb { background-color: #ccb3ff; }

        .gerundive .latin-word { background-color: #ffcbb3; }
        .english-word.gerundive { background-color: #ffcbb3; }

        /* Highlighting */
        .subject.highlighted .latin-word { background-color: #ffb3b3 !important; }
        .english-word.subject.highlighted { background-color: #ffb3b3 !important; }
        .verb.highlighted .latin-word { background-color: #b3e6ff !important; }
        .english-word.verb.highlighted { background-color: #b3e6ff !important; }
        .object.highlighted .latin-word { background-color: #b3ffcc !important; }
        .english-word.object.highlighted { background-color: #b3ffcc !important; }
        .genitive.highlighted .latin-word { background-color: #ffd9b3 !important; }
        .english-word.genitive.highlighted { background-color: #ffd9b3 !important; }
        .dative.highlighted .latin-word { background-color: #e6b3ff !important; }
        .english-word.dative.highlighted { background-color: #e6b3ff !important; }
        .ablative.highlighted .latin-word { background-color: #ffffb3 !important; }
        .english-word.ablative.highlighted { background-color: #ffffb3 !important; }
        .preposition.highlighted .latin-word { background-color: #ffb3e6 !important; }
        .english-word.preposition.highlighted { background-color: #ffb3e6 !important; }
        .conjunction.highlighted .latin-word { background-color: #d9ffb3 !important; }
        .english-word.conjunction.highlighted { background-color: #d9ffb3 !important; }
        .adverb.highlighted .latin-word { background-color: #ccb3ff !important; }
        .english-word.adverb.highlighted { background-color: #ccb3ff !important; }
        .gerundive.highlighted .latin-word { background-color: #ffcbb3 !important; }
        .english-word.gerundive.highlighted { background-color: #ffcbb3 !important; }

        /* Hide colours mode */
        body.hide-colours .subject .latin-word,
        body.hide-colours .english-word.subject.revealed,
        body.hide-colours .verb .latin-word,
        body.hide-colours .english-word.verb.revealed,
        body.hide-colours .object .latin-word,
        body.hide-colours .english-word.object.revealed,
        body.hide-colours .genitive .latin-word,
        body.hide-colours .english-word.genitive.revealed,
        body.hide-colours .dative .latin-word,
        body.hide-colours .english-word.dative.revealed,
        body.hide-colours .ablative .latin-word,
        body.hide-colours .english-word.ablative.revealed,
        body.hide-colours .preposition .latin-word,
        body.hide-colours .english-word.preposition.revealed,
        body.hide-colours .conjunction .latin-word,
        body.hide-colours .english-word.conjunction.revealed,
        body.hide-colours .adverb .latin-word,
        body.hide-colours .english-word.adverb.revealed,
        body.hide-colours .gerundive .latin-word,
        body.hide-colours .english-word.gerundive.revealed {
            background-color: #e0e0e0;
        }

        /* Style Mode */
        .style-highlight {
            position: relative;
        }

        .style-highlight.active-style .latin-word {
            outline: 2px solid #333;
            outline-offset: 1px;
        }

        /* Style panel at bottom */
        .style-panel {
            display: none;
            background: rgba(0, 102, 255, 0.03);
            border-top: 2px solid rgba(0, 102, 255, 0.15);
            padding: 18px 24px;
            margin-top: 20px;
        }

        body.style-mode .style-panel {
            display: block;
        }

        .style-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .style-panel h3 {
            margin: 0;
            color: #0066ff;
            font-size: 1rem;
            font-weight: 600;
        }

        .style-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .style-tag {
            padding: 8px 14px;
            background: white;
            border: 1px solid rgba(0, 102, 255, 0.25);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #333;
        }

        .style-tag:hover {
            border-color: #0066ff;
            background: rgba(0, 102, 255, 0.05);
        }

        .style-tag.active {
            background: #0066ff;
            color: white;
            border-color: #0066ff;
        }

        .style-tag em {
            font-style: italic;
        }

        .style-analysis {
            display: none;
            padding: 16px 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid rgba(0, 102, 255, 0.15);
        }

        .style-analysis.active {
            display: block;
        }

        .style-analysis-title {
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 6px;
            font-size: 1rem;
        }

        .style-analysis-lines {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .style-analysis-effect {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .style-analysis-effect strong {
            color: #0066ff;
        }

        .style-analysis-exam {
            padding-top: 12px;
            border-top: 1px dashed #ddd;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.5;
        }

        .style-analysis-exam strong {
            color: #333;
        }

        .style-analysis em {
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-top">
            <div class="header-left">
                <a href="https://www.classicalia.co.uk" class="logo">C</a>
                <div class="title-area">
                    <h1>Messalina</h1>
                    <p class="subtitle">Section 7 (Lines 60-69): Narcissus arranges the assassination of Messalina</p>
                </div>
            </div>
            <div class="controls-area">
                <div class="controls">
                    <button id="showAllBtn">Show All</button>
                    <button id="hideAllBtn">Hide All</button>
                    <button id="toggleColoursBtn">Hide Colours</button>
                    <button id="toggleStyleBtn">Style Notes</button>
                </div>
                <div class="key">
                    <span class="key-item" data-category="subject" style="background-color: #ffb3b3;">Subj.</span>
                    <span class="key-item" data-category="object" style="background-color: #b3ffcc;">Obj.</span>
                    <span class="key-item" data-category="verb" style="background-color: #b3e6ff;">Verb</span>
                    <span class="key-item" data-category="genitive" style="background-color: #ffd9b3;">Gen.</span>
                    <span class="key-item" data-category="dative" style="background-color: #e6b3ff;">Dat.</span>
                    <span class="key-item" data-category="ablative" style="background-color: #ffffb3;">Abl.</span>
                    <span class="key-item" data-category="preposition" style="background-color: #ffb3e6;">Prep.</span>
                    <span class="key-item" data-category="conjunction" style="background-color: #d9ffb3;">Conj.</span>
                    <span class="key-item" data-category="adverb" style="background-color: #ccb3ff;">Adv.</span>
                    <span class="key-item" data-category="gerundive" style="background-color: #ffcbb3;">Gdv.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="translation-area">
        <!-- LATIN COLUMN -->
        <div class="latin-column">
            <div class="column-header">Latin</div>

            <!-- Sentence 1: mirum inter haec silentium Claudii: omnia liberto oboediebat; -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group adverb style-highlight" data-order="01-03" data-style-feature="ellipsis"><span class="word-order">3</span><span class="latin-word">mirum</span></span>
                    <span class="word-group preposition" data-order="01-04"><span class="word-order">4</span><span class="latin-word">inter</span></span>
                    <span class="word-group object" data-order="01-05"><span class="word-order">5</span><span class="latin-word">haec</span></span>
                    <span class="word-group subject" data-order="01-02"><span class="word-order">2</span><span class="latin-word">silentium</span></span>
                    <span class="word-group genitive" data-order="01-01"><span class="word-order">1</span><span class="latin-word">Claudii:</span></span>
                    <span class="word-group object" data-order="01-08"><span class="word-order">8</span><span class="latin-word">omnia</span></span>
                    <span class="word-group dative" data-order="01-07"><span class="word-order">7</span><span class="latin-word">liberto</span></span>
                    <span class="word-group verb" data-order="01-06"><span class="word-order">6</span><span class="latin-word">oboediebat;</span></span>
                </div>
            </div>

            <!-- Sentence 2: qui contionem militum in castris paravit. -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group subject" data-order="02-01"><span class="word-order">1</span><span class="latin-word">qui</span></span>
                    <span class="word-group object" data-order="02-03"><span class="word-order">3</span><span class="latin-word">contionem</span></span>
                    <span class="word-group genitive" data-order="02-04"><span class="word-order">4</span><span class="latin-word">militum</span></span>
                    <span class="word-group preposition" data-order="02-05"><span class="word-order">5</span><span class="latin-word">in</span></span>
                    <span class="word-group ablative" data-order="02-06"><span class="word-order">6</span><span class="latin-word">castris</span></span>
                    <span class="word-group verb" data-order="02-02"><span class="word-order">2</span><span class="latin-word">paravit.</span></span>
                </div>
            </div>

            <!-- Sentence 3: apud eos praemonente Narcisso princeps pauca verba fecit: -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group preposition" data-order="03-01"><span class="word-order">1</span><span class="latin-word">apud</span></span>
                    <span class="word-group object" data-order="03-02"><span class="word-order">2</span><span class="latin-word">eos</span></span>
                    <span class="word-group ablative style-highlight" data-order="03-04" data-style-feature="abl-abs"><span class="word-order">4</span><span class="latin-word">praemonente</span></span>
                    <span class="word-group ablative style-highlight" data-order="03-05" data-style-feature="abl-abs"><span class="word-order">5</span><span class="latin-word">Narcisso</span></span>
                    <span class="word-group subject" data-order="03-03"><span class="word-order">3</span><span class="latin-word">princeps</span></span>
                    <span class="word-group object" data-order="03-07"><span class="word-order">7</span><span class="latin-word">pauca</span></span>
                    <span class="word-group object" data-order="03-08"><span class="word-order">8</span><span class="latin-word">verba</span></span>
                    <span class="word-group verb" data-order="03-06"><span class="word-order">6</span><span class="latin-word">fecit:</span></span>
                </div>
            </div>

            <!-- Sentence 4: continuus dehinc clamor militum nomina reorum et poenas flagitantium. -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group subject" data-order="04-02"><span class="word-order">2</span><span class="latin-word">continuus</span></span>
                    <span class="word-group adverb" data-order="04-01"><span class="word-order">1</span><span class="latin-word">dehinc</span></span>
                    <span class="word-group subject" data-order="04-03"><span class="word-order">3</span><span class="latin-word">clamor</span></span>
                    <span class="word-group genitive" data-order="04-04"><span class="word-order">4</span><span class="latin-word">militum</span></span>
                    <span class="word-group object" data-order="04-06"><span class="word-order">6</span><span class="latin-word">nomina</span></span>
                    <span class="word-group genitive" data-order="04-07"><span class="word-order">7</span><span class="latin-word">reorum</span></span>
                    <span class="word-group conjunction" data-order="04-08"><span class="word-order">8</span><span class="latin-word">et</span></span>
                    <span class="word-group object" data-order="04-09"><span class="word-order">9</span><span class="latin-word">poenas</span></span>
                    <span class="word-group genitive" data-order="04-05"><span class="word-order">5</span><span class="latin-word">flagitantium.</span></span>
                </div>
            </div>

            <!-- Sentence 5: ductus Silius ad tribunal non defensionem, non moras temptavit, sed precatus est ut mors acceleraretur. -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group verb" data-order="05-02"><span class="word-order">2</span><span class="latin-word">ductus</span></span>
                    <span class="word-group subject" data-order="05-01"><span class="word-order">1</span><span class="latin-word">Silius</span></span>
                    <span class="word-group preposition" data-order="05-03"><span class="word-order">3</span><span class="latin-word">ad</span></span>
                    <span class="word-group object" data-order="05-04"><span class="word-order">4</span><span class="latin-word">tribunal</span></span>
                    <span class="word-group adverb style-highlight" data-order="05-05" data-style-feature="anaphora"><span class="word-order">5</span><span class="latin-word">non</span></span>
                    <span class="word-group object style-highlight" data-order="05-06" data-style-feature="anaphora"><span class="word-order">6</span><span class="latin-word">defensionem,</span></span>
                    <span class="word-group adverb style-highlight" data-order="05-07" data-style-feature="anaphora"><span class="word-order">7</span><span class="latin-word">non</span></span>
                    <span class="word-group object style-highlight" data-order="05-08" data-style-feature="anaphora"><span class="word-order">8</span><span class="latin-word">moras</span></span>
                    <span class="word-group verb" data-order="05-09"><span class="word-order">9</span><span class="latin-word">temptavit,</span></span>
                    <span class="word-group conjunction" data-order="05-10"><span class="word-order">10</span><span class="latin-word">sed</span></span>
                    <span class="word-group verb" data-order="05-11"><span class="word-order">11</span><span class="latin-word">precatus est</span></span>
                    <span class="word-group conjunction" data-order="05-12"><span class="word-order">12</span><span class="latin-word">ut</span></span>
                    <span class="word-group subject" data-order="05-14"><span class="word-order">14</span><span class="latin-word">mors</span></span>
                    <span class="word-group verb" data-order="05-13"><span class="word-order">13</span><span class="latin-word">acceleraretur.</span></span>
                </div>
            </div>

            <!-- Sentence 6: interim Messalina Lucullianis in hortis prolatare vitam, componere preces, nonnulla spe et ira: tantam superbiam etiam tum gerebat. -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group adverb" data-order="06-01"><span class="word-order">1</span><span class="latin-word">interim</span></span>
                    <span class="word-group subject" data-order="06-02"><span class="word-order">2</span><span class="latin-word">Messalina</span></span>
                    <span class="word-group ablative" data-order="06-05"><span class="word-order">5</span><span class="latin-word">Lucullianis</span></span>
                    <span class="word-group preposition" data-order="06-04"><span class="word-order">4</span><span class="latin-word">in</span></span>
                    <span class="word-group ablative" data-order="06-06"><span class="word-order">6</span><span class="latin-word">hortis</span></span>
                    <span class="word-group verb style-highlight" data-order="06-03" data-style-feature="historic-inf"><span class="word-order">3</span><span class="latin-word">prolatare</span></span>
                    <span class="word-group object" data-order="06-07"><span class="word-order">7</span><span class="latin-word">vitam,</span></span>
                    <span class="word-group verb style-highlight" data-order="06-08" data-style-feature="historic-inf"><span class="word-order">8</span><span class="latin-word">componere</span></span>
                    <span class="word-group object" data-order="06-09"><span class="word-order">9</span><span class="latin-word">preces,</span></span>
                    <span class="word-group ablative style-highlight" data-order="06-11" data-style-feature="oxymoron"><span class="word-order">11</span><span class="latin-word">nonnulla</span></span>
                    <span class="word-group ablative style-highlight" data-order="06-12" data-style-feature="oxymoron"><span class="word-order">12</span><span class="latin-word">spe</span></span>
                    <span class="word-group conjunction" data-order="06-13"><span class="word-order">13</span><span class="latin-word">et</span></span>
                    <span class="word-group ablative style-highlight" data-order="06-14" data-style-feature="oxymoron"><span class="word-order">14</span><span class="latin-word">ira:</span></span>
                    <span class="word-group object" data-order="06-16"><span class="word-order">16</span><span class="latin-word">tantam</span></span>
                    <span class="word-group object" data-order="06-17"><span class="word-order">17</span><span class="latin-word">superbiam</span></span>
                    <span class="word-group adverb" data-order="06-18"><span class="word-order">18</span><span class="latin-word">etiam</span></span>
                    <span class="word-group adverb" data-order="06-19"><span class="word-order">19</span><span class="latin-word">tum</span></span>
                    <span class="word-group verb" data-order="06-15"><span class="word-order">15</span><span class="latin-word">gerebat.</span></span>
                </div>
            </div>

            <!-- Sentence 7: ac nisi caedem eius Narcissus properavisset, vertisset pernicies in accusatorem. -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group conjunction" data-order="07-01"><span class="word-order">1</span><span class="latin-word">ac</span></span>
                    <span class="word-group conjunction style-highlight" data-order="07-02" data-style-feature="counterfactual"><span class="word-order">2</span><span class="latin-word">nisi</span></span>
                    <span class="word-group object" data-order="07-04"><span class="word-order">4</span><span class="latin-word">caedem</span></span>
                    <span class="word-group genitive" data-order="07-05"><span class="word-order">5</span><span class="latin-word">eius</span></span>
                    <span class="word-group subject" data-order="07-03"><span class="word-order">3</span><span class="latin-word">Narcissus</span></span>
                    <span class="word-group verb style-highlight" data-order="07-06" data-style-feature="counterfactual"><span class="word-order">6</span><span class="latin-word">properavisset,</span></span>
                    <span class="word-group verb style-highlight" data-order="07-07" data-style-feature="counterfactual"><span class="word-order">7</span><span class="latin-word">vertisset</span></span>
                    <span class="word-group subject" data-order="07-08"><span class="word-order">8</span><span class="latin-word">pernicies</span></span>
                    <span class="word-group preposition" data-order="07-09"><span class="word-order">9</span><span class="latin-word">in</span></span>
                    <span class="word-group object" data-order="07-10"><span class="word-order">10</span><span class="latin-word">accusatorem.</span></span>
                </div>
            </div>
        </div>

        <!-- ENGLISH COLUMN -->
        <div class="english-column">
            <div class="column-header">English</div>

            <!-- Sentence 1 English -->
            <div class="line-row" data-line="1">
                <span class="line-number">1</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="01-01">Claudius's</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="01-02">silence</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="01-03">surprising:</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="01-04">amid</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="01-05">these events</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="01-06">he obeyed</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word dative" data-order="01-07">the freedman</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="01-08">in every respect.</span></span>
                </div>
            </div>

            <!-- Sentence 2 English -->
            <div class="line-row" data-line="2">
                <span class="line-number">2</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="02-01">(Narcissus)</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="02-02">prepared</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="02-03">a meeting</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="02-04">of the soldiers</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="02-05">in</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="02-06">the camp.</span></span>
                </div>
            </div>

            <!-- Sentence 3 English -->
            <div class="line-row" data-line="3">
                <span class="line-number">3</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="03-01">In the presence of</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-02">them,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="03-03">the emperor</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="03-04">after warning</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="03-05">by Narcissus,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="03-06">spoke</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-07">a few</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="03-08">words:</span></span>
                </div>
            </div>

            <!-- Sentence 4 English -->
            <div class="line-row" data-line="4">
                <span class="line-number">4</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="04-01">then (arose)</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-02">a continuous</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="04-03">shouting</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="04-04">of the soldiers</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="04-05">demanding</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-06">the names</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="04-07">of the guilty</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="04-08">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="04-09">punishments.</span></span>
                </div>
            </div>

            <!-- Sentence 5 English -->
            <div class="line-row" data-line="5">
                <span class="line-number">5</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-01">Silius,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-02">brought</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="05-03">to</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-04">the tribunal,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="05-05">not</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-06">a defence</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="05-07">nor</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="05-08">delaying tactics,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-09">attempted</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="05-10">but</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-11">begged</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="05-12">that</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="05-13">might be hastened.</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="05-14">death</span></span>
                </div>
            </div>

            <!-- Sentence 6 English -->
            <div class="line-row" data-line="6">
                <span class="line-number">6</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-01">Meanwhile,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="06-02">Messalina</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-03">prolonged</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="06-04">in</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-05">of Lucullus,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-06">the gardens</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-07">her life,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-08">composed</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-09">a petition,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-11">some</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-12">hope</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="06-13">and</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word ablative" data-order="06-14">anger:</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="06-15">she displayed</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-16">such great</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="06-17">pride.</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-18">even</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word adverb" data-order="06-19">then,</span></span>
                </div>
            </div>

            <!-- Sentence 7 English -->
            <div class="line-row" data-line="7">
                <span class="line-number">7</span>
                <div class="words-container">
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="07-01">And</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word conjunction" data-order="07-02">if ... not</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="07-03">Narcissus</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="07-04">her slaughter,</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word genitive" data-order="07-05">her</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-06">had hastened</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word verb" data-order="07-07">would have turned</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word subject" data-order="07-08">destruction</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word preposition" data-order="07-09">onto</span></span>
                    <span class="word-group"><span class="word-order"></span><span class="english-word object" data-order="07-10">the accuser.</span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Style Panel -->
    <div class="style-panel">
        <div class="style-panel-header">
            <h3>Stylistic Features</h3>
        </div>
        <div class="style-list">
            <span class="style-tag" data-feature="ellipsis">Ellipsis — <em>mirum... silentium</em></span>
            <span class="style-tag" data-feature="abl-abs">Ablative Absolute — <em>praemonente Narcisso</em></span>
            <span class="style-tag" data-feature="anaphora">Anaphora — <em>non... non</em></span>
            <span class="style-tag" data-feature="historic-inf">Historic Infinitives — <em>prolatare... componere</em></span>
            <span class="style-tag" data-feature="oxymoron">Oxymoron — <em>nonnulla spe et ira</em></span>
            <span class="style-tag" data-feature="counterfactual">Counterfactual — <em>nisi... properavisset, vertisset</em></span>
        </div>

        <div class="style-analysis" id="analysis-ellipsis">
            <div class="style-analysis-title">Ellipsis — mirum... silentium</div>
            <div class="style-analysis-lines">Line 1</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> "Amazing silence" — Tacitus's compressed, verbless opening is itself a kind of silence. There's no main verb in this clause: just <em>mirum... silentium Claudii</em>. The emperor's silence is mirrored by the grammar itself. Tacitus drops us straight into the astonishing fact — Claudius said nothing while his freedman took over. The absence of a verb forces the reader to feel the same emptiness that characterised Claudius's response.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The verbless clause <em>mirum inter haec silentium Claudii</em> enacts the very silence it describes. The ellipsis of the main verb mirrors the emperor's passivity, while the emphatic initial <em>mirum</em> signals Tacitus's own astonishment at Claudius's failure to act."
            </div>
        </div>

        <div class="style-analysis" id="analysis-abl-abs">
            <div class="style-analysis-title">Ablative Absolute — praemonente Narcisso</div>
            <div class="style-analysis-lines">Line 3</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Narcissus pulls the strings — the emperor merely mouths the words he's been coached to say. The ablative absolute <em>praemonente Narcisso</em> ("with Narcissus prompting") is grammatically separate from the main clause, just as Narcissus is technically separate from the emperor's speech. But of course he's the one controlling it. Claudius speaks <em>pauca verba</em> ("a few words") — and even those are scripted by his freedman. The alliterative <em>praemonente... princeps pauca</em> may subtly echo Claudius's famous stammer.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The ablative absolute <em>praemonente Narcisso</em> reveals the true power dynamic: the freedman coaches the emperor, who can manage only <em>pauca verba</em>. The grammatical independence of the construction ironically highlights Claudius's dependence on Narcissus."
            </div>
        </div>

        <div class="style-analysis" id="analysis-anaphora">
            <div class="style-analysis-title">Anaphora — non defensionem, non moras</div>
            <div class="style-analysis-lines">Line 5</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Repeated negation showing Silius has completely given up — no fight, no delay. The emphatic <em>non... non</em> hammers home his total capitulation. Earlier in the text, Silius had spoken boldly about "dangers as the remedy for dangers." Now he has no defence, no delaying tactics — just a plea for death. The asyndetic pairing (no conjunction between the two phrases) makes the surrender feel swift and absolute. He doesn't even try.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The anaphora of <em>non... non</em> in <em>non defensionem, non moras temptavit</em> creates emphatic paired negation, conveying Silius's complete surrender. The asyndetic structure accelerates the pace, reflecting his desire for a swift end."
            </div>
        </div>

        <div class="style-analysis" id="analysis-historic-inf">
            <div class="style-analysis-title">Historic Infinitives — prolatare... componere</div>
            <div class="style-analysis-lines">Line 6</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Infinitives used as main verbs create a sense of ongoing, suspended action. <em>Prolatare</em> (to prolong) and <em>componere</em> (to compose) are not finite verbs — they're infinitives standing in for them, a favourite Tacitean device. The effect is to strip away tense and person, leaving us with pure action: prolonging, composing. It makes Messalina's frantic efforts feel vivid and immediate, as if we're watching her in real time. The contrast with Silius's resigned acceptance is devastating.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The historic infinitives <em>prolatare... componere</em> create a vivid, present-tense immediacy. Stripped of finite verb endings, they convey pure, ongoing action — Messalina desperately clinging to life and drafting appeals — in stark contrast to Silius's static resignation."
            </div>
        </div>

        <div class="style-analysis" id="analysis-oxymoron">
            <div class="style-analysis-title">Oxymoron — nonnulla spe et ira</div>
            <div class="style-analysis-lines">Line 6</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Hope and anger mixed together — contradictory emotions in her final hours. <em>Spes</em> (hope) looks forward, expects rescue; <em>ira</em> (anger) looks back, rages at betrayal. These are pulling in opposite directions, yet Messalina feels both simultaneously. Tacitus captures her psychological turmoil in just three words. She hasn't accepted her fate — she's still hoping AND still furious. The <em>nonnulla</em> ("not inconsiderable") makes it worse: this isn't a faint glimmer, it's real, substantial emotion.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The oxymoronic pairing <em>spe et ira</em> ('with hope and anger') captures Messalina's psychological disintegration, combining the forward-looking optimism of <em>spes</em> with the backward-looking bitterness of <em>ira</em> to convey her inability to accept reality."
            </div>
        </div>

        <div class="style-analysis" id="analysis-counterfactual">
            <div class="style-analysis-title">Counterfactual — nisi... properavisset, vertisset</div>
            <div class="style-analysis-lines">Line 7</div>
            <div class="style-analysis-effect">
                <strong>What's happening:</strong> Pluperfect subjunctive showing how close Narcissus came to being destroyed himself. <em>Nisi... properavisset</em> ("if he had not hastened") and <em>vertisset</em> ("would have turned") form a past contrary-to-fact condition — this nearly happened but didn't. The chilling implication is that Messalina was regaining influence over Claudius. If Narcissus had hesitated even briefly, <em>pernicies</em> (destruction) would have turned <em>in accusatorem</em> (onto the accuser) — that is, onto Narcissus himself. Kill or be killed.
            </div>
            <div class="style-analysis-exam">
                <strong>In an exam:</strong> "The pluperfect subjunctives <em>properavisset... vertisset</em> create a past counterfactual condition, revealing how precarious Narcissus's position was. The phrase <em>pernicies in accusatorem</em> encapsulates the deadly reversibility of imperial court politics."
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let coloursHidden = false;
        const activeCategories = new Set();

        const wordOrders = [];
        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            if (group.dataset.order) {
                wordOrders.push(group.dataset.order);
            }
        });
        wordOrders.sort((a, b) => {
            const [lineA, numA] = a.split('-');
            const [lineB, numB] = b.split('-');
            if (lineA !== lineB) return parseInt(lineA) - parseInt(lineB);
            return parseInt(numA) - parseInt(numB);
        });

        function revealWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.add('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.add('revealed');
                    }
                }
            });
        }

        function hideWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup) {
                latinGroup.classList.remove('revealed');
            }

            document.querySelectorAll(`.english-word`).forEach(word => {
                if (word.dataset.order) {
                    const orders = word.dataset.order.split(',');
                    if (orders.includes(order)) {
                        word.classList.remove('revealed');
                    }
                }
            });
        }

        function toggleWord(order) {
            const latinGroup = document.querySelector(`.latin-column .word-group[data-order="${order}"]`);
            if (latinGroup && latinGroup.classList.contains('revealed')) {
                hideWord(order);
            } else {
                revealWord(order);
            }
        }

        function stepForward() {
            if (currentStep < wordOrders.length) {
                revealWord(wordOrders[currentStep]);
                currentStep++;
            }
        }

        function stepBackward() {
            if (currentStep > 0) {
                currentStep--;
                hideWord(wordOrders[currentStep]);
            }
        }

        function toggleCategory(category) {
            const keyItem = document.querySelector(`.key-item[data-category="${category}"]`);

            if (activeCategories.has(category)) {
                activeCategories.delete(category);
                keyItem.classList.remove('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.remove('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.remove('highlighted');
                });
            } else {
                activeCategories.add(category);
                keyItem.classList.add('active');

                document.querySelectorAll(`.latin-column .word-group.${category}`).forEach(group => {
                    group.classList.add('highlighted');
                });

                document.querySelectorAll(`.english-word.${category}`).forEach(word => {
                    word.classList.add('highlighted');
                });
            }
        }

        document.getElementById('showAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.latin-column .word-group').forEach(group => {
                if (group.dataset.order) {
                    revealWord(group.dataset.order);
                }
            });
            currentStep = wordOrders.length;
        });

        document.getElementById('hideAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.revealed').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.english-word').forEach(el => {
                el.classList.remove('revealed');
            });
            document.querySelectorAll('.highlighted').forEach(el => {
                el.classList.remove('highlighted');
            });
            document.querySelectorAll('.key-item').forEach(el => {
                el.classList.remove('active');
            });
            activeCategories.clear();
            currentStep = 0;
        });

        document.getElementById('toggleColoursBtn').addEventListener('click', () => {
            coloursHidden = !coloursHidden;
            document.body.classList.toggle('hide-colours', coloursHidden);
            document.getElementById('toggleColoursBtn').textContent =
                coloursHidden ? 'Show Colours' : 'Hide Colours';
        });

        document.querySelectorAll('.key-item').forEach(item => {
            item.addEventListener('click', () => {
                toggleCategory(item.dataset.category);
            });
        });

        document.querySelectorAll('.latin-column .word-group').forEach(group => {
            group.addEventListener('click', () => {
                if (group.dataset.order) {
                    toggleWord(group.dataset.order);
                }
            });
        });

        document.querySelectorAll('.english-word').forEach(word => {
            word.addEventListener('click', () => {
                if (word.dataset.order) {
                    const order = word.dataset.order.split(',')[0];
                    toggleWord(order);
                }
            });
        });

        document.querySelectorAll('.english-column .line-number').forEach(lineNum => {
            lineNum.style.cursor = 'pointer';
            lineNum.addEventListener('click', () => {
                const lineRow = lineNum.closest('.line-row');
                const lineOrders = [];
                lineRow.querySelectorAll('.english-word').forEach(word => {
                    if (word.dataset.order) {
                        word.dataset.order.split(',').forEach(order => {
                            if (!lineOrders.includes(order)) {
                                lineOrders.push(order);
                            }
                        });
                    }
                });

                const firstWord = lineRow.querySelector('.english-word');
                const isRevealed = firstWord && firstWord.classList.contains('revealed');

                lineOrders.forEach(order => {
                    if (isRevealed) {
                        hideWord(order);
                    } else {
                        revealWord(order);
                    }
                });
            });
        });

        document.getElementById('toggleStyleBtn').addEventListener('click', () => {
            document.body.classList.toggle('style-mode');
            const isStyleMode = document.body.classList.contains('style-mode');
            document.getElementById('toggleStyleBtn').textContent =
                isStyleMode ? 'Hide Style' : 'Style Notes';

            if (!isStyleMode) {
                document.querySelectorAll('.style-tag.active').forEach(tag => {
                    tag.classList.remove('active');
                });
                document.querySelectorAll('.style-analysis.active').forEach(analysis => {
                    analysis.classList.remove('active');
                });
                document.querySelectorAll('.active-style').forEach(el => {
                    el.classList.remove('active-style');
                });
            }
        });

        document.querySelectorAll('.style-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                const featureId = tag.dataset.feature;
                const isActive = tag.classList.contains('active');

                document.querySelectorAll('.style-tag.active').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.style-analysis.active').forEach(a => a.classList.remove('active'));
                document.querySelectorAll('.active-style').forEach(el => el.classList.remove('active-style'));

                if (!isActive) {
                    tag.classList.add('active');

                    const analysis = document.getElementById('analysis-' + featureId);
                    if (analysis) {
                        analysis.classList.add('active');
                    }

                    document.querySelectorAll('[data-style-feature]').forEach(el => {
                        const features = el.dataset.styleFeature.split(' ');
                        if (features.includes(featureId)) {
                            el.classList.add('active-style');
                        }
                    });
                }
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'ArrowRight' || e.code === 'ArrowDown' || e.code === 'PageDown' || e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                stepForward();
            }
            else if (e.code === 'ArrowLeft' || e.code === 'ArrowUp' || e.code === 'PageUp' || e.code === 'Backspace') {
                e.preventDefault();
                stepBackward();
            }
            else if (e.code === 'Escape' || e.code === 'KeyR') {
                document.getElementById('hideAllBtn').click();
            }
        });
    </script>
</body>
</html>
