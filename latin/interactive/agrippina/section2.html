<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sources on Agrippina's Alleged Incest - Chapter 14.2</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 25%, #e6f0ff 60%, #ffffff 100%);
            background-attachment: fixed;
            min-height: 100vh;
            line-height: 1.6;
            color: #333;
        }

        .header {
            text-align: center;
            padding: 1.5rem 2rem 1rem;
            color: white;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 1.5rem;
            align-items: start;
        }

        .panel {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .resources-panel {
            height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(0, 102, 255, 0.2);
        }

        .resource-icons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .resource-icon {
            background: white;
            border: 2px solid rgba(0, 102, 255, 0.15);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .resource-icon:hover {
            border-color: #0066ff;
            background: rgba(0, 102, 255, 0.05);
            transform: translateY(-2px);
        }

        .resource-icon.active {
            border-color: #0066ff;
            background: rgba(0, 102, 255, 0.1);
        }

        .resource-icon .emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        .resource-icon .label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #0066ff;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .resource-display {
            background: white;
            border: 1px solid rgba(0, 102, 255, 0.1);
            border-radius: 12px;
            padding: 1.25rem;
            min-height: 300px;
        }

        .resource-display h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 1rem;
        }

        .resource-display p {
            font-size: 0.9rem;
            line-height: 1.7;
            color: #444;
            margin-bottom: 0.75rem;
        }

        .resource-display ul {
            margin: 0.75rem 0;
            padding-left: 1.25rem;
        }

        .resource-display li {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #444;
            margin-bottom: 0.5rem;
        }

        .resource-display strong {
            color: #0066ff;
        }

        .resource-display em {
            font-style: italic;
            color: #666;
        }

        .placeholder-message {
            text-align: center;
            padding: 3rem 1rem;
            color: #999;
            font-style: italic;
            font-size: 0.9rem;
        }

        .text-panel {
            height: calc(100vh - 200px);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .text-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(0, 102, 255, 0.2);
        }

        .text-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0066ff;
        }

        .mode-toggle {
            display: flex;
            gap: 0.5rem;
            background: rgba(0, 102, 255, 0.08);
            padding: 0.25rem;
            border-radius: 8px;
        }

        .mode-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            color: #0066ff;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mode-btn:hover {
            background: rgba(0, 102, 255, 0.1);
        }

        .mode-btn.active {
            background: #0066ff;
            color: white;
        }

        .latin-text {
            font-size: 1.3rem;
            line-height: 2.5;
            color: #1a1a1a;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: rgba(0, 102, 255, 0.02);
            border-radius: 12px;
            border-left: 4px solid #0066ff;
            flex-grow: 1;
        }

        .phrase {
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 3px 6px;
            border-radius: 4px;
            display: inline-block;
            margin: 3px 4px;
        }

        /* Grammar mode colors - each phrase gets unique colour */
        .mode-grammar .phrase {
            background: transparent;
        }

        .mode-grammar .phrase-1 { background: rgba(76, 175, 80, 0.2); }
        .mode-grammar .phrase-1:hover { background: rgba(76, 175, 80, 0.35); }
        
        .mode-grammar .phrase-2 { background: rgba(33, 150, 243, 0.2); }
        .mode-grammar .phrase-2:hover { background: rgba(33, 150, 243, 0.35); }
        
        .mode-grammar .phrase-3 { background: rgba(156, 39, 176, 0.2); }
        .mode-grammar .phrase-3:hover { background: rgba(156, 39, 176, 0.35); }
        
        .mode-grammar .phrase-4 { background: rgba(255, 152, 0, 0.2); }
        .mode-grammar .phrase-4:hover { background: rgba(255, 152, 0, 0.35); }
        
        .mode-grammar .phrase-5 { background: rgba(0, 188, 212, 0.2); }
        .mode-grammar .phrase-5:hover { background: rgba(0, 188, 212, 0.35); }
        
        .mode-grammar .phrase-6 { background: rgba(255, 193, 7, 0.2); }
        .mode-grammar .phrase-6:hover { background: rgba(255, 193, 7, 0.35); }
        
        .mode-grammar .phrase-7 { background: rgba(121, 85, 72, 0.2); }
        .mode-grammar .phrase-7:hover { background: rgba(121, 85, 72, 0.35); }
        
        .mode-grammar .phrase-8 { background: rgba(0, 172, 193, 0.25); }
        .mode-grammar .phrase-8:hover { background: rgba(0, 172, 193, 0.4); }
        
        .mode-grammar .phrase-9 { background: rgba(205, 220, 57, 0.2); }
        .mode-grammar .phrase-9:hover { background: rgba(205, 220, 57, 0.35); }
        
        .mode-grammar .phrase-10 { background: rgba(244, 67, 54, 0.2); }
        .mode-grammar .phrase-10:hover { background: rgba(244, 67, 54, 0.35); }
        
        .mode-grammar .phrase-11 { background: rgba(103, 58, 183, 0.2); }
        .mode-grammar .phrase-11:hover { background: rgba(103, 58, 183, 0.35); }
        
        .mode-grammar .phrase-12 { background: rgba(0, 150, 136, 0.2); }
        .mode-grammar .phrase-12:hover { background: rgba(0, 150, 136, 0.35); }
        
        .mode-grammar .phrase-13 { background: rgba(255, 87, 34, 0.2); }
        .mode-grammar .phrase-13:hover { background: rgba(255, 87, 34, 0.35); }
        
        .mode-grammar .phrase-14 { background: rgba(63, 81, 181, 0.2); }
        .mode-grammar .phrase-14:hover { background: rgba(63, 81, 181, 0.35); }
        
        .mode-grammar .phrase-15 { background: rgba(233, 30, 99, 0.25); }
        .mode-grammar .phrase-15:hover { background: rgba(233, 30, 99, 0.4); }
        
        .mode-grammar .phrase-16 { background: rgba(139, 195, 74, 0.2); }
        .mode-grammar .phrase-16:hover { background: rgba(139, 195, 74, 0.35); }
        
        .mode-grammar .phrase-17 { background: rgba(38, 166, 154, 0.2); }
        .mode-grammar .phrase-17:hover { background: rgba(38, 166, 154, 0.35); }
        
        .mode-grammar .phrase-18 { background: rgba(171, 71, 188, 0.2); }
        .mode-grammar .phrase-18:hover { background: rgba(171, 71, 188, 0.35); }
        
        .mode-grammar .phrase-19 { background: rgba(255, 167, 38, 0.2); }
        .mode-grammar .phrase-19:hover { background: rgba(255, 167, 38, 0.35); }
        
        .mode-grammar .phrase-20 { background: rgba(66, 165, 245, 0.2); }
        .mode-grammar .phrase-20:hover { background: rgba(66, 165, 245, 0.35); }
        
        .mode-grammar .phrase-21 { background: rgba(239, 83, 80, 0.2); }
        .mode-grammar .phrase-21:hover { background: rgba(239, 83, 80, 0.35); }
        
        .mode-grammar .phrase-22 { background: rgba(126, 87, 194, 0.2); }
        .mode-grammar .phrase-22:hover { background: rgba(126, 87, 194, 0.35); }
        
        .mode-grammar .phrase-23 { background: rgba(102, 187, 106, 0.2); }
        .mode-grammar .phrase-23:hover { background: rgba(102, 187, 106, 0.35); }
        
        .mode-grammar .phrase-24 { background: rgba(255, 202, 40, 0.2); }
        .mode-grammar .phrase-24:hover { background: rgba(255, 202, 40, 0.35); }
        
        .mode-grammar .phrase-25 { background: rgba(236, 64, 122, 0.2); }
        .mode-grammar .phrase-25:hover { background: rgba(236, 64, 122, 0.35); }
        
        .mode-grammar .phrase-26 { background: rgba(29, 233, 182, 0.2); }
        .mode-grammar .phrase-26:hover { background: rgba(29, 233, 182, 0.35); }

        /* Style mode highlights */
        .mode-style .phrase {
            background: transparent;
            cursor: default;
            padding: 0;
            margin: 0;
        }

        .highlight-style {
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 2px 4px;
            margin: 3px 3px;
            border-radius: 3px;
            display: inline-block;
        }

        .mode-style .style-device {
            background: rgba(255, 235, 59, 0.3);
        }

        .mode-style .style-device:hover {
            background: rgba(255, 235, 59, 0.5);
        }

        .mode-style .style-character {
            background: rgba(255, 152, 0, 0.3);
        }

        .mode-style .style-character:hover {
            background: rgba(255, 152, 0, 0.5);
        }

        .mode-style .style-irony {
            background: rgba(76, 175, 80, 0.3);
        }

        .mode-style .style-irony:hover {
            background: rgba(76, 175, 80, 0.5);
        }

        .mode-style .style-contrast {
            background: rgba(33, 150, 243, 0.3);
        }

        .mode-style .style-contrast:hover {
            background: rgba(33, 150, 243, 0.5);
        }

        .mode-style .style-metaphor {
            background: rgba(156, 39, 176, 0.3);
        }

        .mode-style .style-metaphor:hover {
            background: rgba(156, 39, 176, 0.5);
        }

        .mode-style .style-emphasis {
            background: rgba(233, 30, 99, 0.3);
        }

        .mode-style .style-emphasis:hover {
            background: rgba(233, 30, 99, 0.5);
        }

        .translation-toggle {
            text-align: center;
            margin-top: auto;
            padding-top: 1rem;
        }

        .toggle-btn {
            padding: 0.75rem 2rem;
            background: #0066ff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .toggle-btn:hover {
            background: #0052cc;
            transform: translateY(-1px);
        }

        .translation-box {
            background: rgba(230, 240, 255, 0.8);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid rgba(0, 102, 255, 0.2);
            display: none;
        }

        .translation-box.visible {
            display: block;
        }

        .translation-box h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: #0066ff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }

        .translation-text {
            font-size: 1rem;
            line-height: 1.8;
            color: #333;
        }

        .analysis-panel {
            height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .mode-indicator {
            background: white;
            border: 1px solid rgba(0, 102, 255, 0.1);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .mode-indicator .current-mode {
            font-size: 0.8rem;
            font-weight: 600;
            color: #0066ff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .mode-indicator .mode-description {
            font-size: 0.75rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .analysis-card {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(0, 102, 255, 0.15);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            display: none;
        }

        .analysis-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 0.75rem;
        }

        .analysis-card .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }

        .analysis-card p {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #444;
            margin-bottom: 0.75rem;
        }

        .analysis-card p:last-child {
            margin-bottom: 0;
        }

        .analysis-card strong {
            color: #0066ff;
        }

        .analysis-card .reveal-translation {
            background: #0066ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 0.75rem;
            transition: all 0.2s ease;
        }

        .analysis-card .reveal-translation:hover {
            background: #0052cc;
        }

        .analysis-card .translation-reveal {
            display: none;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid rgba(0, 102, 255, 0.2);
        }

        .analysis-card .translation-reveal.visible {
            display: block;
        }

        .analysis-card .translation-reveal strong {
            color: #0066ff;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .analysis-card .translation-reveal p {
            font-style: italic;
            color: #555;
            margin-top: 0.5rem;
        }

        .default-message {
            text-align: center;
            padding: 3rem 1rem;
            color: #999;
            font-style: italic;
            font-size: 0.95rem;
        }

        .navigation {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 102, 255, 0.1);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            background: #0066ff;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background: #0052cc;
            transform: translateY(-1px);
        }

        @media (max-width: 1400px) {
            .lesson-grid {
                grid-template-columns: 300px 1fr 350px;
            }
        }

        @media (max-width: 1200px) {
            .lesson-grid {
                grid-template-columns: 1fr;
            }

            .resources-panel, .text-panel, .analysis-panel {
                height: auto;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">Classicalia</div>
        <div class="subtitle">Chapter 14.2: Sources on Agrippina's Alleged Incest - Interactive Lesson</div>
    </header>

    <div class="container">
        <div class="lesson-grid">
            <!-- LEFT: Icon Navigation -->
            <div class="panel resources-panel">
                <h3 class="panel-title">Lesson Resources</h3>

                <div class="resource-icons">
                    <div class="resource-icon" onclick="showResource('summary')">
                        <span class="emoji">📋</span>
                        <div class="label">Summary</div>
                    </div>

                    <div class="resource-icon" onclick="showResource('context')">
                        <span class="emoji">🏛️</span>
                        <div class="label">Context</div>
                    </div>

                    <div class="resource-icon" onclick="showResource('comprehension')">
                        <span class="emoji">❓</span>
                        <div class="label">Comprehension</div>
                    </div>

                    <div class="resource-icon" onclick="showResource('sources')">
                        <span class="emoji">📚</span>
                        <div class="label">Sources</div>
                    </div>

                    <div class="resource-icon" onclick="showResource('themes')">
                        <span class="emoji">🎭</span>
                        <div class="label">Themes</div>
                    </div>

                    <div class="resource-icon" onclick="showResource('extension')">
                        <span class="emoji">✨</span>
                        <div class="label">Extension</div>
                    </div>
                </div>

                <div class="resource-display" id="resourceDisplay">
                    <div class="placeholder-message">Click an icon above to view lesson resources</div>
                </div>
            </div>

            <!-- MIDDLE: Latin Text with Mode Toggle -->
            <div class="panel text-panel">
                <div class="text-header">
                    <h3 class="text-title">Chapter 14.2</h3>
                    <div class="mode-toggle">
                        <button class="mode-btn active" onclick="setMode('grammar')">Grammar/Vocab</button>
                        <button class="mode-btn" onclick="setMode('style')">Style</button>
                    </div>
                </div>
                
                <div class="latin-text mode-grammar" id="latinText">
                    <!-- Opening section -->
                    <span class="phrase phrase-1" onclick="if(currentMode==='grammar') showAnalysis('phrase1')">
                        <span class="highlight-style style-device" onclick="if(currentMode==='style') showAnalysis('style1')">tradit Cluvius</span>
                    </span>
                    <span class="phrase phrase-2" onclick="if(currentMode==='grammar') showAnalysis('phrase2')">ardore retinendae Agrippinam 
                        <span class="highlight-style style-emphasis" onclick="if(currentMode==='style') showAnalysis('style2')">potentiae</span>
                    </span>
                    <span class="phrase phrase-3" onclick="if(currentMode==='grammar') showAnalysis('phrase3')">
                        <span class="highlight-style style-metaphor" onclick="if(currentMode==='style') showAnalysis('style3')">eo usque provectam</span>
                    </span>
                    <span class="phrase phrase-4" onclick="if(currentMode==='grammar') showAnalysis('phrase4')">ut 
                        <span class="highlight-style style-emphasis" onclick="if(currentMode==='style') showAnalysis('style4')">medio diei</span>
                    </span>,
                    <span class="phrase phrase-5" onclick="if(currentMode==='grammar') showAnalysis('phrase5')">cum id temporis Nero 
                        <span class="highlight-style style-device" onclick="if(currentMode==='style') showAnalysis('style5')">per vinum et epulas</span>
                        <span class="highlight-style style-metaphor" onclick="if(currentMode==='style') showAnalysis('style6')">incalesceret</span>
                    </span>,
                    <span class="phrase phrase-6" onclick="if(currentMode==='grammar') showAnalysis('phrase6')">offerret se saepius temulento</span>
                    <span class="phrase phrase-7" onclick="if(currentMode==='grammar') showAnalysis('phrase7')">
                        <span class="highlight-style style-emphasis" onclick="if(currentMode==='style') showAnalysis('style7')">comptam et incesto paratam</span>
                    </span>;
                    
                    <!-- iamque section -->
                    <span class="phrase phrase-8" onclick="if(currentMode==='grammar') showAnalysis('phrase8')">iamque 
                        <span class="highlight-style style-device" onclick="if(currentMode==='style') showAnalysis('style8')">lasciva oscula</span>
                        et praenuntias flagitii blanditias
                    </span>
                    <span class="phrase phrase-9" onclick="if(currentMode==='grammar') showAnalysis('phrase9')">adnotantibus proximis</span>,
                    
                    <!-- Seneca's intervention -->
                    <span class="phrase phrase-10" onclick="if(currentMode==='grammar') showAnalysis('phrase10')">
                        <span class="highlight-style style-character" onclick="if(currentMode==='style') showAnalysis('style9')">Senecam</span>
                        <span class="highlight-style style-contrast" onclick="if(currentMode==='style') showAnalysis('style10')">contra muliebres inlecebras</span>
                    </span>
                    <span class="phrase phrase-11" onclick="if(currentMode==='grammar') showAnalysis('phrase11')">
                        <span class="highlight-style style-irony" onclick="if(currentMode==='style') showAnalysis('style11')">subsidium a femina</span>
                        petivisse
                    </span>,
                    <span class="phrase phrase-12" onclick="if(currentMode==='grammar') showAnalysis('phrase12')">
                        <span class="highlight-style style-metaphor" onclick="if(currentMode==='style') showAnalysis('style12')">immissamque</span>
                        <span class="highlight-style style-character" onclick="if(currentMode==='style') showAnalysis('style13')">Acten libertam</span>
                    </span>
                    
                    <!-- Acte's warning -->
                    <span class="phrase phrase-13" onclick="if(currentMode==='grammar') showAnalysis('phrase13')">quae simul suo periculo et infamia Neronis anxia</span>
                    <span class="phrase phrase-14" onclick="if(currentMode==='grammar') showAnalysis('phrase14')">deferret pervulgatum esse incestum</span>
                    <span class="phrase phrase-15" onclick="if(currentMode==='grammar') showAnalysis('phrase15')">gloriante matre</span>,
                    <span class="phrase phrase-16" onclick="if(currentMode==='grammar') showAnalysis('phrase16')">nec toleraturos milites profani principis imperium</span>.
                    
                    <!-- Alternative source -->
                    <span class="phrase phrase-17" onclick="if(currentMode==='grammar') showAnalysis('phrase17')">
                        <span class="highlight-style style-device" onclick="if(currentMode==='style') showAnalysis('style14')">Fabius Rusticus</span>
                        <span class="highlight-style style-contrast" onclick="if(currentMode==='style') showAnalysis('style15')">non Agrippinae sed Neroni</span>
                        cupitum id memorat
                    </span>
                    <span class="phrase phrase-18" onclick="if(currentMode==='grammar') showAnalysis('phrase18')">eiusdemque libertae astu disiectum</span>.
                    
                    <!-- Tacitus's judgment -->
                    <span class="phrase phrase-19" onclick="if(currentMode==='grammar') showAnalysis('phrase19')">sed quae Cluvius eadem ceteri quoque auctores prodidere</span>,
                    <span class="phrase phrase-20" onclick="if(currentMode==='grammar') showAnalysis('phrase20')">
                        <span class="highlight-style style-device" onclick="if(currentMode==='style') showAnalysis('style16')">et fama huc inclinat</span>
                    </span>,
                    
                    <!-- Final assessment -->
                    <span class="phrase phrase-21" onclick="if(currentMode==='grammar') showAnalysis('phrase21')">seu concepit animo tantum immanitatis Agrippina</span>,
                    <span class="phrase phrase-22" onclick="if(currentMode==='grammar') showAnalysis('phrase22')">
                        <span class="highlight-style style-irony" onclick="if(currentMode==='style') showAnalysis('style17')">seu credibilior novae libidinis meditatio</span>
                        in ea visa est
                    </span>
                    
                    <!-- Sexual history -->
                    <span class="phrase phrase-23" onclick="if(currentMode==='grammar') showAnalysis('phrase23')">quae puellaribus annis stuprum cum Lepido</span>
                    <span class="phrase phrase-24" onclick="if(currentMode==='grammar') showAnalysis('phrase24')">spe dominationis admiserat</span>,
                    <span class="phrase phrase-25" onclick="if(currentMode==='grammar') showAnalysis('phrase25')">
                        <span class="highlight-style style-emphasis" onclick="if(currentMode==='style') showAnalysis('style18')">pari cupidine</span>
                        usque ad libita Pallantis provoluta
                    </span>
                    <span class="phrase phrase-26" onclick="if(currentMode==='grammar') showAnalysis('phrase26')">
                        <span class="highlight-style style-metaphor" onclick="if(currentMode==='style') showAnalysis('style19')">et exercita ad omne flagitium</span>
                        <span class="highlight-style style-irony" onclick="if(currentMode==='style') showAnalysis('style20')">patrui nuptiis</span>
                    </span>.
                </div>

                <div class="translation-toggle">
                    <button class="toggle-btn" onclick="toggleTranslation()">Show Full Translation</button>
                </div>

                <div class="translation-box" id="translationBox">
                    <h4>Full Translation</h4>
                    <p class="translation-text">Cluvius records that in her eagerness to retain power, Agrippina went so far as to offer herself quite often, adorned and ready for incest, to the drunken Nero in the middle of the day, at that time when Nero was becoming heated through wine and feasting; and already, as those closest were noticing the wanton kisses and caresses that announce scandal, Seneca sought help from a woman against the feminine enticements and Acte, a freedwoman, was sent in, who, anxious both for her own danger and Nero's disgrace, reported that their incest was widely known because the mother was boasting about it, and that the soldiers would not tolerate the rule of an unholy emperor. Fabius Rusticus records that this was desired not by Agrippina but by Nero, and was scattered by the cleverness of this same freedwoman. But what Cluvius (relates), the rest of the authors too have handed down, and rumour inclines this way, whether Agrippina conceived such great monstrosity in her mind, or the contemplation of a new lust seemed more believable in her who in her girlhood years had admitted adultery with Lepidus in hope of domination, with equal desire had prostrated herself even to the whims of Pallas and was practised in every disgrace through marriage to her uncle.</p>
                </div>

                <div class="navigation">
                    <a href="section1.html" class="btn">← Section 14.1</a>
                    <a href="../index.html" class="btn">Back to Index</a>
                    <a href="section3.html" class="btn">Section 14.3 →</a>
                </div>
            </div>

            <!-- RIGHT: Analysis Panel -->
            <div class="panel analysis-panel">
                <h3 class="panel-title">Analysis</h3>

                <div class="mode-indicator">
                    <div class="current-mode" id="currentMode">Grammar/Vocab Mode</div>
                    <div class="mode-description" id="modeDescription">Click coloured phrases for vocabulary, grammar, and translation help</div>
                </div>

                <div class="default-message" id="defaultMessage">
                    Click any coloured phrase to see vocabulary, grammar explanation, and translation.
                </div>

                <!-- Grammar/Vocab phrase cards -->
                <div id="grammarCards"></div>

                <!-- Style analysis cards -->
                <div id="styleCards"></div>
            </div>
        </div>
    </div>

    <script src="data/chapter14-2-data.js"></script>
    <script>
        let currentAnalysis = null;
        let currentMode = 'grammar';

        // Populate lesson resources
        const resources = {
            summary: `
                <h4>Summary</h4>
                <p>Tacitus presents conflicting historical accounts of alleged incest between Agrippina and Nero. According to Cluvius, Agrippina initiated the seduction when Nero was drunk at midday banquets. Seneca intervened by sending Acte to warn Nero about spreading rumours and potential military revolt.</p>
                <p>Fabius Rusticus offers an alternative version where Nero initiated the incest, though Acte still prevented it. Tacitus notes most sources agree with Cluvius and adds Agrippina's sexual history as evidence: affairs with Lepidus and Pallas for power, and incestuous marriage to uncle Claudius.</p>
            `,
            context: `
                <h4>Historical Context</h4>
                <p><strong>The Sources:</strong> Cluvius Rufus was a contemporary historian who likely knew the imperial family personally. Fabius Rusticus was Seneca's friend, explaining his version that exonerates Seneca's intervention.</p>
                <p><strong>The Characters:</strong> Acte was a real freedwoman who had been Nero's mistress before Poppaea. Her low status makes her moral superiority over Agrippina particularly striking.</p>
                <p><strong>Agrippina's Past:</strong> The references are historically attested: Marcus Lepidus was her brother-in-law with whom she allegedly conspired; Pallas was Claudius's powerful freedman secretary; her marriage to uncle Claudius required special senatorial dispensation as it violated Roman incest laws.</p>
                <p><strong>Military Concern:</strong> The emphasis on soldiers' reaction shows where real power lay - moral authority ultimately depended on military support.</p>
            `,
            comprehension: `
                <h4>Comprehension Questions</h4>
                <ul>
                    <li>According to Cluvius, who initiated the alleged incest?</li>
                    <li>When did Agrippina make her advances?</li>
                    <li>What physical signs did courtiers notice?</li>
                    <li>How did Seneca respond to the situation?</li>
                    <li>What was Acte's role and status?</li>
                    <li>What two dangers concerned Acte?</li>
                    <li>How does Fabius Rusticus's version differ?</li>
                    <li>Which version does Tacitus seem to favour? Why?</li>
                    <li>What three past relationships does Tacitus mention?</li>
                    <li>What was the motive behind each relationship?</li>
                </ul>
            `,
            sources: `
                <h4>Source Analysis</h4>
                <p><strong>Historiographical Method:</strong> Tacitus explicitly names his sources, creating apparent objectivity whilst clearly favouring one version. This technique allows him to present scandal whilst maintaining scholarly distance.</p>
                <p><strong>Source Bias:</strong> Cluvius Rufus was writing under the Flavians when vilifying Nero was safe. Fabius Rusticus's friendship with Seneca explains his version protecting Seneca's reputation.</p>
                <p><strong>The Role of Rumour:</strong> Tacitus notes "fama huc inclinat" (rumour inclines this way) - popular opinion becomes evidence, though rumour typically favours the most scandalous version.</p>
                <p><strong>Character Evidence:</strong> Tacitus uses Agrippina's sexual history as "proof" - past behaviour determines present credibility. This is character assassination disguised as logical deduction.</p>
            `,
            themes: `
                <h4>Key Themes</h4>
                <p><strong>Power Through Sex:</strong> Every sexual relationship Agrippina has is transactional - body as political currency. From Lepidus to Pallas to Claudius to (allegedly) Nero, sex serves power.</p>
                <p><strong>Gender Warfare:</strong> "Contra muliebres inlecebras subsidium a femina" - woman fights woman. The battle is gendered, with feminine corruption requiring feminine intervention.</p>
                <p><strong>Social Inversion:</strong> A freedwoman (Acte) has more moral authority than a patrician mother. The palace has inverted normal social hierarchies through corruption.</p>
                <p><strong>Public vs Private:</strong> "Pervulgatum esse incestum" - private shame becomes public knowledge. The scandal's exposure matters more than its truth.</p>
                <p><strong>Military Legitimacy:</strong> Ultimately, soldiers' tolerance determines imperial legitimacy. Moral authority rests on military support, not senatorial approval.</p>
            `,
            extension: `
                <h4>Extension Activities</h4>
                <p><strong>Comparison:</strong> Compare this passage with Suetonius's account of the same allegations (Nero 28). How do the versions differ? What does this reveal about ancient historiography?</p>
                <p><strong>Source Criticism:</strong> Research Cluvius Rufus and Fabius Rusticus. What other events do they describe differently? How does knowing their backgrounds affect our reading?</p>
                <p><strong>Gender Analysis:</strong> Track how Tacitus describes female sexuality throughout the Annals. Is Agrippina unique, or part of a pattern?</p>
                <p><strong>Literary Analysis:</strong> Examine Tacitus's use of indirect statement throughout this passage. How does grammatical distance affect our perception of the events?</p>
                <p><strong>Creative Task:</strong> Write Acte's speech to Nero warning him about the rumours. What arguments would be most effective?</p>
            `
        };

        function showResource(type) {
            document.querySelectorAll('.resource-icon').forEach(icon => {
                icon.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            document.getElementById('resourceDisplay').innerHTML = resources[type] || '<div class="placeholder-message">Resource not found</div>';
        }

        function setMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            const latinText = document.getElementById('latinText');
            latinText.className = `latin-text mode-${mode}`;

            const modeNames = {
                grammar: 'Grammar/Vocab Mode',
                style: 'Style Mode'
            };
            const modeDescriptions = {
                grammar: 'Click coloured phrases for vocabulary, grammar, and translation help',
                style: 'Click yellow highlights for literary devices and stylistic analysis'
            };

            document.getElementById('currentMode').textContent = modeNames[mode];
            document.getElementById('modeDescription').textContent = modeDescriptions[mode];

            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
                document.getElementById('defaultMessage').style.display = 'block';
            }
        }

        function showAnalysis(id) {
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
            }

            document.getElementById('defaultMessage').style.display = 'none';

            const card = document.getElementById(id);
            if (card) {
                card.classList.add('active');
                currentAnalysis = card;
            }
        }

        function toggleTranslation() {
            const box = document.getElementById('translationBox');
            const btn = document.querySelector('.toggle-btn');
            
            if (box.classList.contains('visible')) {
                box.classList.remove('visible');
                btn.textContent = 'Show Full Translation';
            } else {
                box.classList.add('visible');
                btn.textContent = 'Hide Full Translation';
            }
        }

        function revealTranslation(button) {
            const translationDiv = button.nextElementSibling;
            if (translationDiv.classList.contains('visible')) {
                translationDiv.classList.remove('visible');
                button.textContent = 'Show Translation';
            } else {
                translationDiv.classList.add('visible');
                button.textContent = 'Hide Translation';
            }
        }

        // Generate analysis cards from data
        window.addEventListener('DOMContentLoaded', function() {
            generateGrammarCards();
            generateStyleCards();
        });
    </script>
</body>
</html>
