<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classicalia - Tacitus Annals 14.5</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .logo-section {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .nav-section {
            padding: 1rem 0.5rem;
        }

        .nav-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #9ca3af;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            margin: 0.125rem 0;
            border-radius: 8px;
            text-decoration: none;
            color: #4b5563;
            font-size: 0.9rem;
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .nav-item.active {
            background: #eef2ff;
            color: #0066ff;
            font-weight: 500;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .main-content {
            margin-left: 240px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.875rem 2rem;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .content-wrapper {
            flex: 1;
            overflow-y: auto;
        }

        .content-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .lesson-header {
            margin-bottom: 2rem;
        }

        .lesson-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .lesson-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .lesson-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 1.5rem;
            align-items: start;
        }

        .card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        .card-body {
            padding: 1.5rem;
        }

        .tabs {
            display: flex;
            gap: 0.25rem;
            background: #f3f4f6;
            padding: 0.25rem;
            border-radius: 8px;
        }

        .tab {
            flex: 1;
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .tab.active {
            background: white;
            color: #0066ff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .latin-text {
            font-size: 1.25rem;
            line-height: 2.2;
            color: #1f2937;
            margin: 1.5rem 0;
        }

        .phrase {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
        }

        .phrase.phrase-1 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-1:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-2 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-2:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-3 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-3:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-4 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-4:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-5 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-5:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-6 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-6:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-7 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-7:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-8 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-8:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-9 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-9:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-10 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-10:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-11 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-11:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-12 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-12:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-13 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-13:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-14 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-14:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-15 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-15:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-16 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-16:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-17 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-17:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-18 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-18:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-19 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-19:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-20 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-20:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-21 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-21:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-22 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-22:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-23 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-23:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-24 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-24:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-25 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-25:hover { background: rgba(76, 175, 80, 0.3); }

        .highlight-style {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
            background: rgba(156, 163, 175, 0.2);
        }

        .highlight-style:hover {
            background: rgba(156, 163, 175, 0.35);
        }

        .highlight-style.active-a { background: rgba(59, 130, 246, 0.45) !important; }
        .highlight-style.active-b { background: rgba(239, 68, 68, 0.45) !important; }
        .highlight-style.active-c { background: rgba(34, 197, 94, 0.45) !important; }
        .highlight-style.active-d { background: rgba(168, 85, 247, 0.45) !important; }
        .highlight-style.active-single { background: rgba(234, 179, 8, 0.45) !important; }

        .mode-style .phrase {
            background: transparent !important;
            cursor: default;
        }

        .latin-text:not(.mode-style) .highlight-style {
            background: transparent;
            cursor: default;
            padding: 0;
        }

        .analysis-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            display: none;
        }

        .analysis-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-badge {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }

        .analysis-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .analysis-card p {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        .analysis-card .vocab-list {
            font-size: 0.85rem;
            line-height: 1.7;
            color: #4b5563;
            margin: 0.5rem 0;
        }

        .analysis-card strong {
            color: #0066ff;
        }

        .translation-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        .translation-text {
            display: none;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #059669;
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: rgba(5, 150, 105, 0.05);
            border-radius: 6px;
            border-left: 3px solid #059669;
        }

        .translation-text.visible {
            display: block;
        }

        .reveal-translation-btn {
            background: #0066ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reveal-translation-btn:hover {
            background: #0052cc;
        }

        .reveal-translation-btn.revealed {
            background: #10b981;
        }

        .reveal-translation-btn.revealed:hover {
            background: #059669;
        }

        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .default-message {
            text-align: center;
            padding: 2rem 1rem;
            color: #9ca3af;
            font-style: italic;
            font-size: 0.9rem;
        }

        .learning-objectives {
            background: linear-gradient(135deg, #eef2ff 0%, #f0f9ff 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #dbeafe;
        }

        .learning-objectives h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .learning-objectives p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .success-criteria {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .success-criteria h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .success-criteria ul {
            list-style: none;
            padding: 0;
        }

        .success-criteria li {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .success-criteria li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
        }

        @media (max-width: 1024px) {
            .lesson-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-section">
            <a href="../../../index.html" class="logo">
                <div class="logo-icon">C</div>
                <span class="logo-text">Classicalia</span>
            </a>
        </div>

        <nav class="nav-section">
            <div class="nav-title">Resources</div>
            <div class="nav-item active" onclick="showView('objectives')">
                <span class="nav-icon">üéØ</span>
                <span>Learning Intentions</span>
            </div>
            <div class="nav-item" onclick="showView('text')">
                <span class="nav-icon">üìñ</span>
                <span>Read</span>
            </div>
        </nav>
    </aside>

    <main class="main-content">
        <div class="top-bar"></div>

        <div class="content-wrapper">
            <div class="content-container">
                <header class="lesson-header">
                    <h1 class="lesson-title">The Failed Assassination</h1>
                    <div class="lesson-meta">
                        <span>üìï Tacitus Annals 14.5</span>
                        <span>‚è±Ô∏è 60 min</span>
                        <span>üìä A-Level</span>
                    </div>
                </header>

                <div class="lesson-layout">
                    <div>
                        <div class="card" id="objectivesCard">
                            <div class="card-body">
                                <div class="learning-objectives">
                                    <h3>üéØ Learning Intention</h3>
                                    <p>Understand how Tacitus dramatises the spectacular failure of Nero's assassination plot through vivid narrative, divine irony, and the contrast between mechanical planning and human chaos.</p>
                                    
                                    <div class="success-criteria">
                                        <h4>Success Criteria</h4>
                                        <ul>
                                            <li>I can analyse how Tacitus uses the perfect weather as divine commentary on the crime</li>
                                            <li>I can explain how mechanical failure exposes the limits of Roman engineering</li>
                                            <li>I can evaluate the contrast between "knowing" conspirators and "ignorant" crew</li>
                                            <li>I can identify how Acerronia's fatal loyalty demonstrates tragic misidentification</li>
                                            <li>I can assess Agrippina's strategic silence as an act of political intelligence</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="textCard" style="display: none;">
                            <div class="card-header">
                                <h3 class="card-title">Latin Text</h3>
                                <div class="tabs">
                                    <button class="tab active" onclick="setMode('grammar')">Grammar</button>
                                    <button class="tab" onclick="setMode('style')">Style</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="latin-text" id="latinText"></div>
                                
                                <div class="btn-group">
                                    <button class="btn" onclick="toggleFullTranslation()">Show Translation</button>
                                    <button class="btn" onclick="resetView()">Reset View</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="panelTitle">Getting Started</h3>
                            </div>
                            <div class="card-body" id="analysisPanel">
                                <div class="default-message" id="defaultMessage">
                                    Begin by reviewing the learning intentions, then move to the Read section to explore the Latin text
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const lessonData = {
            latinText: `<span class="phrase phrase-1" onclick="showAnalysis('phrase-1')"><span class="highlight-style" data-style="style-1" data-pattern="a" onclick="showStyleAnalysis('style-1'); event.stopPropagation();">noctem</span> <span class="highlight-style" data-style="style-1" data-pattern="b" onclick="showStyleAnalysis('style-1'); event.stopPropagation();">sideribus inlustrem</span> et <span class="highlight-style" data-style="style-1" data-pattern="b" onclick="showStyleAnalysis('style-1'); event.stopPropagation();">placido mari</span> <span class="highlight-style" data-style="style-1" data-pattern="a" onclick="showStyleAnalysis('style-1'); event.stopPropagation();">quietam</span></span> <span class="phrase phrase-2" onclick="showAnalysis('phrase-2')"><span class="highlight-style" data-style="style-2" data-pattern="single" onclick="showStyleAnalysis('style-2'); event.stopPropagation();">quasi convincendum ad scelus</span> dii praebuere.</span> <span class="phrase phrase-3" onclick="showAnalysis('phrase-3')">nec multum erat progressa navis,</span> <span class="phrase phrase-4" onclick="showAnalysis('phrase-4')">duobus e numero familiarium Agrippinam comitantibus,</span> <span class="phrase phrase-5" onclick="showAnalysis('phrase-5')">ex quis Crepereius Gallus haud procul gubernaculis adstabat,</span> <span class="phrase phrase-6" onclick="showAnalysis('phrase-6')">Acerronia super pedes cubitantis reclinis</span> <span class="phrase phrase-7" onclick="showAnalysis('phrase-7')">paenitentiam filii et reciperatam matris gratiam per gaudium memorabat,</span> <span class="phrase phrase-8" onclick="showAnalysis('phrase-8')">cum dato signo <span class="highlight-style" data-style="style-5" data-pattern="single" onclick="showStyleAnalysis('style-5'); event.stopPropagation();">ruere</span> tectum loci <span class="highlight-style" data-style="style-6" data-pattern="single" onclick="showStyleAnalysis('style-6'); event.stopPropagation();">multo plumbo grave</span>,</span> <span class="phrase phrase-9" onclick="showAnalysis('phrase-9');"><span class="highlight-style" data-style="style-7" data-pattern="single" onclick="showStyleAnalysis('style-7'); event.stopPropagation();">pressusque Crepereius et statim exanimatus est</span>:</span> <span class="phrase phrase-10" onclick="showAnalysis('phrase-10')">Agrippina et Acerronia <span class="highlight-style" data-style="style-3" data-pattern="single" onclick="showStyleAnalysis('style-3'); event.stopPropagation();">eminentibus lecti parietibus</span> ac <span class="highlight-style" data-style="style-4" data-pattern="single" onclick="showStyleAnalysis('style-4'); event.stopPropagation();">forte validioribus</span> <span class="highlight-style" data-style="style-8" data-pattern="single" onclick="showStyleAnalysis('style-8'); event.stopPropagation();">quam ut oneri cederent</span> protectae sunt.</span> <span class="phrase phrase-11" onclick="showAnalysis('phrase-11');"><span class="highlight-style" data-style="style-9" data-pattern="single" onclick="showStyleAnalysis('style-9'); event.stopPropagation();">nec dissolutio navigii sequebatur</span>,</span> <span class="phrase phrase-12" onclick="showAnalysis('phrase-12');"><span class="highlight-style" data-style="style-10" data-pattern="single" onclick="showStyleAnalysis('style-10'); event.stopPropagation();">turbatis omnibus et quod plerique ignari etiam conscios impediebant.</span></span> <span class="phrase phrase-13" onclick="showAnalysis('phrase-13');"><span class="highlight-style" data-style="style-11" data-pattern="single" onclick="showStyleAnalysis('style-11'); event.stopPropagation();">visum dehinc remigibus</span> unum in latus inclinare atque ita navem submergere:</span> <span class="phrase phrase-14" onclick="showAnalysis('phrase-14');"><span class="highlight-style" data-style="style-12" data-pattern="single" onclick="showStyleAnalysis('style-12'); event.stopPropagation();">sed neque ipsis promptus in rem subitam consensus</span>,</span> <span class="phrase phrase-15" onclick="showAnalysis('phrase-15');">et <span class="highlight-style" data-style="style-13" data-pattern="single" onclick="showStyleAnalysis('style-13'); event.stopPropagation();">alii contra nitentes</span> dedere facultatem <span class="highlight-style" data-style="style-14" data-pattern="single" onclick="showStyleAnalysis('style-14'); event.stopPropagation();">lenioris in mare iactus</span>.</span> <span class="phrase phrase-16" onclick="showAnalysis('phrase-16')">verum Acerronia, imprudentia <span class="highlight-style" data-style="style-15" data-pattern="single" onclick="showStyleAnalysis('style-15'); event.stopPropagation();">dum se Agrippinam esse</span> <span class="highlight-style" data-style="style-16" data-pattern="single" onclick="showStyleAnalysis('style-16'); event.stopPropagation();">utque subveniretur matri principis</span> clamitat,</span> <span class="phrase phrase-17" onclick="showAnalysis('phrase-17');"><span class="highlight-style" data-style="style-18" data-pattern="a" onclick="showStyleAnalysis('style-18'); event.stopPropagation();">contis</span> et <span class="highlight-style" data-style="style-18" data-pattern="b" onclick="showStyleAnalysis('style-18'); event.stopPropagation();">remis</span> et <span class="highlight-style" data-style="style-18" data-pattern="c" onclick="showStyleAnalysis('style-18'); event.stopPropagation();">quae fors obtulerat navalibus telis</span> conficitur:</span> <span class="phrase phrase-18" onclick="showAnalysis('phrase-18');"><span class="highlight-style" data-style="style-19" data-pattern="single" onclick="showStyleAnalysis('style-19'); event.stopPropagation();">Agrippina silens eoque minus adgnita</span></span> <span class="phrase phrase-19" onclick="showAnalysis('phrase-19');"><span class="highlight-style" data-style="style-20" data-pattern="single" onclick="showStyleAnalysis('style-20'); event.stopPropagation();">(unum tamen vulnus umero excepit)</span></span> <span class="phrase phrase-20" onclick="showAnalysis('phrase-20');"><span class="highlight-style" data-style="style-21" data-pattern="single" onclick="showStyleAnalysis('style-21'); event.stopPropagation();">nando</span>,</span> <span class="phrase phrase-21" onclick="showAnalysis('phrase-21');">deinde occursu <span class="highlight-style" data-style="style-22" data-pattern="single" onclick="showStyleAnalysis('style-22'); event.stopPropagation();">lenunculorum</span> <span class="highlight-style" data-style="style-23" data-pattern="single" onclick="showStyleAnalysis('style-23'); event.stopPropagation();">Lucrinum in lacum</span> vecta</span> <span class="phrase phrase-22" onclick="showAnalysis('phrase-22');"><span class="highlight-style" data-style="style-24" data-pattern="single" onclick="showStyleAnalysis('style-24'); event.stopPropagation();">villae suae infertur</span>.</span>`,

            fullTranslation: `The gods offered a night bright with stars and calm with a peaceful sea, as if to expose the crime. The ship had not advanced far; two from the number of her friends were accompanying Agrippina, of whom Crepereius Gallus was standing not far from the rudders, Acerronia, reclining above the feet of (Agrippina) who was lying down, was joyfully talking about the repentance of her son and the mother's recovered influence, when, at a given signal, the roof of the room, which was heavy with a considerable amount of lead, fell down. Crepereius was crushed and died immediately: Agrippina and Acerronia were protected by the high walls of the bed, which were, by chance, too strong to give way to the load (of the falling masonry). Nor did there follow any break-up of the ship, though everyone was confused and because the ignorant majority were hindering even those who were in the know. Then the rowers decided to lean on one side of the ship and thus sink it: but their agreement was not quick enough for the sudden event, and others pressing on the opposite side produced the opportunity for being cast more gently into the sea. But Acerronia, through bad judgement, while she shouted that she was Agrippina and to help the emperor's mother, was killed with poles, oars and whatever naval weapons chance had offered. Agrippina, remaining silent, and for that reason not recognised (she had, nevertheless, received one wound in the shoulder), by swimming and then meeting some small boats, was carried to the Lucrine Lake and brought to her villa.`,

            grammar: {
                'phrase-1': {
                    title: 'noctem sideribus inlustrem et placido mari quietam',
                    vocab: [
                        '<strong>noctem</strong> - night (accusative)',
                        '<strong>sideribus</strong> - with stars (ablative of means)',
                        '<strong>inlustrem</strong> - bright, brilliant (accusative)',
                        '<strong>et</strong> - and',
                        '<strong>placido mari</strong> - with calm sea (ablative absolute)',
                        '<strong>quietam</strong> - calm, peaceful (accusative)'
                    ],
                    grammar: 'Two parallel accusatives ("noctem...quietam") as objects of "praebuere". Ablative of means with "sideribus", ablative absolute with "placido mari".',
                    translation: 'a night bright with stars and calm with a peaceful sea'
                },
                'phrase-2': {
                    title: 'quasi convincendum ad scelus dii praebuere',
                    vocab: [
                        '<strong>quasi</strong> - as if',
                        '<strong>convincendum</strong> - for exposing (gerundive, neuter)',
                        '<strong>ad scelus</strong> - towards/for the crime',
                        '<strong>dii</strong> - the gods (nominative)',
                        '<strong>praebuere</strong> - they offered (perfect, 3rd plural)'
                    ],
                    grammar: '"Quasi" introduces comparative clause. Gerundive expressing purpose. "Dii" is the subject making divine will explicit.',
                    translation: 'as if to expose the crime, the gods offered'
                },
                'phrase-3': {
                    title: 'nec multum erat progressa navis',
                    vocab: [
                        '<strong>nec</strong> - nor, and not',
                        '<strong>multum</strong> - much, far (adverbial accusative)',
                        '<strong>erat progressa</strong> - had advanced (pluperfect, 3rd sing.)',
                        '<strong>navis</strong> - the ship (nominative)'
                    ],
                    grammar: 'Pluperfect active formed with perfect participle + imperfect of "sum". Adverbial accusative "multum".',
                    translation: 'nor had the ship advanced far'
                },
                'phrase-4': {
                    title: 'duobus e numero familiarium Agrippinam comitantibus',
                    vocab: [
                        '<strong>duobus</strong> - (with) two (ablative)',
                        '<strong>e numero</strong> - from the number',
                        '<strong>familiarium</strong> - of friends/attendants (genitive)',
                        '<strong>Agrippinam</strong> - Agrippina (accusative)',
                        '<strong>comitantibus</strong> - accompanying (present participle, ablative)'
                    ],
                    grammar: 'Ablative absolute construction. Present participle agreeing with "duobus".',
                    translation: 'with two from the number of her friends accompanying Agrippina'
                },
                'phrase-5': {
                    title: 'ex quis Crepereius Gallus haud procul gubernaculis adstabat',
                    vocab: [
                        '<strong>ex quis</strong> - from whom, of whom',
                        '<strong>Crepereius Gallus</strong> - Crepereius Gallus (nominative)',
                        '<strong>haud procul</strong> - not far',
                        '<strong>gubernaculis</strong> - from the rudders (ablative of separation)',
                        '<strong>adstabat</strong> - was standing (imperfect, 3rd sing.)'
                    ],
                    grammar: 'Relative clause continuing from ablative absolute. Ablative of separation with "procul".',
                    translation: 'of whom Crepereius Gallus was standing not far from the rudders'
                },
                'phrase-6': {
                    title: 'Acerronia super pedes cubitantis reclinis',
                    vocab: [
                        '<strong>Acerronia</strong> - Acerronia (nominative)',
                        '<strong>super pedes</strong> - above the feet',
                        '<strong>cubitantis</strong> - of (her) lying down (present participle, genitive)',
                        '<strong>reclinis</strong> - reclining (nominative)'
                    ],
                    grammar: 'Subject "Acerronia" with predicative adjective "reclinis". Genitive participle refers to Agrippina.',
                    translation: 'Acerronia, reclining above the feet of (her) lying down'
                },
                'phrase-7': {
                    title: 'paenitentiam filii et reciperatam matris gratiam per gaudium memorabat',
                    vocab: [
                        '<strong>paenitentiam</strong> - repentance (accusative)',
                        '<strong>filii</strong> - of (her) son (genitive)',
                        '<strong>et</strong> - and',
                        '<strong>reciperatam</strong> - recovered (perfect participle)',
                        '<strong>matris gratiam</strong> - the mother\'s favour (accusative)',
                        '<strong>per gaudium</strong> - through/with joy',
                        '<strong>memorabat</strong> - was recalling, was talking about (imperfect)'
                    ],
                    grammar: 'Imperfect sets the scene. Two accusatives as objects. Perfect participle modifies "gratiam".',
                    translation: 'was joyfully talking about the son\'s repentance and the mother\'s recovered favour'
                },
                'phrase-8': {
                    title: 'cum dato signo ruere tectum loci multo plumbo grave',
                    vocab: [
                        '<strong>cum</strong> - when',
                        '<strong>dato signo</strong> - when the signal was given (ablative absolute)',
                        '<strong>ruere</strong> - to collapse, to fall down (infinitive)',
                        '<strong>tectum</strong> - roof, ceiling (nominative)',
                        '<strong>loci</strong> - of the room (genitive)',
                        '<strong>multo plumbo</strong> - with much lead (ablative)',
                        '<strong>grave</strong> - heavy (nominative)'
                    ],
                    grammar: '"Cum" + ablative absolute. Historic infinitive "ruere" for dramatic effect. Ablative of cause with "plumbo".',
                    translation: 'when the signal was given, the roof of the room, heavy with much lead, to collapse'
                },
                'phrase-9': {
                    title: 'pressusque Crepereius et statim exanimatus est',
                    vocab: [
                        '<strong>pressus</strong> - crushed, pressed (perfect participle)',
                        '<strong>-que</strong> - and',
                        '<strong>Crepereius</strong> - Crepereius (nominative)',
                        '<strong>et</strong> - and',
                        '<strong>statim</strong> - immediately',
                        '<strong>exanimatus est</strong> - he died, was killed (perfect passive)'
                    ],
                    grammar: 'Perfect participle + perfect passive verb creates sequence. "Statim" emphasises instant death.',
                    translation: 'and Crepereius was crushed and immediately died'
                },
                'phrase-10': {
                    title: 'Agrippina et Acerronia...protectae sunt',
                    vocab: [
                        '<strong>Agrippina et Acerronia</strong> - Agrippina and Acerronia (nominative)',
                        '<strong>eminentibus lecti parietibus</strong> - by the projecting walls of the couch (ablative absolute)',
                        '<strong>ac forte validioribus</strong> - and by chance stronger (ablative)',
                        '<strong>quam ut oneri cederent</strong> - than that they would yield to the weight (result clause)',
                        '<strong>protectae sunt</strong> - were protected (perfect passive)'
                    ],
                    grammar: 'Ablative absolute. Comparative with result clause ("quam ut" + subjunctive).',
                    translation: 'Agrippina and Acerronia were protected by the projecting walls of the couch, which by chance were too strong to yield to the weight'
                },
                'phrase-11': {
                    title: 'nec dissolutio navigii sequebatur',
                    vocab: [
                        '<strong>nec</strong> - nor, and not',
                        '<strong>dissolutio</strong> - breaking up, dissolution (nominative)',
                        '<strong>navigii</strong> - of the ship (genitive)',
                        '<strong>sequebatur</strong> - was following (imperfect, 3rd sing.)'
                    ],
                    grammar: 'Simple imperfect. Subject "dissolutio" with genitive "navigii".',
                    translation: 'nor did the breaking up of the ship follow'
                },
                'phrase-12': {
                    title: 'turbatis omnibus et quod plerique ignari etiam conscios impediebant',
                    vocab: [
                        '<strong>turbatis omnibus</strong> - with everyone confused (ablative absolute)',
                        '<strong>et quod</strong> - and because',
                        '<strong>plerique</strong> - most people, the majority (nominative)',
                        '<strong>ignari</strong> - ignorant, not knowing (nominative)',
                        '<strong>etiam</strong> - even, also',
                        '<strong>conscios</strong> - those in the know (accusative)',
                        '<strong>impediebant</strong> - were hindering (imperfect)'
                    ],
                    grammar: 'Ablative absolute + causal clause ("quod" + indicative). Contrast between "ignari" and "conscios".',
                    translation: 'with everyone confused and because the ignorant majority were even hindering those in the know'
                },
                'phrase-13': {
                    title: 'visum dehinc remigibus unum in latus inclinare atque ita navem submergere',
                    vocab: [
                        '<strong>visum</strong> - it seemed (good) (perfect impersonal)',
                        '<strong>dehinc</strong> - then, next',
                        '<strong>remigibus</strong> - to the rowers (dative)',
                        '<strong>unum in latus</strong> - to one side',
                        '<strong>inclinare</strong> - to lean (infinitive)',
                        '<strong>atque ita</strong> - and thus',
                        '<strong>navem submergere</strong> - to sink the ship (infinitive)'
                    ],
                    grammar: 'Impersonal "visum" with dative + infinitives. Two complementary infinitives showing the plan.',
                    translation: 'then it seemed good to the rowers to lean to one side and thus sink the ship'
                },
                'phrase-14': {
                    title: 'sed neque ipsis promptus in rem subitam consensus',
                    vocab: [
                        '<strong>sed</strong> - but',
                        '<strong>neque</strong> - nor, and not',
                        '<strong>ipsis</strong> - for them (dative)',
                        '<strong>promptus</strong> - ready, quick (nominative)',
                        '<strong>in rem subitam</strong> - for the sudden situation',
                        '<strong>consensus</strong> - agreement (nominative)'
                    ],
                    grammar: 'Dative of possession. Predicative adjective "promptus".',
                    translation: 'but their agreement was not quick for the sudden situation'
                },
                'phrase-15': {
                    title: 'et alii contra nitentes dedere facultatem lenioris in mare iactus',
                    vocab: [
                        '<strong>et alii</strong> - and others',
                        '<strong>contra nitentes</strong> - pressing against (present participle)',
                        '<strong>dedere</strong> - gave, produced (perfect, 3rd plural)',
                        '<strong>facultatem</strong> - opportunity (accusative)',
                        '<strong>lenioris...iactus</strong> - of gentler casting (genitive)',
                        '<strong>in mare</strong> - into the sea'
                    ],
                    grammar: 'Present participle as substantive. Genitive with "facultatem". Comparative adjective.',
                    translation: 'and others pressing against gave the opportunity for a gentler casting into the sea'
                },
                'phrase-16': {
                    title: 'verum Acerronia, imprudentia dum se Agrippinam esse utque subveniretur matri principis clamitat',
                    vocab: [
                        '<strong>verum</strong> - but, however',
                        '<strong>Acerronia</strong> - Acerronia (nominative)',
                        '<strong>imprudentia</strong> - through imprudence (ablative of cause)',
                        '<strong>dum</strong> - while',
                        '<strong>se Agrippinam esse</strong> - that she was Agrippina (indirect statement)',
                        '<strong>ut...subveniretur</strong> - that help be given (purpose clause)',
                        '<strong>matri principis</strong> - to the emperor\'s mother (dative)',
                        '<strong>clamitat</strong> - she shouts (present, 3rd sing.)'
                    ],
                    grammar: 'Ablative of cause. "Dum" + present tense. Indirect statement + purpose clause after "clamitat".',
                    translation: 'but Acerronia, through imprudence, while she shouts that she is Agrippina and that help be given to the emperor\'s mother'
                },
                'phrase-17': {
                    title: 'contis et remis et quae fors obtulerat navalibus telis conficitur',
                    vocab: [
                        '<strong>contis</strong> - with poles (ablative of means)',
                        '<strong>et remis</strong> - and oars',
                        '<strong>et quae</strong> - and which/whatever',
                        '<strong>fors</strong> - chance (nominative)',
                        '<strong>obtulerat</strong> - had offered (pluperfect)',
                        '<strong>navalibus telis</strong> - naval weapons (ablative)',
                        '<strong>conficitur</strong> - she is killed (present passive)'
                    ],
                    grammar: 'Multiple ablatives of means. Relative clause. Historic present passive.',
                    translation: 'is killed with poles and oars and whatever naval weapons chance had offered'
                },
                'phrase-18': {
                    title: 'Agrippina silens eoque minus adgnita',
                    vocab: [
                        '<strong>Agrippina</strong> - Agrippina (nominative)',
                        '<strong>silens</strong> - silent, keeping quiet (present participle)',
                        '<strong>eo</strong> - for that reason, therefore',
                        '<strong>-que</strong> - and',
                        '<strong>minus</strong> - less',
                        '<strong>adgnita</strong> - recognised (perfect participle)'
                    ],
                    grammar: 'Present participle + perfect participle. "Eo...minus" = "for that reason less".',
                    translation: 'Agrippina, silent and for that reason less recognised'
                },
                'phrase-19': {
                    title: '(unum tamen vulnus umero excepit)',
                    vocab: [
                        '<strong>unum</strong> - one (accusative)',
                        '<strong>tamen</strong> - however, nevertheless',
                        '<strong>vulnus</strong> - wound (accusative)',
                        '<strong>umero</strong> - in/on the shoulder (ablative)',
                        '<strong>excepit</strong> - she received (perfect)'
                    ],
                    grammar: 'Parenthetical aside. Ablative of place where. Perfect tense.',
                    translation: '(she received, however, one wound in the shoulder)'
                },
                'phrase-20': {
                    title: 'nando',
                    vocab: [
                        '<strong>nando</strong> - by swimming (ablative gerund)'
                    ],
                    grammar: 'Ablative gerund expressing means.',
                    translation: 'by swimming'
                },
                'phrase-21': {
                    title: 'deinde occursu lenunculorum Lucrinum in lacum vecta',
                    vocab: [
                        '<strong>deinde</strong> - then, next',
                        '<strong>occursu</strong> - by the meeting (ablative)',
                        '<strong>lenunculorum</strong> - of little boats (genitive)',
                        '<strong>Lucrinum in lacum</strong> - to the Lucrine lake',
                        '<strong>vecta</strong> - having been carried (perfect participle)'
                    ],
                    grammar: 'Ablative of means. Perfect passive participle agreeing with "Agrippina".',
                    translation: 'then, having been carried by meeting little boats to the Lucrine lake'
                },
                'phrase-22': {
                    title: 'villae suae infertur',
                    vocab: [
                        '<strong>villae suae</strong> - to her villa (dative)',
                        '<strong>infertur</strong> - she is brought (present passive)'
                    ],
                    grammar: 'Dative of motion towards. Historic present passive.',
                    translation: 'she is brought to her villa'
                }
            },

            style: {
                'style-1': {
                    title: 'Chiasmus and Balance',
                    device: 'Balanced chiastic structure: "noctem sideribus inlustrem / placido mari quietam"',
                    effect: 'The two phrases mirror each other: noun-ablative-adjective / ablative-noun-adjective. This creates aesthetic perfection matching the perfect weather. The chiasmus makes the night unnaturally beautiful‚Äîtoo perfect, suggesting divine stage-setting for the crime to be exposed.',
                    pattern: 'ab',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - ABBA chiasmus:</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: noctem</span> <span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: sideribus inlustrem</span><br>et<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: placido mari</span> <span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: quietam</span><br><br>The structure mirrors itself: noun‚Üíablative‚Üíadjective becomes ablative‚Üínoun‚Üíadjective. Perfect balance = unnaturally perfect weather.</div>'
                },
                'style-2': {
                    title: 'Purposive Irony',
                    device: 'Gerundive of purpose: "quasi convincendum ad scelus" (as if for exposing the crime)',
                    effect: 'The divine purpose inverts Nero\'s intent. He planned perfect weather to hide murder; the gods provide it to expose murder. "Convincendum" (for proving/exposing) makes the weather forensic evidence. The grammar positions the gods as witnesses testifying against Nero.',
                    pattern: 'single'
                },
                'style-3': {
                    title: 'Architectural Detail',
                    device: 'Concrete detail: "eminentibus lecti parietibus" (projecting walls of the couch)',
                    effect: 'The specific furniture construction becomes plot-critical. "Eminentibus" (projecting, standing out) suggests these weren\'t flush but raised‚Äîarchitectural detail that saves lives. Tacitus makes Roman interior design a character in the drama.',
                    pattern: 'single'
                },
                'style-4': {
                    title: 'Fortune Personified',
                    device: 'Personification through "forte" (by chance) + result clause',
                    effect: 'Fortune intervenes as independent agent. The walls were "forte validioribus quam ut...cederent" (by chance too strong to yield). This grammatical structure makes luck seem like conscious choice‚Äîchance saving Agrippina despite Nero\'s planning.',
                    pattern: 'single'
                },
                'style-5': {
                    title: 'Historic Infinitive',
                    device: 'Historic infinitive: "ruere" (to collapse)',
                    effect: 'The bare infinitive replaces expected perfect tense, creating cinematic immediacy. We don\'t read "the roof collapsed" (past, finished) but "to collapse"‚Äîwe\'re watching it happen in slow motion. The infinitive freezes the moment of mechanical failure, making the assassination attempt\'s climax feel eternal.',
                    pattern: 'single'
                },
                'style-6': {
                    title: 'Weight Specification',
                    device: 'Technical detail: "multo plumbo grave" (heavy with much lead)',
                    effect: 'Tacitus specifies the murder weapon\'s engineering. "Multo" (with much) quantifies the lead; "grave" (heavy) states the obvious result‚Äîbut stating it emphasises premeditation. This wasn\'t accidental collapse but calculated mass: someone measured, someone weighted, someone tested. The technical language exposes engineering as murder method.',
                    pattern: 'single'
                },
                'style-7': {
                    title: 'Abrupt Tempo',
                    device: 'Staccato rhythm: "pressusque Crepereius et statim exanimatus est"',
                    effect: 'Three quick clauses‚Äîcrushed, and, immediately, dead. "Statim" (immediately) eliminates any gap between impact and death. No suffering described, no dramatic lingering‚Äîjust instant obliteration. The swift grammar mirrors swift death, showing how quickly Nero\'s plot kills the innocent bystander.',
                    pattern: 'single'
                },
                'style-8': {
                    title: 'Result Clause Irony',
                    device: 'Result clause: "forte validioribus quam ut oneri cederent" (by chance too strong to yield)',
                    effect: 'The "quam ut" construction creates an equation: walls SO strong THAT they couldn\'t yield to weight. But "forte" (by chance) makes this engineering accident. Nero calculated everything except furniture quality. The result clause mathematically proves that random Roman craftsmanship defeated imperial murder design.',
                    pattern: 'single'
                },
                'style-9': {
                    title: 'Negative Litotes',
                    device: 'Litotes: "nec dissolutio navigii sequebatur" (nor did dissolution of ship follow)',
                    effect: 'Tacitus states what DIDN\'T happen‚Äîthe ship didn\'t break up as planned. This negative phrasing emphasises failure: the elaborate mechanism failed at every stage. "Sequebatur" (was following) implies sequence, causation‚Äîbut the expected chain of events simply stops. Grammar enacts mechanical breakdown.',
                    pattern: 'single'
                },
                'style-10': {
                    title: 'Chaos Depicted',
                    device: 'Ablative absolute + causal clause: "turbatis omnibus et quod plerique ignari etiam conscios impediebant"',
                    effect: 'The sentence structure itself is chaotic: an ablative absolute (everyone confused) + a "quod" clause (because majority ignorant) + "etiam" (even) + "conscios" (those knowing). Multiple clauses pile up showing how ignorance physically blocks knowledge‚Äîthe grammar tangles like the people on deck, where not-knowing actively prevents those who know from acting.',
                    pattern: 'single'
                },
                'style-11': {
                    title: 'Impersonal Verb',
                    device: 'Impersonal construction: "visum dehinc remigibus" (it seemed good to the rowers)',
                    effect: 'No subject acts‚Äî"it seemed" suggests collective decision emerging from chaos. "Visum" is passive, impersonal, vague‚Äîwho decided? The rowers as group? The grammar shows conspiracy functioning: no individual responsibility, just group action materialising. Plan B appears without an author.',
                    pattern: 'single'
                },
                'style-12': {
                    title: 'Negative Inversion',
                    device: 'Double negative: "sed neque ipsis promptus...consensus" (but not to them ready...agreement)',
                    effect: 'Tacitus writes "not ready" instead of "slow"‚Äîthe negative form emphasises absence of what should be there. Conspiracies need instant coordination; "neque...promptus" shows it missing. The syntax itself is not-ready, twisted, requiring readers to untangle the negative to find meaning‚Äîmirroring rowers\' failure to coordinate.',
                    pattern: 'single'
                },
                'style-13': {
                    title: 'Structural Balance',
                    device: 'Balanced opposition: "alii contra nitentes" (others pressing against)',
                    effect: 'After conspirators try tipping one way, "alii contra" (others opposite) creates perfect physical opposition. "Contra" (against) + "nitentes" (pressing, straining) shows equal forces cancelling. The balanced grammar depicts balanced forces‚Äîstalemate expressed through syntax. The sentence structure IS the failed physics.',
                    pattern: 'single'
                },
                'style-14': {
                    title: 'Comparative as Irony',
                    device: 'Comparative outcome: "lenioris in mare iactus" (gentler casting into sea)',
                    effect: '"Lenioris" (gentler, softer) is grotesque understatement‚Äîbeing thrown into Mediterranean at night. But grammatically it\'s true: compared to crushing by lead or drowning trapped in hull, this IS gentler. The comparative forces us to measure degrees of murder method‚Äîwhich shows how thoroughly murder has infected every option.',
                    pattern: 'single'
                },
                'style-15': {
                    title: 'Fatal Conjunction',
                    device: 'Temporal clause: "dum se Agrippinam esse...clamitat" (while she shouts she is Agrippina)',
                    effect: '"Dum" + present = during, throughout, continuously. The present tense "clamitat" shows her shouting in progress when death comes. The grammar captures the exact moment: she\'s still shouting identity when killed. The temporal clause becomes death warrant‚Äîclaiming identity WHILE being killed for that identity.',
                    pattern: 'single'
                },
                'style-16': {
                    title: 'Purpose Inversion',
                    device: 'Purpose clause: "utque subveniretur matri principis" (and that help be given to emperor\'s mother)',
                    effect: 'Acerronia\'s goal‚Äîrescue‚Äîbecomes her doom. "Subveniretur" (be helped) is passive subjunctive of purpose: she wants help TO BE given. But naming "matri principis" (emperor\'s mother) identifies the target for conspirators. The purpose clause expresses noble intention that causes opposite result‚Äîgrammar as tragic irony.',
                    pattern: 'single'
                },
                'style-17': {
                    title: 'Improvised Weapons',
                    device: 'Relative clause: "quae fors obtulerat" (which chance had offered)',
                    effect: '"Fors" (chance, luck) personified as quartermaster distributing weapons. "Obtulerat" (had offered, presented) makes randomness seem generous‚Äîhere\'s a pole! here\'s an oar! The pluperfect shows weapons were already there, waiting. Tacitus makes murder weapons emerge from surroundings through grammar of happenstance.',
                    pattern: 'single'
                },
                'style-18': {
                    title: 'Tricolon of Murder',
                    device: 'Tricolon crescendo: "contis et remis et quae fors obtulerat navalibus telis"',
                    effect: 'Three weapon types escalate: poles (contis), oars (remis), whatever naval weapons chance offered. The final clause is longest, most elaborate‚Äîbuilding to "navalibus telis" (naval weapons, military term). The tricolon transforms boat equipment into arsenal. Grammar makes mundane objects increasingly lethal through rhetorical accumulation.',
                    pattern: 'abc',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - ABC tricolon crescendo:</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: contis</span> (poles - 1 word)<br>et<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: remis</span> (oars - 1 word)<br>et<br><span style="background: rgba(34, 197, 94, 0.4); padding: 2px 6px; border-radius: 3px;">C: quae fors obtulerat navalibus telis</span> (whatever chance offered as naval weapons - 6 words!)<br><br>Each element escalates: simple ‚Üí simple ‚Üí elaborate military term. The lengthening clauses mirror increasing lethality.</div>'
                },
                'style-19': {
                    title: 'Silence as Strategy',
                    device: 'Participle contrast: "Agrippina silens eoque minus adgnita"',
                    effect: '"Silens" (silent) + "eoque" (for that reason) creates cause-effect: BECAUSE silent, THEREFORE unrecognised. Agrippina\'s silence is active strategy, not passive fear. Present participle shows ongoing action‚Äîshe maintains silence deliberately. "Minus adgnita" (less recognised) = survival through invisibility. Grammar makes silence tactical.',
                    pattern: 'single'
                },
                'style-20': {
                    title: 'Parenthetical Wound',
                    device: 'Parenthesis: "(unum tamen vulnus umero excepit)"',
                    effect: 'The parentheses physically separate the wound from the escape narrative‚Äîgrammatically minimising it as Agrippina herself must minimise it to survive. "Tamen" (however, nevertheless) concedes the injury\'s reality while "unum" (one) limits damage. The parenthetical syntax enacts her own mental bracketing of pain to focus on escape.',
                    pattern: 'single'
                },
                'style-21': {
                    title: 'Ablative of Means',
                    device: 'Gerund: "nando" (by swimming)',
                    effect: 'Single word, single ablative gerund. No elaboration, no description‚Äîjust the method. After elaborate murder mechanisms (lead, collapsing roofs, coordinated rowing), survival is one word: swimming. The brutal simplicity shows Agrippina needs no engineering, no conspiracy‚Äîjust physical capability Nero\'s plot never considered.',
                    pattern: 'single'
                },
                'style-22': {
                    title: 'Diminutive Irony',
                    device: 'Diminutive: "lenunculorum" (little boats)',
                    effect: 'The diminutive suffix "-cul-" makes these tiny boats, fishing boats, nobody boats. After Nero\'s elaborate death-ship ("ornatior"‚Äîmore ornate), Agrippina\'s salvation comes from "lenunculi"‚Äîlittle dingies. The grammatical diminishment emphasises scale reversal: grand assassination defeated by small rescue. Diminutive = survival.',
                    pattern: 'single'
                },
                'style-23': {
                    title: 'Geographic Precision',
                    device: 'Place reference: "Lucrinum in lacum" (into Lucrine lake)',
                    effect: 'Tacitus specifies exact location‚Äînot just "to shore" but "into Lucrine lake." The geographic precision documents escape route, creates factual authority, and subtly shows Agrippina\'s knowledge of local waters. She doesn\'t swim randomly; she swims TO somewhere specific. Geography becomes evidence of her competence under pressure.',
                    pattern: 'single'
                },
                'style-24': {
                    title: 'Passive Arrival',
                    device: 'Passive verb: "villae suae infertur" (is brought to her own villa)',
                    effect: '"Infertur" (is brought/carried) keeps Agrippina passive‚Äîothers bring her. But "villae suae" (HER villa) makes the destination hers. The passive grammar contrasts with active possession: she\'s carried (vulnerable) but to her territory (powerful). The syntax holds both states: defeated victim arriving at seat of power.',
                    pattern: 'single'
                },
                'style-25': {
                    title: 'Failed Sequence',
                    device: 'Narrative progression: signal ‚Üí collapse ‚Üí death ‚Üí survival ‚Üí chaos ‚Üí failed plan B',
                    effect: 'Tacitus structures the passage as mechanical sequence breaking down at each step. "Dato signo" (signal given) starts it‚Äîthen each stage fails. Grammar follows plot failure: planned sequence (signal ‚Üí result) degrades into chaos (everyone confused ‚Üí opposing forces ‚Üí improvisation). Syntax enacts the assassination coming apart.',
                    pattern: 'single'
                }
            }
        };

        let currentAnalysis = null;
        let currentMode = 'grammar';
        let currentView = 'objectives';
        let currentStyleId = null;

        document.addEventListener('DOMContentLoaded', function() {
            loadLesson();
        });

        function loadLesson() {
            const latinTextEl = document.getElementById('latinText');
            latinTextEl.innerHTML = lessonData.latinText;
        }

        function showView(view) {
            currentView = view;
            
            if (event && event.currentTarget) {
                document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            }

            const objectivesCard = document.getElementById('objectivesCard');
            const textCard = document.getElementById('textCard');
            const panelTitle = document.getElementById('panelTitle');
            const analysisPanel = document.getElementById('analysisPanel');

            if (view === 'objectives') {
                objectivesCard.style.display = 'block';
                textCard.style.display = 'none';
                panelTitle.textContent = 'Getting Started';
                analysisPanel.innerHTML = '<div class="default-message">Begin by reviewing the learning intentions, then move to the Read section to explore the Latin text</div>';
            } else if (view === 'text') {
                objectivesCard.style.display = 'none';
                textCard.style.display = 'block';
                panelTitle.textContent = 'Analysis';
                analysisPanel.innerHTML = '<div class="default-message" id="defaultMessage">Click any coloured phrase to see vocabulary and grammar</div>';
                
                for (const [id, data] of Object.entries(lessonData.grammar)) {
                    const card = createGrammarCard(id, data);
                    analysisPanel.appendChild(card);
                }
                for (const [id, data] of Object.entries(lessonData.style)) {
                    const card = createStyleCard(id, data);
                    analysisPanel.appendChild(card);
                }
            }

            currentAnalysis = null;
            currentStyleId = null;
        }

        function setMode(mode) {
            currentMode = mode;
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            const latinText = document.getElementById('latinText');
            if (mode === 'style') {
                latinText.classList.add('mode-style');
            } else {
                latinText.classList.remove('mode-style');
            }
            
            clearAllHighlights();
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            currentStyleId = null;
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
        }

        function clearAllHighlights() {
            document.querySelectorAll('.highlight-style').forEach(el => {
                el.classList.remove('active-a', 'active-b', 'active-c', 'active-d', 'active-single');
            });
        }

        function showAnalysis(phraseId) {
            if (currentView !== 'text') return;
            
            if (phraseId.startsWith('style') && currentMode !== 'style') {
                return;
            }
            if (phraseId.startsWith('phrase') && currentMode === 'style') {
                return;
            }
            
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'none';
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
            }
            
            const card = document.getElementById(phraseId);
            if (card) {
                card.classList.add('active');
                currentAnalysis = card;
                card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        function showStyleAnalysis(styleId) {
            if (currentMode !== 'style') return;
            
            if (currentStyleId !== styleId) {
                clearAllHighlights();
                currentStyleId = styleId;
            }
            
            const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
            const styleData = lessonData.style[styleId];
            
            if (styleData && styleData.pattern) {
                const pattern = styleData.pattern;
                
                if (pattern === 'single') {
                    elements.forEach(el => el.classList.add('active-single'));
                } else if (pattern === 'ab') {
                    // For chiasmus ABBA - elements have data-pattern="a" or "b"
                    elements.forEach(el => {
                        const elPattern = el.getAttribute('data-pattern');
                        if (elPattern === 'a') {
                            el.classList.add('active-a');
                        } else if (elPattern === 'b') {
                            el.classList.add('active-b');
                        }
                    });
                } else if (pattern === 'abc') {
                    // For tricolon - elements have data-pattern="a", "b", or "c"
                    elements.forEach(el => {
                        const elPattern = el.getAttribute('data-pattern');
                        if (elPattern === 'a') {
                            el.classList.add('active-a');
                        } else if (elPattern === 'b') {
                            el.classList.add('active-b');
                        } else if (elPattern === 'c') {
                            el.classList.add('active-c');
                        }
                    });
                } else if (pattern === 'aaa') {
                    // All get the same colour
                    elements.forEach(el => el.classList.add('active-a'));
                }
            }
            
            showAnalysis(styleId);
        }

        function createGrammarCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            let vocabHTML = data.vocab.map(v => `<p>‚Ä¢ ${v}</p>`).join('');
            
            card.innerHTML = `
                <div class="analysis-badge">Grammar & Vocabulary</div>
                <h4>${data.title}</h4>
                <div class="vocab-list">${vocabHTML}</div>
                <p><strong>Grammar:</strong> ${data.grammar}</p>
                <div class="translation-section">
                    <button class="reveal-translation-btn" onclick="revealTranslation('${id}')">Reveal Translation</button>
                    <div class="translation-text" id="${id}-translation">
                        <strong>Translation:</strong> "${data.translation}"
                    </div>
                </div>
            `;
            
            return card;
        }

        function revealTranslation(cardId) {
            const translationEl = document.getElementById(cardId + '-translation');
            const button = event.currentTarget;
            
            if (translationEl && !translationEl.classList.contains('visible')) {
                translationEl.classList.add('visible');
                button.textContent = '‚úì Translation Revealed';
                button.classList.add('revealed');
            }
        }

        function createStyleCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            const visualHTML = data.visual ? data.visual : '';
            
            card.innerHTML = `
                <div class="analysis-badge">Literary Device</div>
                <h4>${data.title}</h4>
                <p><strong>Device:</strong> ${data.device}</p>
                <p><strong>Effect:</strong> ${data.effect}</p>
                ${visualHTML}
            `;
            
            return card;
        }

        function toggleFullTranslation() {
            const existing = document.getElementById('fullTranslationBox');
            if (existing) {
                existing.remove();
                event.currentTarget.textContent = 'Show Translation';
                return;
            }
            
            const translationBox = document.createElement('div');
            translationBox.id = 'fullTranslationBox';
            translationBox.style.cssText = 'background: rgba(230, 240, 255, 0.8); border-radius: 12px; padding: 1.5rem; margin-top: 1rem; border: 1px solid rgba(0, 102, 255, 0.2);';
            translationBox.innerHTML = `
                <h4 style="font-size: 0.9rem; font-weight: 600; color: #0066ff; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem;">Full Translation</h4>
                <p style="font-size: 1rem; line-height: 1.8; color: #333;">${lessonData.fullTranslation}</p>
            `;
            
            document.querySelector('.btn-group').insertAdjacentElement('beforebegin', translationBox);
            event.currentTarget.textContent = 'Hide Translation';
        }

        function resetView() {
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            
            clearAllHighlights();
            currentStyleId = null;
            
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
            
            const fullTransBox = document.getElementById('fullTranslationBox');
            if (fullTransBox) fullTransBox.remove();
        }
    </script>
</body>
</html>
