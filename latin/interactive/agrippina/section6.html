<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classicalia - Tacitus Annals 14.6</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .logo-section {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .nav-section {
            padding: 1rem 0.5rem;
        }

        .nav-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #9ca3af;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            margin: 0.125rem 0;
            border-radius: 8px;
            text-decoration: none;
            color: #4b5563;
            font-size: 0.9rem;
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .nav-item.active {
            background: #eef2ff;
            color: #0066ff;
            font-weight: 500;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .main-content {
            margin-left: 240px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.875rem 2rem;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .content-wrapper {
            flex: 1;
            overflow-y: auto;
        }

        .content-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .lesson-header {
            margin-bottom: 2rem;
        }

        .lesson-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .lesson-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .lesson-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 1.5rem;
            align-items: start;
        }

        .card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        .card-body {
            padding: 1.5rem;
        }

        .tabs {
            display: flex;
            gap: 0.25rem;
            background: #f3f4f6;
            padding: 0.25rem;
            border-radius: 8px;
        }

        .tab {
            flex: 1;
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .tab.active {
            background: white;
            color: #0066ff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .latin-text {
            font-size: 1.25rem;
            line-height: 2.2;
            color: #1f2937;
            margin: 1.5rem 0;
        }

        .phrase {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
        }

        .phrase.phrase-1 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-1:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-2 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-2:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-3 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-3:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-4 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-4:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-5 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-5:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-6 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-6:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-7 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-7:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-8 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-8:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-9 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-9:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-10 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-10:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-11 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-11:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-12 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-12:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-13 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-13:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-14 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-14:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-15 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-15:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-16 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-16:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-17 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-17:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-18 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-18:hover { background: rgba(0, 188, 212, 0.3); }

        .highlight-style {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
            background: rgba(156, 163, 175, 0.2);
        }

        .highlight-style:hover {
            background: rgba(156, 163, 175, 0.35);
        }

        .highlight-style.active-a { background: rgba(59, 130, 246, 0.45) !important; }
        .highlight-style.active-b { background: rgba(239, 68, 68, 0.45) !important; }
        .highlight-style.active-c { background: rgba(34, 197, 94, 0.45) !important; }
        .highlight-style.active-d { background: rgba(168, 85, 247, 0.45) !important; }
        .highlight-style.active-single { background: rgba(234, 179, 8, 0.45) !important; }

        .mode-style .phrase {
            background: transparent !important;
            cursor: default;
        }

        .latin-text:not(.mode-style) .highlight-style {
            background: transparent;
            cursor: default;
            padding: 0;
        }

        .analysis-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            display: none;
        }

        .analysis-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-badge {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }

        .analysis-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .analysis-card p {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        .analysis-card .vocab-list {
            font-size: 0.85rem;
            line-height: 1.7;
            color: #4b5563;
            margin: 0.5rem 0;
        }

        .analysis-card strong {
            color: #0066ff;
        }

        .translation-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        .translation-text {
            display: none;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #059669;
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: rgba(5, 150, 105, 0.05);
            border-radius: 6px;
            border-left: 3px solid #059669;
        }

        .translation-text.visible {
            display: block;
        }

        .reveal-translation-btn {
            background: #0066ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reveal-translation-btn:hover {
            background: #0052cc;
        }

        .reveal-translation-btn.revealed {
            background: #10b981;
        }

        .reveal-translation-btn.revealed:hover {
            background: #059669;
        }

        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .default-message {
            text-align: center;
            padding: 2rem 1rem;
            color: #9ca3af;
            font-style: italic;
            font-size: 0.9rem;
        }

        .learning-objectives {
            background: linear-gradient(135deg, #eef2ff 0%, #f0f9ff 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #dbeafe;
        }

        .learning-objectives h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .learning-objectives p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .success-criteria {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .success-criteria h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .success-criteria ul {
            list-style: none;
            padding: 0;
        }

        .success-criteria li {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .success-criteria li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
        }

        @media (max-width: 1024px) {
            .lesson-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-section">
            <a href="../../../index.html" class="logo">
                <div class="logo-icon">C</div>
                <span class="logo-text">Classicalia</span>
            </a>
        </div>

        <nav class="nav-section">
            <div class="nav-title">Resources</div>
            <div class="nav-item active" onclick="showView('objectives')">
                <span class="nav-icon">üéØ</span>
                <span>Learning Intentions</span>
            </div>
            <div class="nav-item" onclick="showView('text')">
                <span class="nav-icon">üìñ</span>
                <span>Read</span>
            </div>
        </nav>
    </aside>

    <main class="main-content">
        <div class="top-bar"></div>

        <div class="content-wrapper">
            <div class="content-container">
                <header class="lesson-header">
                    <h1 class="lesson-title">Agrippina's Response</h1>
                    <div class="lesson-meta">
                        <span>üìï Tacitus Annals 14.6</span>
                        <span>‚è±Ô∏è 60 min</span>
                        <span>üìä A-Level</span>
                    </div>
                </header>

                <div class="lesson-layout">
                    <div>
                        <div class="card" id="objectivesCard">
                            <div class="card-body">
                                <div class="learning-objectives">
                                    <h3>üéØ Learning Intention</h3>
                                    <p>Understand how Tacitus presents Agrippina's analytical intelligence and strategic performance as she pieces together evidence of assassination whilst staging a calculated survival response.</p>
                                    
                                    <div class="success-criteria">
                                        <h4>Success Criteria</h4>
                                        <ul>
                                            <li>I can analyse how Tacitus structures Agrippina's forensic reasoning through accumulated evidence</li>
                                            <li>I can explain how the phrase "terrestre machinamentum" reveals her technical understanding</li>
                                            <li>I can evaluate Agrippina's strategic use of dissimulatio through performance vs. reality</li>
                                            <li>I can identify how thanking Nero's "good fortune" functions as psychological warfare</li>
                                            <li>I can assess the significance of sealing Acerronia's estate as the only genuine action</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="textCard" style="display: none;">
                            <div class="card-header">
                                <h3 class="card-title">Latin Text</h3>
                                <div class="tabs">
                                    <button class="tab active" onclick="setMode('grammar')">Grammar</button>
                                    <button class="tab" onclick="setMode('style')">Style</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="latin-text" id="latinText"></div>
                                
                                <div class="btn-group">
                                    <button class="btn" onclick="toggleFullTranslation()">Show Translation</button>
                                    <button class="btn" onclick="resetView()">Reset View</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="panelTitle">Getting Started</h3>
                            </div>
                            <div class="card-body" id="analysisPanel">
                                <div class="default-message" id="defaultMessage">
                                    Begin by reviewing the learning intentions, then move to the Read section to explore the Latin text
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const lessonData = {
            latinText: `<span class="phrase phrase-1" onclick="showAnalysis('phrase-1')"><span class="highlight-style" data-style="style-1" data-pattern="single" onclick="showStyleAnalysis('style-1'); event.stopPropagation();">illic reputans</span> ideo se <span class="highlight-style" data-style="style-2" data-pattern="single" onclick="showStyleAnalysis('style-2'); event.stopPropagation();">fallacibus litteris</span> accitam et <span class="highlight-style" data-style="style-3" data-pattern="single" onclick="showStyleAnalysis('style-3'); event.stopPropagation();">honore praecipuo habitam</span>,</span> <span class="phrase phrase-2" onclick="showAnalysis('phrase-2')">quodque <span class="highlight-style" data-style="style-4" data-pattern="single" onclick="showStyleAnalysis('style-4'); event.stopPropagation();">litus iuxta</span> <span class="highlight-style" data-style="style-5" data-pattern="a" onclick="showStyleAnalysis('style-5'); event.stopPropagation();">non ventis acta</span>, <span class="highlight-style" data-style="style-5" data-pattern="b" onclick="showStyleAnalysis('style-5'); event.stopPropagation();">non saxis impulsa</span> navis <span class="highlight-style" data-style="style-6" data-pattern="single" onclick="showStyleAnalysis('style-6'); event.stopPropagation();">summa sui parte</span> <span class="highlight-style" data-style="style-7" data-pattern="single" onclick="showStyleAnalysis('style-7'); event.stopPropagation();">veluti terrestre machinamentum</span> concidisset;</span> <span class="phrase phrase-3" onclick="showAnalysis('phrase-3');"><span class="highlight-style" data-style="style-8" data-pattern="single" onclick="showStyleAnalysis('style-8'); event.stopPropagation();">observans</span> etiam Acerroniae necem, <span class="highlight-style" data-style="style-9" data-pattern="single" onclick="showStyleAnalysis('style-9'); event.stopPropagation();">simul suum vulnus aspiciens</span>,</span> <span class="phrase phrase-4" onclick="showAnalysis('phrase-4');"><span class="highlight-style" data-style="style-10" data-pattern="single" onclick="showStyleAnalysis('style-10'); event.stopPropagation();">solum insidiarum remedium</span> esse, <span class="highlight-style" data-style="style-11" data-pattern="single" onclick="showStyleAnalysis('style-11'); event.stopPropagation();">si non intellegerentur</span>;</span> <span class="phrase phrase-5" onclick="showAnalysis('phrase-5');">misitque libertum Agerinum qui nuntiaret filio <span class="highlight-style" data-style="style-12" data-pattern="a" onclick="showStyleAnalysis('style-12'); event.stopPropagation();">benignitate deum</span> et <span class="highlight-style" data-style="style-12" data-pattern="b" onclick="showStyleAnalysis('style-12'); event.stopPropagation();">fortuna eius</span> evasisse gravem casum;</span> <span class="phrase phrase-6" onclick="showAnalysis('phrase-6');"><span class="highlight-style" data-style="style-13" data-pattern="single" onclick="showStyleAnalysis('style-13'); event.stopPropagation();">orare</span> ut <span class="highlight-style" data-style="style-14" data-pattern="single" onclick="showStyleAnalysis('style-14'); event.stopPropagation();">quamvis periculo matris exterritus</span> <span class="highlight-style" data-style="style-15" data-pattern="single" onclick="showStyleAnalysis('style-15'); event.stopPropagation();">visendi curam</span> differret;</span> <span class="phrase phrase-7" onclick="showAnalysis('phrase-7');">sibi <span class="highlight-style" data-style="style-16" data-pattern="single" onclick="showStyleAnalysis('style-16'); event.stopPropagation();">ad praesens</span> quiete opus.</span> <span class="phrase phrase-8" onclick="showAnalysis('phrase-8');">atque interim <span class="highlight-style" data-style="style-17" data-pattern="single" onclick="showStyleAnalysis('style-17'); event.stopPropagation();">securitate simulata</span> <span class="highlight-style" data-style="style-18" data-pattern="a" onclick="showStyleAnalysis('style-18'); event.stopPropagation();">medicamina vulneri</span> et <span class="highlight-style" data-style="style-18" data-pattern="b" onclick="showStyleAnalysis('style-18'); event.stopPropagation();">fomenta corpori</span> <span class="highlight-style" data-style="style-19" data-pattern="single" onclick="showStyleAnalysis('style-19'); event.stopPropagation();">adhibet</span>;</span> <span class="phrase phrase-9" onclick="showAnalysis('phrase-9');">testamentum Acerroniae <span class="highlight-style" data-style="style-20" data-pattern="a" onclick="showStyleAnalysis('style-20'); event.stopPropagation();">requiri</span> bonaque <span class="highlight-style" data-style="style-20" data-pattern="b" onclick="showStyleAnalysis('style-20'); event.stopPropagation();">obsignari</span> iubet,</span> <span class="phrase phrase-10" onclick="showAnalysis('phrase-10');"><span class="highlight-style" data-style="style-21" data-pattern="single" onclick="showStyleAnalysis('style-21'); event.stopPropagation();">id tantum non per simulationem</span>.</span>`,

            fullTranslation: `There, reflecting that she had been summoned for that reason by a false letter and held in particular respect, and that the ship near the shore had not been driven by the winds, not dashed onto rocks, (but) had collapsed in the upper part of itself, like a land contrivance; noting also the slaughter of Acerronia, at the same time looking at her own wound, (she realised that) the only remedy against treachery was if it was not recognised; therefore she sent her freedman Agerinus to announce to her son that she had escaped a serious disaster through the kindness of the gods and his good fortune; she begged him to postpone the duty of visiting her, however much he was frightened by his mother's danger; for the time being, she needed rest. And in the meantime, feigning a carefree attitude, she applied antidotes to the wound and potions for her body; she ordered Acerronia's will to be sought out and her possessions to be sealed; this was the only thing not done as a pretence.`,

            grammar: {
                'phrase-1': {
                    title: 'illic reputans...fallacibus litteris accitam et honore praecipuo habitam',
                    vocab: [
                        '<strong>illic</strong> - there, in that place',
                        '<strong>reputans</strong> - reflecting, considering (present participle)',
                        '<strong>ideo</strong> - for that reason, therefore',
                        '<strong>se</strong> - herself (accusative)',
                        '<strong>fallacibus litteris</strong> - by deceptive/false letters (ablative)',
                        '<strong>accitam</strong> - summoned (perfect participle, accusative)',
                        '<strong>honore praecipuo</strong> - in special honour (ablative)',
                        '<strong>habitam</strong> - held, treated (perfect participle, accusative)'
                    ],
                    grammar: 'Present participle "reputans" with indirect statement. Two perfect passive participles ("accitam", "habitam") in accusative agreeing with "se". Ablative of means with "litteris".',
                    translation: 'there, reflecting that she had been summoned by false letters and held in special honour'
                },
                'phrase-2': {
                    title: 'quodque litus iuxta non ventis acta, non saxis impulsa navis...concidisset',
                    vocab: [
                        '<strong>quodque</strong> - and that (conjunction)',
                        '<strong>litus iuxta</strong> - near the shore',
                        '<strong>non ventis acta</strong> - not driven by winds',
                        '<strong>non saxis impulsa</strong> - not dashed on rocks',
                        '<strong>navis</strong> - the ship (nominative)',
                        '<strong>summa sui parte</strong> - in its upper part',
                        '<strong>veluti</strong> - like, as if',
                        '<strong>terrestre machinamentum</strong> - land contrivance/device',
                        '<strong>concidisset</strong> - had collapsed (pluperfect subjunctive)'
                    ],
                    grammar: 'Indirect statement continued. Anaphora with "non...non". Perfect passive participles "acta" and "impulsa". Pluperfect subjunctive in indirect statement.',
                    translation: 'and that the ship near shore, not driven by winds, not dashed on rocks, had collapsed in its upper part like a land device'
                },
                'phrase-3': {
                    title: 'observans etiam Acerroniae necem, simul suum vulnus aspiciens',
                    vocab: [
                        '<strong>observans</strong> - noting, observing (present participle)',
                        '<strong>etiam</strong> - also, even',
                        '<strong>Acerroniae</strong> - of Acerronia (genitive)',
                        '<strong>necem</strong> - slaughter, murder (accusative)',
                        '<strong>simul</strong> - at the same time',
                        '<strong>suum vulnus</strong> - her own wound',
                        '<strong>aspiciens</strong> - looking at (present participle)'
                    ],
                    grammar: 'Two present participles showing simultaneous action. Genitive with "necem".',
                    translation: 'noting also Acerronia\'s murder, at the same time looking at her own wound'
                },
                'phrase-4': {
                    title: 'solum insidiarum remedium esse, si non intellegerentur',
                    vocab: [
                        '<strong>solum remedium</strong> - only remedy (accusative)',
                        '<strong>insidiarum</strong> - against treachery (genitive)',
                        '<strong>esse</strong> - to be (infinitive)',
                        '<strong>si</strong> - if',
                        '<strong>non intellegerentur</strong> - they were not understood (imperfect subjunctive passive)'
                    ],
                    grammar: 'Indirect statement with infinitive "esse". Conditional clause with imperfect subjunctive. Genitive of separation with "remedium".',
                    translation: 'that the only remedy against treachery was if it was not recognised'
                },
                'phrase-5': {
                    title: 'misitque libertum Agerinum qui nuntiaret filio benignitate deum et fortuna eius evasisse gravem casum',
                    vocab: [
                        '<strong>misitque</strong> - and she sent (perfect)',
                        '<strong>libertum</strong> - freedman (accusative)',
                        '<strong>Agerinum</strong> - Agerinus (accusative)',
                        '<strong>qui nuntiaret</strong> - who should announce (relative purpose clause)',
                        '<strong>filio</strong> - to her son (dative)',
                        '<strong>benignitate deum</strong> - by kindness of gods',
                        '<strong>fortuna eius</strong> - his fortune',
                        '<strong>evasisse</strong> - to have escaped (perfect infinitive)',
                        '<strong>gravem casum</strong> - serious disaster (accusative)'
                    ],
                    grammar: 'Relative clause of purpose with imperfect subjunctive. Indirect statement with perfect infinitive. Ablatives of means.',
                    translation: 'and she sent the freedman Agerinus to announce to her son that she had escaped serious disaster by kindness of gods and his fortune'
                },
                'phrase-6': {
                    title: 'orare ut quamvis periculo matris exterritus visendi curam differret',
                    vocab: [
                        '<strong>orare</strong> - to beg (infinitive)',
                        '<strong>ut...differret</strong> - that he should postpone (purpose clause)',
                        '<strong>quamvis...exterritus</strong> - however much frightened',
                        '<strong>periculo matris</strong> - by mother\'s danger',
                        '<strong>visendi curam</strong> - duty of visiting (gerund + object)',
                        '<strong>differret</strong> - he should postpone (imperfect subjunctive)'
                    ],
                    grammar: 'Infinitive in indirect statement continued. Purpose clause with imperfect subjunctive. Concessive "quamvis" with participle. Gerund with object.',
                    translation: 'to beg that, however much frightened by his mother\'s danger, he should postpone the duty of visiting'
                },
                'phrase-7': {
                    title: 'sibi ad praesens quiete opus',
                    vocab: [
                        '<strong>sibi</strong> - for herself (dative)',
                        '<strong>ad praesens</strong> - for the present, for now',
                        '<strong>quiete</strong> - of rest (ablative)',
                        '<strong>opus</strong> - need, necessity (nominative)'
                    ],
                    grammar: 'Dative of possession with "opus". "Opus est" construction with ablative.',
                    translation: 'for herself, for the present, there was need of rest'
                },
                'phrase-8': {
                    title: 'atque interim securitate simulata medicamina vulneri et fomenta corpori adhibet',
                    vocab: [
                        '<strong>atque interim</strong> - and meanwhile',
                        '<strong>securitate simulata</strong> - with security feigned (ablative absolute)',
                        '<strong>medicamina</strong> - medicines, remedies (accusative)',
                        '<strong>vulneri</strong> - to the wound (dative)',
                        '<strong>fomenta</strong> - poultices, warm applications',
                        '<strong>corpori</strong> - to the body (dative)',
                        '<strong>adhibet</strong> - she applies (present)'
                    ],
                    grammar: 'Ablative absolute. Two parallel datives. Historic present.',
                    translation: 'and meanwhile, feigning security, she applies medicines to the wound and poultices to the body'
                },
                'phrase-9': {
                    title: 'testamentum Acerroniae requiri bonaque obsignari iubet',
                    vocab: [
                        '<strong>testamentum</strong> - will, testament (accusative)',
                        '<strong>Acerroniae</strong> - of Acerronia (genitive)',
                        '<strong>requiri</strong> - to be sought (present passive infinitive)',
                        '<strong>bonaque</strong> - and possessions (accusative)',
                        '<strong>obsignari</strong> - to be sealed (present passive infinitive)',
                        '<strong>iubet</strong> - she orders (present)'
                    ],
                    grammar: 'Accusative + infinitive construction with passive infinitives. Historic present.',
                    translation: 'she orders Acerronia\'s will to be sought and her possessions to be sealed'
                },
                'phrase-10': {
                    title: 'id tantum non per simulationem',
                    vocab: [
                        '<strong>id tantum</strong> - that only, only this',
                        '<strong>non</strong> - not',
                        '<strong>per simulationem</strong> - through pretence'
                    ],
                    grammar: 'Emphatic construction. Negative with prepositional phrase.',
                    translation: 'that alone not through pretence'
                }
            },

            style: {
                'style-1': {
                    title: 'Scene-Setting Adverb',
                    device: 'Locative adverb: "illic reputans" (there, reflecting)',
                    effect: '"Illic" anchors us physically in her villa whilst "reputans" shows mental activity. The adverb + participle combination creates cinematic effect‚Äîcamera on Agrippina, thinking. Location meets cognition: she\'s safe physically but processing danger mentally.',
                    pattern: 'single'
                },
                'style-2': {
                    title: 'Oxymoron',
                    device: 'Contradiction: "fallacibus litteris" (deceptive letters)',
                    effect: 'Letters should communicate truth; these communicated lies. "Fallacibus" (deceptive, deceitful) makes the medium itself treacherous. The oxymoron exposes how even formal communication becomes murder weapon‚Äîliteracy weaponised.',
                    pattern: 'single'
                },
                'style-3': {
                    title: 'Ironic Honours',
                    device: 'Bitter irony: "honore praecipuo habitam" (held in special honour)',
                    effect: '"Praecipuo" (special, exceptional) makes the honour elaborate, distinguished. But Tacitus shows Agrippina recognising this honour as bait‚Äîthe more exceptional the treatment, the more suspicious it becomes. Respect = trap.',
                    pattern: 'single'
                },
                'style-4': {
                    title: 'Geographic Precision',
                    device: 'Specific location: "litus iuxta" (near the shore)',
                    effect: '"Iuxta" (near, close to) is forensic detail. Ships don\'t naturally collapse near shore‚Äîthey founder in deep water or get dashed on rocks. The proximity to land proves this wasn\'t natural disaster but controlled demolition. Geography = evidence.',
                    pattern: 'single'
                },
                'style-5': {
                    title: 'Anaphora of Negation',
                    device: 'Repeated negatives: "non ventis acta, non saxis impulsa" (not driven by winds, not dashed on rocks)',
                    effect: 'The parallel "non...non" structure systematically eliminates natural causes. Winds? No. Rocks? No. Each negative narrows possibilities until only human agency remains. Grammar enacts forensic elimination‚Äîruling out until murder is the only answer.',
                    pattern: 'ab',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - Parallel negation (AB):</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: non ventis acta</span> (NOT by winds)<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: non saxis impulsa</span> (NOT by rocks)<br><br>Each negative eliminates one natural cause, leaving only deliberate human action.</div>'
                },
                'style-6': {
                    title: 'Technical Detail',
                    device: 'Precise description: "summa sui parte" (in its upper part)',
                    effect: '"Summa parte" (upper part) is engineering analysis. Agrippina notes WHERE it broke‚Äîthe weighted roof collapsed from above, not hull failure from below. The technical precision shows her analytical mind: she\'s not just scared, she\'s investigating.',
                    pattern: 'single'
                },
                'style-7': {
                    title: 'Simile of Recognition',
                    device: 'Damning comparison: "veluti terrestre machinamentum" (like a land contrivance)',
                    effect: '"Terrestre machinamentum" = land-based mechanism, siege engine, construction device. Ships collapse like SHIPS; this collapsed like a BUILDING. "Veluti" (as if, like) makes the comparison Agrippina\'s own‚Äîshe recognises the collapse pattern as wrong, mechanical, engineered. One word, "terrestre," proves assassination.',
                    pattern: 'single'
                },
                'style-8': {
                    title: 'Participle of Observation',
                    device: 'Present participle: "observans" (observing, noting)',
                    effect: '"Observans" is active, analytical watching‚Äînot passive seeing. She\'s gathering evidence, building case. The present participle shows ongoing mental process: her brain is working, connecting dots, assembling proof.',
                    pattern: 'single'
                },
                'style-9': {
                    title: 'Physical Evidence',
                    device: 'Dual focus: "simul suum vulnus aspiciens" (at the same time looking at her own wound)',
                    effect: '"Simul" (simultaneously) shows her processing two data points at once: Acerronia dead, herself wounded. "Aspiciens" (looking at) is forensic examination‚Äîshe\'s inspecting the wound as evidence, not just feeling pain. Her body becomes crime scene.',
                    pattern: 'single'
                },
                'style-10': {
                    title: 'Paradoxical Solution',
                    device: 'Tactical paradox: "solum insidiarum remedium" (only remedy against treachery)',
                    effect: '"Remedium" (remedy, cure) is medical language for political survival. The paradox: remedy for knowing = not-knowing. Solution to treachery = pretending ignorance. The grammar makes survival depend on performance, not truth.',
                    pattern: 'single'
                },
                'style-11': {
                    title: 'Condition of Survival',
                    device: 'Conditional clause: "si non intellegerentur" (if they were not understood)',
                    effect: 'Imperfect subjunctive in condition shows this is hypothetical strategy‚ÄîIF she can maintain illusion. "Intellegerentur" (passive) means "if [the plots] were not understood"‚Äîher survival requires others not understanding what SHE understands. Survival through asymmetric knowledge.',
                    pattern: 'single'
                },
                'style-12': {
                    title: 'Diplomatic Parallelism',
                    device: 'Balanced attribution: "benignitate deum et fortuna eius" (kindness of gods and his fortune)',
                    effect: 'Two ablatives of cause in parallel structure. Gods get "benignitas" (kindness), Nero gets "fortuna" (fortune/luck). She credits divine protection but ALSO Nero\'s good fortune‚Äîsubtly suggesting he\'s lucky she survived. Diplomatic thanks concealing accusation.',
                    pattern: 'ab',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - Parallel causes (AB):</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: benignitate deum</span> (by kindness of gods)<br>et<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: fortuna eius</span> (by HIS fortune)<br><br>Balance credits gods but includes Nero‚Äîhis "fortune" that she survived.</div>'
                },
                'style-13': {
                    title: 'Performative Verb',
                    device: 'Formal request: "orare" (to beg, to entreat)',
                    effect: '"Orare" is more elevated than "rogare"‚Äîit\'s formal supplication, religious petition. She performs deference linguistically, making survival look like maternal concern and filial respect, not fear and accusation. The verb choice is strategic humility.',
                    pattern: 'single'
                },
                'style-14': {
                    title: 'Concessive Irony',
                    device: 'Ironic concession: "quamvis periculo matris exterritus" (however frightened by mother\'s danger)',
                    effect: '"Quamvis" + participle = concessive (although, however much). She acknowledges his supposed fear for HER safety whilst really warning him away from finishing the job. "Exterritus" (thoroughly frightened) performs belief in his concern whilst buying time against attack.',
                    pattern: 'single'
                },
                'style-15': {
                    title: 'Gerund of Duty',
                    device: 'Obligation language: "visendi curam" (duty of visiting)',
                    effect: '"Curam visendi" makes visiting a formal obligation, filial duty. By framing it as duty she can ask him to postpone it without seeming suspicious‚Äîdutiful sons defer when mothers need rest. Tactical use of pietas vocabulary to avoid murder.',
                    pattern: 'single'
                },
                'style-16': {
                    title: 'Temporal Restriction',
                    device: 'Limiting phrase: "ad praesens" (for the present, for now)',
                    effect: '"Ad praesens" restricts claim temporally‚Äîjust for now, just momentarily. Not "forever," not "I never want to see you," just "currently need rest." The temporal limitation makes request seem reasonable while indefinitely postponing confrontation.',
                    pattern: 'single'
                },
                'style-17': {
                    title: 'Ablative Absolute of Performance',
                    device: 'Staged emotion: "securitate simulata" (with security feigned)',
                    effect: '"Securitate simulata" = ablative absolute showing simultaneous fake emotion. "Securitas" (freedom from care, confidence) + "simulata" (feigned, pretended). While she performs calm, Tacitus tells us it\'s performance. Grammar separates actor from role.',
                    pattern: 'single'
                },
                'style-18': {
                    title: 'Medical Parallelism',
                    device: 'Parallel treatments: "medicamina vulneri et fomenta corpori" (medicines to wound and poultices to body)',
                    effect: 'Two parallel structures: medicine-to-wound, poultice-to-body. The parallelism makes treatment seem routine, normal, non-emergency. She\'s performing normalcy through parallel care‚Äîgrammar enacting calm competence despite mortal danger.',
                    pattern: 'ab',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - Parallel care (AB):</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: medicamina vulneri</span> (medicines to wound)<br>et<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: fomenta corpori</span> (poultices to body)<br><br>Balanced structure performs routine medical care, concealing emergency.</div>'
                },
                'style-19': {
                    title: 'Historic Present',
                    device: 'Present tense: "adhibet" (she applies)',
                    effect: 'Historic present creates immediacy‚Äîwe watch her apply treatments in real time. The present tense after all those past/passive constructions makes her suddenly active, agent, doing things. Grammar shifts from victim to actor.',
                    pattern: 'single'
                },
                'style-20': {
                    title: 'Parallel Infinitives',
                    device: 'Double passive infinitives: "requiri...obsignari" (to be sought...to be sealed)',
                    effect: 'Two passive infinitives in parallel structure after "iubet"‚Äîshe orders BOTH actions. "Requiri" (be sought) + "obsignari" (be sealed) = proper legal procedure for estate. The parallel grammar performs bureaucratic normalcy‚Äîjust handling affairs.',
                    pattern: 'ab',
                    visual: '<div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85rem;"><strong>Visual pattern - Legal procedures (AB):</strong><br><span style="background: rgba(59, 130, 246, 0.4); padding: 2px 6px; border-radius: 3px;">A: requiri</span> (to be sought)<br>bonaque<br><span style="background: rgba(239, 68, 68, 0.4); padding: 2px 6px; border-radius: 3px;">B: obsignari</span> (to be sealed)<br><br>Parallel passive infinitives = standard legal process, performing normalcy.</div>'
                },
                'style-21': {
                    title: 'Final Revelation',
                    device: 'Emphatic exception: "id tantum non per simulationem" (that alone not through pretence)',
                    effect: '"Id tantum" (that only, that alone) isolates this ONE genuine act. Everything else‚Äîthe message, the rest request, the medical care‚Äîall performance. Only sealing Acerronia\'s estate is real. "Non per simulationem" shatters the pretence illusion: Tacitus reveals EVERYTHING ELSE was fake. Final clause unmasks the whole passage.',
                    pattern: 'single'
                }
            }
        };

        let currentAnalysis = null;
        let currentMode = 'grammar';
        let currentView = 'objectives';
        let currentStyleId = null;

        document.addEventListener('DOMContentLoaded', function() {
            loadLesson();
        });

        function loadLesson() {
            const latinTextEl = document.getElementById('latinText');
            latinTextEl.innerHTML = lessonData.latinText;
        }

        function showView(view) {
            currentView = view;
            
            if (event && event.currentTarget) {
                document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            }

            const objectivesCard = document.getElementById('objectivesCard');
            const textCard = document.getElementById('textCard');
            const panelTitle = document.getElementById('panelTitle');
            const analysisPanel = document.getElementById('analysisPanel');

            if (view === 'objectives') {
                objectivesCard.style.display = 'block';
                textCard.style.display = 'none';
                panelTitle.textContent = 'Getting Started';
                analysisPanel.innerHTML = '<div class="default-message">Begin by reviewing the learning intentions, then move to the Read section to explore the Latin text</div>';
            } else if (view === 'text') {
                objectivesCard.style.display = 'none';
                textCard.style.display = 'block';
                panelTitle.textContent = 'Analysis';
                analysisPanel.innerHTML = '<div class="default-message" id="defaultMessage">Click any coloured phrase to see vocabulary and grammar</div>';
                
                for (const [id, data] of Object.entries(lessonData.grammar)) {
                    const card = createGrammarCard(id, data);
                    analysisPanel.appendChild(card);
                }
                for (const [id, data] of Object.entries(lessonData.style)) {
                    const card = createStyleCard(id, data);
                    analysisPanel.appendChild(card);
                }
            }

            currentAnalysis = null;
            currentStyleId = null;
        }

        function setMode(mode) {
            currentMode = mode;
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            const latinText = document.getElementById('latinText');
            if (mode === 'style') {
                latinText.classList.add('mode-style');
            } else {
                latinText.classList.remove('mode-style');
            }
            
            clearAllHighlights();
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            currentStyleId = null;
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
        }

        function clearAllHighlights() {
            document.querySelectorAll('.highlight-style').forEach(el => {
                el.classList.remove('active-a', 'active-b', 'active-c', 'active-d', 'active-single');
            });
        }

        function showAnalysis(phraseId) {
            if (currentView !== 'text') return;
            
            if (phraseId.startsWith('style') && currentMode !== 'style') {
                return;
            }
            if (phraseId.startsWith('phrase') && currentMode === 'style') {
                return;
            }
            
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'none';
            
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
            }
            
            const card = document.getElementById(phraseId);
            if (card) {
                card.classList.add('active');
                currentAnalysis = card;
                card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        function showStyleAnalysis(styleId) {
            if (currentMode !== 'style') return;
            
            if (currentStyleId !== styleId) {
                clearAllHighlights();
                currentStyleId = styleId;
            }
            
            const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
            const styleData = lessonData.style[styleId];
            
            if (styleData && styleData.pattern) {
                const pattern = styleData.pattern;
                
                if (pattern === 'single') {
                    elements.forEach(el => el.classList.add('active-single'));
                } else if (pattern === 'ab') {
                    elements.forEach(el => {
                        const elPattern = el.getAttribute('data-pattern');
                        if (elPattern === 'a') {
                            el.classList.add('active-a');
                        } else if (elPattern === 'b') {
                            el.classList.add('active-b');
                        }
                    });
                } else if (pattern === 'abc') {
                    elements.forEach(el => {
                        const elPattern = el.getAttribute('data-pattern');
                        if (elPattern === 'a') {
                            el.classList.add('active-a');
                        } else if (elPattern === 'b') {
                            el.classList.add('active-b');
                        } else if (elPattern === 'c') {
                            el.classList.add('active-c');
                        }
                    });
                } else if (pattern === 'aaa') {
                    elements.forEach(el => el.classList.add('active-a'));
                }
            }
            
            showAnalysis(styleId);
        }

        function createGrammarCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            let vocabHTML = data.vocab.map(v => `<p>‚Ä¢ ${v}</p>`).join('');
            
            card.innerHTML = `
                <div class="analysis-badge">Grammar & Vocabulary</div>
                <h4>${data.title}</h4>
                <div class="vocab-list">${vocabHTML}</div>
                <p><strong>Grammar:</strong> ${data.grammar}</p>
                <div class="translation-section">
                    <button class="reveal-translation-btn" onclick="revealTranslation('${id}')">Reveal Translation</button>
                    <div class="translation-text" id="${id}-translation">
                        <strong>Translation:</strong> "${data.translation}"
                    </div>
                </div>
            `;
            
            return card;
        }

        function revealTranslation(cardId) {
            const translationEl = document.getElementById(cardId + '-translation');
            const button = event.currentTarget;
            
            if (translationEl && !translationEl.classList.contains('visible')) {
                translationEl.classList.add('visible');
                button.textContent = '‚úì Translation Revealed';
                button.classList.add('revealed');
            }
        }

        function createStyleCard(id, data) {
            const card = document.createElement('div');
            card.className = 'analysis-card';
            card.id = id;
            
            const visualHTML = data.visual ? data.visual : '';
            
            card.innerHTML = `
                <div class="analysis-badge">Literary Device</div>
                <h4>${data.title}</h4>
                <p><strong>Device:</strong> ${data.device}</p>
                <p><strong>Effect:</strong> ${data.effect}</p>
                ${visualHTML}
            `;
            
            return card;
        }

        function toggleFullTranslation() {
            const existing = document.getElementById('fullTranslationBox');
            if (existing) {
                existing.remove();
                event.currentTarget.textContent = 'Show Translation';
                return;
            }
            
            const translationBox = document.createElement('div');
            translationBox.id = 'fullTranslationBox';
            translationBox.style.cssText = 'background: rgba(230, 240, 255, 0.8); border-radius: 12px; padding: 1.5rem; margin-top: 1rem; border: 1px solid rgba(0, 102, 255, 0.2);';
            translationBox.innerHTML = `
                <h4 style="font-size: 0.9rem; font-weight: 600; color: #0066ff; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem;">Full Translation</h4>
                <p style="font-size: 1rem; line-height: 1.8; color: #333;">${lessonData.fullTranslation}</p>
            `;
            
            document.querySelector('.btn-group').insertAdjacentElement('beforebegin', translationBox);
            event.currentTarget.textContent = 'Hide Translation';
        }

        function resetView() {
            if (currentAnalysis) {
                currentAnalysis.classList.remove('active');
                currentAnalysis = null;
            }
            
            clearAllHighlights();
            currentStyleId = null;
            
            const defaultMsg = document.getElementById('defaultMessage');
            if (defaultMsg) defaultMsg.style.display = 'block';
            
            const fullTransBox = document.getElementById('fullTranslationBox');
            if (fullTransBox) fullTransBox.remove();
        }
    </script>
</body>
</html>
