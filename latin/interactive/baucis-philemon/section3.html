<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classicalia - Ovid Met. 8.26-35</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
        }
        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }
        .logo-section {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }
        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }
        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }
        .nav-section {
            padding: 1rem 0.5rem;
        }
        .nav-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #9ca3af;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }
        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            margin: 0.125rem 0;
            border-radius: 8px;
            text-decoration: none;
            color: #4b5563;
            font-size: 0.9rem;
            transition: all 0.15s ease;
            cursor: pointer;
        }
        .nav-item:hover {
            background: #f3f4f6;
            color: #1f2937;
        }
        .nav-item.active {
            background: #eef2ff;
            color: #0066ff;
            font-weight: 500;
        }
        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        .main-content {
            margin-left: 240px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .top-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.875rem 2rem;
            position: sticky;
            top: 0;
            z-index: 50;
        }
        .content-wrapper {
            flex: 1;
            overflow-y: auto;
        }
        .content-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        .lesson-header {
            margin-bottom: 2rem;
        }
        .lesson-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .lesson-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }
        .learning-objectives {
            background: white;
            border-radius: 12px;
            border: 2px solid #0066ff;
            padding: 2rem;
            margin-bottom: 2rem;
            max-width: 1200px;
        }
        .learning-intention {
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .objective-heading {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0066ff;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .intention-text {
            font-size: 1.25rem;
            line-height: 1.6;
            color: #1f2937;
            font-weight: 500;
        }
        .success-criteria {
            margin-top: 2rem;
        }
        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem;
            margin-top: 1.25rem;
        }
        .criterion {
            display: flex;
            gap: 1rem;
            padding: 1.25rem;
            background: #f9fafb;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            transition: all 0.2s ease;
        }
        .criterion:hover {
            border-color: #0066ff;
            box-shadow: 0 2px 8px rgba(0, 102, 255, 0.1);
        }
        .criterion-number {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            background: #0066ff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
        }
        .criterion-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .criterion-content p {
            font-size: 0.875rem;
            line-height: 1.5;
            color: #4b5563;
        }
        @media (max-width: 768px) {
            .criteria-grid {
                grid-template-columns: 1fr;
            }
        }
        .exam-question-section {
            max-width: 1200px;
        }
        .exam-question-card {
            background: white;
            border-radius: 12px;
            border: 2px solid #dc2626;
            padding: 2rem;
        }
        .exam-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .exam-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: #dc2626;
            margin-bottom: 0.5rem;
        }
        .exam-meta {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .question-box {
            background: #fef2f2;
            border-left: 4px solid #dc2626;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        .question-text {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #1f2937;
            margin: 0;
        }
        .latin-extract {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .latin-extract h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 1rem;
        }
        .extract-text {
            font-family: 'Georgia', serif;
            font-size: 1.125rem;
            line-height: 2;
            color: #1f2937;
        }
        .extract-text p {
            margin: 0.25rem 0;
        }
        .exam-guidance {
            background: #eff6ff;
            border-left: 4px solid #0066ff;
            padding: 1.5rem;
            border-radius: 8px;
        }
        .exam-guidance h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #0066ff;
            margin-bottom: 1rem;
        }
        .exam-guidance ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .exam-guidance li {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: #1f2937;
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        .exam-guidance li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #0066ff;
            font-weight: 700;
        }
        .lesson-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 1.5rem;
            align-items: start;
        }
        .card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }
        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }
        .card-body {
            padding: 1.5rem;
        }
        .tabs {
            display: flex;
            gap: 0.25rem;
            background: #f3f4f6;
            padding: 0.25rem;
            border-radius: 8px;
        }
        .tab {
            flex: 1;
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .tab.active {
            background: white;
            color: #0066ff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .latin-text {
            font-size: 1.2rem;
            line-height: 2.4;
            color: #1f2937;
            margin: 1.5rem 0;
            font-family: 'Georgia', serif;
        }
        .line {
            display: block;
            margin: 0.5rem 0;
        }
        .line-number {
            display: inline-block;
            width: 35px;
            color: #9ca3af;
            font-size: 0.85rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            user-select: none;
        }
        .phrase {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
        }
        .phrase.phrase-1 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-1:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-2 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-2:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-3 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-3:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-4 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-4:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-5 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-5:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-6 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-6:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-7 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-7:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-8 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-8:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-9 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-9:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-10 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-10:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-11 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-11:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-12 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-12:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-13 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-13:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-14 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-14:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-15 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-15:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-16 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-16:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-17 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-17:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-18 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-18:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-19 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-19:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-20 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-20:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-21 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-21:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-22 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-22:hover { background: rgba(255, 152, 0, 0.3); }
        .phrase.phrase-23 { background: rgba(244, 67, 54, 0.15); }
        .phrase.phrase-23:hover { background: rgba(244, 67, 54, 0.3); }
        .phrase.phrase-24 { background: rgba(0, 188, 212, 0.15); }
        .phrase.phrase-24:hover { background: rgba(0, 188, 212, 0.3); }
        .phrase.phrase-25 { background: rgba(76, 175, 80, 0.15); }
        .phrase.phrase-25:hover { background: rgba(76, 175, 80, 0.3); }
        .phrase.phrase-26 { background: rgba(33, 150, 243, 0.15); }
        .phrase.phrase-26:hover { background: rgba(33, 150, 243, 0.3); }
        .phrase.phrase-27 { background: rgba(156, 39, 176, 0.15); }
        .phrase.phrase-27:hover { background: rgba(156, 39, 176, 0.3); }
        .phrase.phrase-28 { background: rgba(255, 152, 0, 0.15); }
        .phrase.phrase-28:hover { background: rgba(255, 152, 0, 0.3); }
        .highlight-style {
            cursor: pointer;
            padding: 3px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: inline;
            background: transparent;
        }
        .mode-style .highlight-style.style-1 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-1:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-2 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-2:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-3 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-3:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-4 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-4:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-5 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-5:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-6 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-6:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-7 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-7:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-8 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-8:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-9 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-9:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-10 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-10:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-11 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-11:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-12 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-12:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-13 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-13:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-14 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-14:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-15 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-15:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-16 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-16:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-17 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-17:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-18 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-18:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-19 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-19:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-20 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-20:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-21 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-21:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .highlight-style.style-22 { background: rgba(255, 235, 59, 0.25); }
        .mode-style .highlight-style.style-22:hover { background: rgba(255, 235, 59, 0.4); }
        .mode-style .highlight-style.style-23 { background: rgba(255, 152, 0, 0.25); }
        .mode-style .highlight-style.style-23:hover { background: rgba(255, 152, 0, 0.4); }
        .mode-style .highlight-style.style-24 { background: rgba(76, 175, 80, 0.25); }
        .mode-style .highlight-style.style-24:hover { background: rgba(76, 175, 80, 0.4); }
        .mode-style .highlight-style.style-25 { background: rgba(33, 150, 243, 0.25); }
        .mode-style .highlight-style.style-25:hover { background: rgba(33, 150, 243, 0.4); }
        .mode-style .highlight-style.style-26 { background: rgba(156, 39, 176, 0.25); }
        .mode-style .highlight-style.style-26:hover { background: rgba(156, 39, 176, 0.4); }
        .mode-style .highlight-style.style-27 { background: rgba(244, 67, 54, 0.25); }
        .mode-style .highlight-style.style-27:hover { background: rgba(244, 67, 54, 0.4); }
        .mode-style .highlight-style.style-28 { background: rgba(0, 188, 212, 0.25); }
        .mode-style .highlight-style.style-28:hover { background: rgba(0, 188, 212, 0.4); }
        .mode-style .phrase {
            background: transparent !important;
            cursor: default;
        }
        .latin-text:not(.mode-style) .highlight-style {
            background: transparent;
            cursor: default;
            padding: 0;
            pointer-events: none;
        }
        .analysis-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            display: none;
        }
        .analysis-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .analysis-badge {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }
        .analysis-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }
        .analysis-card p {
            font-size: 0.875rem;
            line-height: 1.6;
            color: #4b5563;
            margin-bottom: 0.5rem;
        }
        .analysis-card .vocab-list {
            font-size: 0.85rem;
            line-height: 1.7;
            color: #4b5563;
            margin: 0.5rem 0;
        }
        .analysis-card strong {
            color: #0066ff;
        }
        .translation-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
        .translation-text {
            display: none;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #059669;
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: rgba(5, 150, 105, 0.05);
            border-radius: 6px;
            border-left: 3px solid #059669;
        }
        .translation-text.visible {
            display: block;
        }
        .reveal-translation-btn {
            background: #0066ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .reveal-translation-btn:hover {
            background: #0052cc;
        }
        .reveal-translation-btn.revealed {
            background: #10b981;
        }
        .reveal-translation-btn.revealed:hover {
            background: #059669;
        }
        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        .btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }
        .default-message {
            text-align: center;
            padding: 2rem 1rem;
            color: #9ca3af;
            font-style: italic;
            font-size: 0.9rem;
        }
        @media (max-width: 1024px) {
            .lesson-layout {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-section">
            <a href="../../index.html" class="logo">
                <div class="logo-icon">C</div>
                <span class="logo-text">Classicalia</span>
            </a>
        </div>
        <nav class="nav-section">
            <div class="nav-title">Resources</div>
            <div class="nav-item active" onclick="showView('objectives')">
                <span class="nav-icon">üéØ</span>
                <span>Learning Intentions</span>
            </div>
            <div class="nav-item" onclick="showView('text')">
                <span class="nav-icon">üìñ</span>
                <span>Read</span>
            </div>
            <div class="nav-item" onclick="showView('exam')">
                <span class="nav-icon">‚úçÔ∏è</span>
                <span>Exam Question</span>
            </div>
        </nav>
    </aside>
    <main class="main-content">
        <div class="top-bar"></div>
        <div class="content-wrapper">
            <div class="content-container">
                <header class="lesson-header">
                    <h1 class="lesson-title">(3) Lines 26-35: Arrangements for the unexpected guests</h1>
                    <div class="lesson-meta">
                        <span>üìï Ovid Metamorphoses 8.26-35</span>
                        <span>‚è±Ô∏è 45 min</span>
                        <span>üìä GCSE</span>
                    </div>
                </header>
                
                <div class="learning-objectives">
                    <div class="learning-intention">
                        <h2 class="objective-heading">Learning Intention</h2>
                        <p class="intention-text">Understand how Ovid uses descriptive detail and literary techniques to create pathos and elevate the humble hospitality scene</p>
                    </div>
                    <div class="success-criteria">
                        <h2 class="objective-heading">Success Criteria</h2>
                        <div class="criteria-grid">
                            <div class="criterion">
                                <div class="criterion-number">1</div>
                                <div class="criterion-content">
                                    <h3>Translation</h3>
                                    <p>I can translate the Latin text with support from vocabulary and grammar notes</p>
                                </div>
                            </div>
                            <div class="criterion">
                                <div class="criterion-number">2</div>
                                <div class="criterion-content">
                                    <h3>Content Understanding</h3>
                                    <p>I can explain what is happening in this scene and why the details matter (poverty, generosity, divine guests)</p>
                                </div>
                            </div>
                            <div class="criterion">
                                <div class="criterion-number">3</div>
                                <div class="criterion-content">
                                    <h3>Stylistic Analysis</h3>
                                    <p>I can identify literary devices (e.g. enclosing word order, litotes, enjambment) and explain their effects</p>
                                </div>
                            </div>
                            <div class="criterion">
                                <div class="criterion-number">4</div>
                                <div class="criterion-content">
                                    <h3>Exam Application</h3>
                                    <p>I can apply my knowledge of style to answer a 4-mark exam-style question on literary technique</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="exam-question-section" style="display: none;">
                    <div class="exam-question-card">
                        <div class="exam-header">
                            <h2 class="exam-title">Exam-Style Question [4 marks]</h2>
                            <div class="exam-meta">Success Criterion 4: Exam Application</div>
                        </div>
                        
                        <div class="question-box">
                            <p class="question-text">How does Ovid, by his style of writing, emphasise the humble poverty of Baucis and Philemon's cottage? You should make <strong>two points</strong> and <strong>refer to the Latin</strong> in your answer. <strong>[4]</strong></p>
                        </div>
                        
                        <div class="latin-extract">
                            <h3>Lines 27-31</h3>
                            <div class="extract-text">
                                <p>erat alveus illic</p>
                                <p>fagineus dura clavo suspensus ab ansa;</p>
                                <p>is tepidis impeletur aquis artusque fovendos</p>
                                <p>accipit. in medio torus est de mollibus ulvis</p>
                                <p>impositus lecto sponda pedibusque salignis;</p>
                            </div>
                        </div>
                        
                        <div class="exam-guidance">
                            <h3>Remember to:</h3>
                            <ul>
                                <li>Make <strong>two</strong> separate points about style</li>
                                <li>Quote or refer to the <strong>Latin text</strong> for each point</li>
                                <li>Explain the <strong>effect</strong> of each stylistic choice</li>
                                <li>Focus on <strong>how</strong> Ovid's writing emphasises poverty</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="lesson-layout">
                    <div class="card" id="textCard">
                        <div class="card-header">
                            <h3 class="card-title">Latin Text</h3>
                            <div class="tabs">
                                <button class="tab active" onclick="setMode('grammar')">Grammar</button>
                                <button class="tab" onclick="setMode('style')">Style</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="latin-text" id="latinText"></div>
                            <div class="btn-group">
                                <button class="btn" onclick="toggleFullTranslation()">Show Translation</button>
                                <button class="btn" onclick="resetView()">Reset View</button>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="panelTitle">Analysis</h3>
                            </div>
                            <div class="card-body" id="analysisPanel">
                                <div class="default-message" id="defaultMessage">
                                    Click any coloured phrase to see vocabulary and grammar
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
const lessonData = {
    fullTranslation: "Meanwhile they pass the middle hours with conversation and prevent delay from being felt. There was a beech-wood tub there hanging by a hard nail from its handle; this is pushed forward with warm waters and receives their limbs to be warmed. In the middle there is a mattress of soft sedge placed on a couch with willow frame and feet; they cover this with cloth which they were accustomed to spread only on festive occasions, but even this was cheap and old cloth, not unworthy of the willow couch. The gods reclined.",
    latinText: `<span class="line"><span class="line-number">26</span><span class="phrase phrase-1" onclick="showAnalysis('phrase1')"><span class="highlight-style style-1" onclick="showAnalysis('style1'); event.stopPropagation()">interea</span> <span class="highlight-style style-2" onclick="showAnalysis('style2'); event.stopPropagation()">medias</span> fallunt <span class="highlight-style style-3" onclick="showAnalysis('style3'); event.stopPropagation()">sermonibus</span> <span class="highlight-style style-4" onclick="showAnalysis('style4'); event.stopPropagation()">horas</span></span></span>
<span class="line"><span class="line-number">27</span><span class="phrase phrase-2" onclick="showAnalysis('phrase2')"><span class="highlight-style style-5" onclick="showAnalysis('style5'); event.stopPropagation()">sentirique moram prohibent</span></span>. <span class="phrase phrase-3" onclick="showAnalysis('phrase3')">erat <span class="highlight-style style-6" onclick="showAnalysis('style6'); event.stopPropagation()">alveus</span> illic</span></span>
<span class="line"><span class="line-number">28</span><span class="phrase phrase-4" onclick="showAnalysis('phrase4')"><span class="highlight-style style-7" onclick="showAnalysis('style7'); event.stopPropagation()">fagineus</span> <span class="highlight-style style-8" onclick="showAnalysis('style8'); event.stopPropagation()">dura</span> clavo <span class="highlight-style style-9" onclick="showAnalysis('style9'); event.stopPropagation()">suspensus</span> <span class="highlight-style style-10" onclick="showAnalysis('style10'); event.stopPropagation()">ab ansa</span></span>;</span>
<span class="line"><span class="line-number">29</span><span class="phrase phrase-5" onclick="showAnalysis('phrase5')">is <span class="highlight-style style-11" onclick="showAnalysis('style11'); event.stopPropagation()">tepidis impeletur aquis</span></span> <span class="phrase phrase-6" onclick="showAnalysis('phrase6')"><span class="highlight-style style-12" onclick="showAnalysis('style12'); event.stopPropagation()">artusque fovendos</span></span></span>
<span class="line"><span class="line-number">30</span><span class="phrase phrase-7" onclick="showAnalysis('phrase7')"><span class="highlight-style style-13" onclick="showAnalysis('style13'); event.stopPropagation()">accipit</span></span>. <span class="phrase phrase-8" onclick="showAnalysis('phrase8')"><span class="highlight-style style-14" onclick="showAnalysis('style14'); event.stopPropagation()">in medio</span> torus est <span class="highlight-style style-15" onclick="showAnalysis('style15'); event.stopPropagation()">de mollibus ulvis</span></span></span>
<span class="line"><span class="line-number">31</span><span class="phrase phrase-9" onclick="showAnalysis('phrase9')"><span class="highlight-style style-16" onclick="showAnalysis('style16'); event.stopPropagation()">impositus</span> lecto <span class="highlight-style style-17" onclick="showAnalysis('style17'); event.stopPropagation()">sponda pedibusque salignis</span></span>;</span>
<span class="line"><span class="line-number">32</span><span class="phrase phrase-10" onclick="showAnalysis('phrase10')"><span class="highlight-style style-18" onclick="showAnalysis('style18'); event.stopPropagation()">vestibus hunc velant</span></span> <span class="phrase phrase-11" onclick="showAnalysis('phrase11')">quas <span class="highlight-style style-19" onclick="showAnalysis('style19'); event.stopPropagation()">non nisi tempore festo</span></span></span>
<span class="line"><span class="line-number">33</span><span class="phrase phrase-12" onclick="showAnalysis('phrase12')"><span class="highlight-style style-20" onclick="showAnalysis('style20'); event.stopPropagation()">sternere consuerant</span></span>, <span class="phrase phrase-13" onclick="showAnalysis('phrase13')">sed et <span class="highlight-style style-21" onclick="showAnalysis('style21'); event.stopPropagation()">haec</span> <span class="highlight-style style-22" onclick="showAnalysis('style22'); event.stopPropagation()">vilisque vetusque</span></span></span>
<span class="line"><span class="line-number">34</span><span class="phrase phrase-14" onclick="showAnalysis('phrase14')"><span class="highlight-style style-23" onclick="showAnalysis('style23'); event.stopPropagation()">vestis erat</span>, <span class="highlight-style style-24" onclick="showAnalysis('style24'); event.stopPropagation()">lecto non indignanda saligno</span></span>.</span>
<span class="line"><span class="line-number">35</span><span class="phrase phrase-15" onclick="showAnalysis('phrase15')"><span class="highlight-style style-25" onclick="showAnalysis('style25'); event.stopPropagation()">accubuere dei</span></span>.</span>`,
    grammar: {
        phrase1: {
            title: "interea medias fallunt sermonibus horas (26)",
            vocab: [
                "<strong>interea</strong> = meanwhile, in the meantime (adv.)",
                "<strong>medias</strong> = middle (acc. pl. fem.)",
                "<strong>fallunt</strong> = they deceive, pass (3rd pl. pres.)",
                "<strong>sermonibus</strong> = with conversations (abl. pl.)",
                "<strong>horas</strong> = hours (acc. pl. fem.)"
            ],
            grammar: "Main clause. Present tense shows vivid narrative. 'Fallunt' means 'deceive' - they trick the hours into passing. Ablative of means 'sermonibus'. Enclosed word order: interea - medias - fallunt - sermonibus - horas creates elegant frame.",
            translation: "Meanwhile they pass the middle hours with conversation"
        },
        phrase2: {
            title: "sentirique moram prohibent (27)",
            vocab: [
                "<strong>sentiri</strong> = to be felt (pres. pass. inf.)",
                "<strong>-que</strong> = and (enclitic)",
                "<strong>moram</strong> = delay (acc. sing. fem.)",
                "<strong>prohibent</strong> = they prevent (3rd pl. pres.)"
            ],
            grammar: "Continues main clause with -que. Prohibent takes passive infinitive and accusative: 'prevent delay from being felt'. Shows how good conversation makes time fly. Mora (delay) personified as something to be sensed.",
            translation: "and they prevent delay from being felt"
        },
        phrase3: {
            title: "erat alveus illic (27)",
            vocab: [
                "<strong>erat</strong> = there was (3rd sing. imperf.)",
                "<strong>alveus</strong> = tub, basin (nom. sing. masc.)",
                "<strong>illic</strong> = there, in that place (adv.)"
            ],
            grammar: "Imperfect of sum introduces description. Alveus is wooden washing tub. Illic emphasises location in humble cottage. Simple sentence creates scene-setting pause before detailed description.",
            translation: "there was a tub there"
        },
        phrase4: {
            title: "fagineus dura clavo suspensus ab ansa (28)",
            vocab: [
                "<strong>fagineus</strong> = of beech-wood (nom. sing. masc.)",
                "<strong>dura</strong> = hard (abl. sing. fem.)",
                "<strong>clavo</strong> = by a nail (abl. sing. masc.)",
                "<strong>suspensus</strong> = hanging (nom. sing. masc. perf. pass. part.)",
                "<strong>ab</strong> = from (+ abl.)",
                "<strong>ansa</strong> = handle (abl. sing. fem.)"
            ],
            grammar: "All describing alveus. Fagineus shows material. Suspensus (perf. pass. part.) agrees with alveus. Ablative of means: dura clavo. Ab ansa shows where it hangs from. Multiple descriptors create vivid poverty detail.",
            translation: "(a) beech-wood (tub) hanging by a hard nail from (its) handle"
        },
        phrase5: {
            title: "is tepidis impeletur aquis (29)",
            vocab: [
                "<strong>is</strong> = this (nom. sing. masc.)",
                "<strong>tepidis</strong> = warm (abl. pl. fem.)",
                "<strong>impeletur</strong> = is pushed forward (3rd sing. pres. pass.)",
                "<strong>aquis</strong> = with waters (abl. pl. fem.)"
            ],
            grammar: "Historic present passive for vividness. Is refers back to alveus. Ablative of accompaniment: tepidis aquis. They push the tub forward filled with warm water - preparing foot bath for guests.",
            translation: "this is pushed forward with warm waters"
        },
        phrase6: {
            title: "artusque fovendos (29)",
            vocab: [
                "<strong>artus</strong> = limbs (acc. pl. masc.)",
                "<strong>-que</strong> = and",
                "<strong>fovendos</strong> = to be warmed (acc. pl. masc. fut. pass. part., gerundive)"
            ],
            grammar: "Accusative object of accipit in next line. Gerundive shows purpose: limbs needing to be warmed. Artus are the gods' limbs (though hosts don't know they're gods yet). Enjambment creates suspense.",
            translation: "and (their) limbs to be warmed"
        },
        phrase7: {
            title: "accipit (30)",
            vocab: [
                "<strong>accipit</strong> = receives, accepts (3rd sing. pres.)"
            ],
            grammar: "Completes previous sentence. Subject is still 'is' (alveus). Historic present. Accipit artus fovendos = receives limbs for warming. Tub becomes personified host receiving guests' feet.",
            translation: "receives"
        },
        phrase8: {
            title: "in medio torus est de mollibus ulvis (30)",
            vocab: [
                "<strong>in medio</strong> = in the middle (of the room)",
                "<strong>torus</strong> = mattress, couch (nom. sing. masc.)",
                "<strong>est</strong> = is (3rd sing. pres.)",
                "<strong>de</strong> = from, of (+ abl.)",
                "<strong>mollibus</strong> = soft (abl. pl. fem.)",
                "<strong>ulvis</strong> = sedge (abl. pl. fem.)"
            ],
            grammar: "New sentence describing furniture. Present tense. In medio locates couch centrally. De + abl shows material: made from soft sedge (marsh plant). Mollibus emphasises what comfort they can offer from natural materials.",
            translation: "in the middle there is a mattress of soft sedge"
        },
        phrase9: {
            title: "impositus lecto sponda pedibusque salignis (31)",
            vocab: [
                "<strong>impositus</strong> = placed on (nom. sing. masc. perf. pass. part.)",
                "<strong>lecto</strong> = on a couch (dat. sing. neut.)",
                "<strong>sponda</strong> = with frame (abl. sing. fem.)",
                "<strong>pedibusque</strong> = and with feet (abl. pl. masc.)",
                "<strong>salignis</strong> = willow (abl. pl. masc.)"
            ],
            grammar: "Impositus agrees with torus, governing dative lecto. Ablative of description: sponda pedibusque salignis. -que links two parts of couch. Salignis (willow) shows humble material. Structure emphasises poverty: even frame is cheap wood.",
            translation: "placed on a couch with willow frame and feet"
        },
        phrase10: {
            title: "vestibus hunc velant (32)",
            vocab: [
                "<strong>vestibus</strong> = with cloths (abl. pl. fem.)",
                "<strong>hunc</strong> = this (acc. sing. masc.)",
                "<strong>velant</strong> = they cover (3rd pl. pres.)"
            ],
            grammar: "Historic present. Hunc refers to torus. Ablative of means. They're covering the couch with fabric. Velare means to veil/cover. Shows careful preparation despite poverty.",
            translation: "they cover this with cloths"
        },
        phrase11: {
            title: "quas non nisi tempore festo (32)",
            vocab: [
                "<strong>quas</strong> = which (acc. pl. fem.)",
                "<strong>non nisi</strong> = not except, only",
                "<strong>tempore</strong> = at a time (abl. sing. neut.)",
                "<strong>festo</strong> = festive, holiday (abl. sing. neut.)"
            ],
            grammar: "Relative clause describing vestibus. Non nisi = 'only'. Ablative of time when. Shows these are their best cloths, reserved for special occasions. Creates pathos - they're honouring guests with most precious possessions.",
            translation: "which only at a festive time"
        },
        phrase12: {
            title: "sternere consuerant (33)",
            vocab: [
                "<strong>sternere</strong> = to spread (pres. inf.)",
                "<strong>consuerant</strong> = they were accustomed (3rd pl. pluperf.)"
            ],
            grammar: "Completes relative clause. Pluperfect shows habitual past action. Consuesco takes complementary infinitive. They were in the habit of spreading these only on holidays. Past habit emphasises special nature of occasion.",
            translation: "they were accustomed to spread"
        },
        phrase13: {
            title: "sed et haec vilisque vetusque (33)",
            vocab: [
                "<strong>sed</strong> = but (conj.)",
                "<strong>et</strong> = even, also",
                "<strong>haec</strong> = this (nom. sing. fem.)",
                "<strong>vilis</strong> = cheap (nom. sing. fem.)",
                "<strong>-que</strong> = and",
                "<strong>vetus</strong> = old (nom. sing. fem.)",
                "<strong>-que</strong> = and"
            ],
            grammar: "Contrast introduced by sed. Haec refers to vestis. -que ... -que links two adjectives in asyndeton. Despite being 'best', still cheap and old. Pathos of poverty - even festival cloth is worn and worthless.",
            translation: "but even this (was) both cheap and old"
        },
        phrase14: {
            title: "vestis erat, lecto non indignanda saligno (34)",
            vocab: [
                "<strong>vestis</strong> = cloth (nom. sing. fem.)",
                "<strong>erat</strong> = was (3rd sing. imperf.)",
                "<strong>lecto</strong> = for the couch (dat. sing. neut.)",
                "<strong>non</strong> = not (adv.)",
                "<strong>indignanda</strong> = unworthy (nom. sing. fem. gerundive)",
                "<strong>saligno</strong> = willow (dat. sing. neut.)"
            ],
            grammar: "Main verb erat. Vestis subject. Gerundive indignanda with dative shows suitability: 'not unworthy of the willow couch'. Litotes (negative of opposite) creates gentle tone. Cloth matches couch - both humble but appropriate to each other.",
            translation: "(the) cloth was not unworthy of the willow couch"
        },
        phrase15: {
            title: "accubuere dei (35)",
            vocab: [
                "<strong>accubuere</strong> = reclined (3rd pl. perf.)",
                "<strong>dei</strong> = the gods (nom. pl. masc.)"
            ],
            grammar: "Perfect tense marks completed action and climax. Accumbere = to recline (for dining). Dei finally reveals guests' true nature. Short sentence after elaborate description creates powerful pause. Gods sit on peasant furniture.",
            translation: "the gods reclined"
        }
    },
    style: {
        style1: {
            title: "interea (26)",
            device: "Temporal Marker",
            effect: "Transitional adverb creates continuity between scenes. 'Meanwhile' suggests simultaneous action whilst preparations continue. Establishes leisurely, hospitable atmosphere where conversation fills time naturally."
        },
        style2: {
            title: "medias (26)",
            device: "Enclosed Word Order",
            effect: "'Medias' separated from 'horas' creates elegant enclosing structure: interea - medias - fallunt - sermonibus - horas. Middle hours literally enclosed by other words, mirroring meaning. Poetic artistry elevates humble scene."
        },
        style3: {
            title: "sermonibus (26)",
            device: "Ablative of Means",
            effect: "Conversation as instrument for passing time. Plural suggests multiple exchanges flowing naturally. Sermones are casual conversations not formal speeches - intimacy of rural hospitality. Shows warmth between hosts and guests."
        },
        style4: {
            title: "horas (26)",
            device: "Personification",
            effect: "Hours can be 'deceived' (fallunt) and 'felt' (sentiri), giving time almost human qualities. When engaged in pleasant company, time seems to vanish - universal human experience expressed through personification."
        },
        style5: {
            title: "sentirique moram prohibent (27)",
            device: "Polysyndeton (-que)",
            effect: "And-clause (-que) continues thought smoothly. 'Prohibent' with passive infinitive creates sophisticated construction. Prevents mora (delay) from being perceived - good hospitality makes waiting imperceptible."
        },
        style6: {
            title: "alveus (27)",
            device: "Realistic Detail",
            effect: "Specific vocabulary creates verisimilitude. Alveus is wooden washing tub - humble, practical object. Shift from abstract (conversation, time) to concrete physical description grounds scene in material poverty."
        },
        style7: {
            title: "fagineus (28)",
            device: "Materiality",
            effect: "Adjective specifying beech-wood emphasises humble natural materials. No precious metals or imported woods - just local beech. Accumulation of modest materials (beech, willow, sedge) creates consistent poverty portrait."
        },
        style8: {
            title: "dura (28)",
            device: "Epithet",
            effect: "'Hard' nail suggests rough construction - no refined metalwork. Dura could mean physically hard or harsh/rough. Contrasts with later mollibus (soft). Hard materials yield soft hospitality."
        },
        style9: {
            title: "suspensus (28)",
            device: "Perfect Participle",
            effect: "Static participle creates snapshot image: tub hanging on wall. Suspensus suggests precarious attachment - held by single hard nail. Visualises cottage interior - storage methods of poor."
        },
        style10: {
            title: "ab ansa (28)",
            device: "Prepositional Detail",
            effect: "'From its handle' specifies exact hanging method. Precision in humble detail shows poet's attention to material reality. Creates authentic rustic scene through accumulated practical specifics."
        },
        style11: {
            title: "tepidis impeletur aquis (29)",
            device: "Historic Present Passive",
            effect: "Present tense brings action alive. Passive suggests gentle, careful movement - hosts handling humble vessel with care. Tepidis (warm) shows consideration - they've heated water for guests' comfort."
        },
        style12: {
            title: "artusque fovendos (29)",
            device: "Gerundive of Purpose",
            effect: "Fovendos expresses purpose through gerundive: limbs needing to be warmed/cherished. Fovere means to warm/cherish - double meaning shows physical and emotional care. Enjambment creates suspense before accipit."
        },
        style13: {
            title: "accipit (30)",
            device: "Enjambment",
            effect: "Verb delayed to next line creates poetic suspense. Accipit personifies tub receiving guests. Short verb after longer phrase creates rhythmic pause - tub accepts sacred limbs unknowingly."
        },
        style14: {
            title: "in medio (30)",
            device: "Locational Centering",
            effect: "Mattress in middle of room shows its importance as main furniture. 'In medio' spatially organises humble interior. Central placement emphasises hosts placing best possession at guests' disposal."
        },
        style15: {
            title: "de mollibus ulvis (30)",
            device: "Material Description",
            effect: "'From soft sedge' shows natural materials gathered from marshes. Mollibus contrasts earlier dura - softness achieved from nature despite hard circumstances. Sedge = poor person's stuffing. Tenderness from poverty."
        },
        style16: {
            title: "impositus (31)",
            device: "Perfect Participle",
            effect: "Placed/imposed on couch. Impositus suggests careful positioning - mattress deliberately arranged. Past participle shows completed preparation. Everything ready for divine guests."
        },
        style17: {
            title: "sponda pedibusque salignis (31)",
            device: "Polysyndeton (-que)",
            effect: "Links frame and feet as couch's components. Salignis (willow) governs both - entire structure is willow wood. Cheap material emphasised through repetition. -que creates list structure detailing poverty."
        },
        style18: {
            title: "vestibus hunc velant (32)",
            device: "Enclosing Word Order",
            effect: "Vestibus - hunc - velant creates frame where object (hunc) wrapped by verb (velant) just as couch wrapped by cloths. Form mirrors content. Poetic structure elevates humble action."
        },
        style19: {
            title: "non nisi tempore festo (32)",
            device: "Restrictive Phrase",
            effect: "'Not except at festival time' = only on holidays. Creates pathos - their 'best' cloths rarely used. Shows hosts recognise guests' importance, honouring them with reserved treasures. Sacrifice for hospitality."
        },
        style20: {
            title: "sternere consuerant (33)",
            device: "Pluperfect Habitual",
            effect: "Past habitual action emphasises rarity of use. Sternere (to spread/strew) was their custom only on feast days. Pluperfect creates temporal distance - shows long-standing modest practice now broken for guests."
        },
        style21: {
            title: "haec (33)",
            device: "Demonstrative Pathos",
            effect: "'This (cloth)' picks up vestis with demonstrative. Focuses attention on specific object. Creates intimacy - we see through poet's eye this particular old cloth. Haec emphasises individual poverty."
        },
        style22: {
            title: "vilisque vetusque (33)",
            device: "Polysyndeton + Asyndeton",
            effect: "-que ... -que links two adjectives without conjunction between ideas (asyndeton within polysyndeton). 'Both cheap and old' - double negative. Even their best is worthless. Rhythmic pairing reinforces poverty."
        },
        style23: {
            title: "vestis erat (34)",
            device: "Enjambment + Imperfect",
            effect: "Subject and verb span line break. Imperfect erat creates descriptive state. Simple statement after elaborate relative clause. Matter-of-fact tone accepts poverty without complaint."
        },
        style24: {
            title: "lecto non indignanda saligno (34)",
            device: "Litotes",
            effect: "'Not unworthy of willow couch' = fitting/appropriate. Double negative creates gentle, understated tone. Both cloth and couch humble - matched in poverty. Litotes dignifies without false pride. Appropriate humility."
        },
        style25: {
            title: "accubuere dei (35)",
            device: "Revelation + Spondaic Rhythm",
            effect: "Finally reveals guests are gods. 'Dei' withheld until elaborate description complete - readers discover truth with dramatic shock. Short sentence after long descriptions. Perfect tense marks climactic moment. Gods recline on peasant furniture - ultimate irony."
        }
    }
};

let currentAnalysis = null;
let currentMode = 'grammar';
let currentView = 'text';

document.addEventListener('DOMContentLoaded', function() {
    loadLesson();
    
    // Show objectives view by default
    showView('objectives');
});

function loadLesson() {
    document.getElementById('latinText').innerHTML = lessonData.latinText;
}

function showView(view) {
    currentView = view;
    
    if (event && event.currentTarget) {
        document.querySelectorAll('.sidebar .nav-item').forEach(item => {
            item.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
    }
    
    const textCard = document.getElementById('textCard');
    const panelTitle = document.getElementById('panelTitle');
    const analysisPanel = document.getElementById('analysisPanel');
    const objectivesSection = document.querySelector('.learning-objectives');
    const examSection = document.querySelector('.exam-question-section');
    const layoutContainer = document.querySelector('.lesson-layout');
    const sidePanel = document.querySelector('.lesson-layout > div:last-child');
    
    // Hide all sections first
    objectivesSection.style.display = 'none';
    examSection.style.display = 'none';
    textCard.style.display = 'none';
    
    if (view === 'objectives') {
        objectivesSection.style.display = 'block';
        layoutContainer.style.gridTemplateColumns = '1fr';
        sidePanel.style.display = 'none';
    } else if (view === 'exam') {
        examSection.style.display = 'block';
        layoutContainer.style.gridTemplateColumns = '1fr';
        sidePanel.style.display = 'none';
    } else if (view === 'text') {
        textCard.style.display = 'block';
        layoutContainer.style.gridTemplateColumns = '1fr 400px';
        sidePanel.style.display = 'block';
        
        panelTitle.textContent = 'Analysis';
        analysisPanel.innerHTML = '<div class="default-message">Click any coloured phrase to see vocabulary and grammar</div>';
        
        for (const [key, data] of Object.entries(lessonData.grammar)) {
            const card = createGrammarCard(key, data);
            analysisPanel.appendChild(card);
        }
        
        for (const [key, data] of Object.entries(lessonData.style)) {
            const card = createStyleCard(key, data);
            analysisPanel.appendChild(card);
        }
    }
    
    currentAnalysis = null;
}

function setMode(mode) {
    currentMode = mode;
    
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    event.currentTarget.classList.add('active');
    
    const latinText = document.getElementById('latinText');
    if (mode === 'style') {
        latinText.classList.add('mode-style');
    } else {
        latinText.classList.remove('mode-style');
    }
    
    if (currentAnalysis) {
        currentAnalysis.classList.remove('active');
        currentAnalysis = null;
    }
    
    const defaultMessage = document.getElementById('defaultMessage');
    if (defaultMessage) {
        defaultMessage.style.display = 'block';
    }
}

function showAnalysis(id) {
    if (currentView !== 'text') return;
    
    if (id.startsWith('style') && currentMode !== 'style') return;
    if (id.startsWith('phrase') && currentMode === 'style') return;
    
    const defaultMessage = document.getElementById('defaultMessage');
    if (defaultMessage) {
        defaultMessage.style.display = 'none';
    }
    
    if (currentAnalysis) {
        currentAnalysis.classList.remove('active');
    }
    
    const card = document.getElementById(id);
    if (card) {
        card.classList.add('active');
        currentAnalysis = card;
        card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
}

function createGrammarCard(id, data) {
    const card = document.createElement('div');
    card.className = 'analysis-card';
    card.id = id;
    
    let vocabHTML = data.vocab.map(item => `<p>‚Ä¢ ${item}</p>`).join('');
    
    card.innerHTML = `
        <div class="analysis-badge">Grammar & Vocabulary</div>
        <h4>${data.title}</h4>
        <div class="vocab-list">${vocabHTML}</div>
        <p><strong>Grammar:</strong> ${data.grammar}</p>
        <div class="translation-section">
            <button class="reveal-translation-btn" onclick="revealTranslation('${id}')">Reveal Translation</button>
            <div class="translation-text" id="${id}-translation">
                <strong>Translation:</strong> "${data.translation}"
            </div>
        </div>
    `;
    
    return card;
}

function revealTranslation(id) {
    const translation = document.getElementById(id + '-translation');
    const button = event.currentTarget;
    
    if (translation && !translation.classList.contains('visible')) {
        translation.classList.add('visible');
        button.textContent = '‚úì Translation Revealed';
        button.classList.add('revealed');
    }
}

function createStyleCard(id, data) {
    const card = document.createElement('div');
    card.className = 'analysis-card';
    card.id = id;
    
    card.innerHTML = `
        <div class="analysis-badge">Literary Device</div>
        <h4>${data.title}</h4>
        <p><strong>Device:</strong> ${data.device}</p>
        <p><strong>Effect:</strong> ${data.effect}</p>
    `;
    
    return card;
}

function toggleFullTranslation() {
    const existingBox = document.getElementById('fullTranslationBox');
    if (existingBox) {
        existingBox.remove();
        event.currentTarget.textContent = 'Show Translation';
        return;
    }
    
    const translationBox = document.createElement('div');
    translationBox.id = 'fullTranslationBox';
    translationBox.style.cssText = 'background: rgba(230, 240, 255, 0.8); border-radius: 12px; padding: 1.5rem; margin-top: 1rem; border: 1px solid rgba(0, 102, 255, 0.2);';
    translationBox.innerHTML = `
        <h4 style="font-size: 0.9rem; font-weight: 600; color: #0066ff; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.75rem;">Full Translation</h4>
        <p style="font-size: 1rem; line-height: 1.8; color: #333;">${lessonData.fullTranslation}</p>
    `;
    
    document.querySelector('.btn-group').insertAdjacentElement('beforebegin', translationBox);
    event.currentTarget.textContent = 'Hide Translation';
}

function resetView() {
    if (currentAnalysis) {
        currentAnalysis.classList.remove('active');
        currentAnalysis = null;
    }
    
    const defaultMessage = document.getElementById('defaultMessage');
    if (defaultMessage) {
        defaultMessage.style.display = 'block';
    }
    
    const translationBox = document.getElementById('fullTranslationBox');
    if (translationBox) {
        translationBox.remove();
    }
}
    </script>
</body>
</html>
