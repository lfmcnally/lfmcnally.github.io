<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baucis and Philemon - Section 5: Lines 51-64</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            padding: 2rem;
        }
        .header {
            max-width: 1800px;
            margin: 0 auto 2rem;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .header h1 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .header p {
            color: #6b7280;
            font-size: 1rem;
        }
        .section-tabs {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        .section-tab {
            padding: 0.75rem 1.5rem;
            background: #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.2s;
        }
        .section-tab:hover {
            background: #d1d5db;
        }
        .section-tab.active {
            background: #0066ff;
            color: white;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            align-items: start;
        }
        .right-panels {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .panel.translation-panel {
            min-height: 200px;
        }
        .panel-header {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .latin-text {
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            line-height: 2.5;
        }
        .latin-line {
            display: block;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            margin: 0.25rem 0;
        }
        .latin-line:hover {
            background: #f3f4f6;
        }
        .latin-line.active {
            background: #eef2ff;
            border-left: 4px solid #0066ff;
        }
        .line-number {
            display: inline-block;
            width: 40px;
            color: #9ca3af;
            font-size: 0.9rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            user-select: none;
        }
        
        .latin-text .hl {
            cursor: pointer;
            background: rgba(200, 200, 200, 0.15);
            padding: 1px 2px;
            border-radius: 3px;
        }
        .latin-text .hl:hover {
            background: rgba(200, 200, 200, 0.25);
        }
        
        .latin-text .hl.active-feature {
            background: rgba(139, 92, 246, 0.3);
            font-weight: 600;
            border: 1px solid #8b5cf6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-enclosing-outer {
            background: rgba(59, 130, 246, 0.3);
            font-weight: 600;
            border: 1px solid #3b82f6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-enclosing-inner {
            background: rgba(16, 185, 129, 0.3);
            font-weight: 600;
            border: 1px solid #10b981;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-parallel-a {
            background: rgba(239, 68, 68, 0.3);
            font-weight: 600;
            border: 1px solid #ef4444;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-parallel-b {
            background: rgba(59, 130, 246, 0.3);
            font-weight: 600;
            border: 1px solid #3b82f6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-alliteration {
            background: rgba(251, 191, 36, 0.3);
            font-weight: 700;
            border: 1px solid #fbbf24;
            padding: 1px 3px;
        }
        
        .empty-state {
            color: #9ca3af;
            font-style: italic;
            text-align: center;
            padding: 3rem 1rem;
            line-height: 1.6;
        }
        .content-panel {
            display: none;
        }
        .content-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .translation-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        .style-feature {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #0066ff;
        }
        .style-feature h4 {
            font-size: 0.95rem;
            font-weight: 700;
            color: #0066ff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        .style-feature p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #4b5563;
        }
        .latin-display {
            font-family: 'Georgia', serif;
            font-size: 1.15rem;
            background: #fef3c7;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            border-left: 4px solid #f59e0b;
        }
        
        .visual-container {
            background: #f9fafb;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 2px solid #e5e7eb;
        }
        
        .visual-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .enclosing-line {
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            text-align: center;
            line-height: 2;
            margin-bottom: 0.75rem;
        }
        .enclosing-outer-box {
            background: rgba(59, 130, 246, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #3b82f6;
        }
        .enclosing-inner-box {
            background: rgba(16, 185, 129, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #10b981;
            margin: 0 0.5rem;
        }
        
        .parallel-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }
        .parallel-side {
            text-align: center;
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border: 2px solid #d1d5db;
        }
        .parallel-vs {
            font-size: 1.5rem;
            font-weight: 700;
            color: #9ca3af;
        }
        .parallel-a-box {
            background: rgba(239, 68, 68, 0.3);
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 600;
            border: 2px solid #ef4444;
        }
        .parallel-b-box {
            background: rgba(59, 130, 246, 0.3);
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 600;
            border: 2px solid #3b82f6;
        }
        
        .gradient-visual {
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .section-content {
            display: none;
        }
        .section-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìö Baucis and Philemon: Section 5 (Lines 51-64)</h1>
        <p>Click any line for translation ‚Ä¢ Click any grey-highlighted text for style analysis</p>
        <div class="section-tabs">
            <div class="section-tab active" onclick="switchSection('5a')">Section 5a: The Flood & Transformation (51-60)</div>
            <div class="section-tab" onclick="switchSection('5b')">Section 5b: Jupiter's Question (61-64)</div>
        </div>
    </div>
    
    <div class="container">
        <!-- LEFT: Latin Text -->
        <div class="panel">
            <div class="panel-header">Latin Text</div>
            
            <!-- Section 5a -->
            <div id="section-5a" class="section-content active">
                <div class="latin-text">
                    <span class="latin-line" data-line="51" onclick="showLine(51)">
                        <span class="line-number">51</span>parent <span class="hl hl-parallel-a" data-style="51-parallel" onclick="showStyle('51-parallel'); event.stopPropagation();">ambo</span> <span class="hl hl-parallel-b" data-style="51-parallel" onclick="showStyle('51-parallel'); event.stopPropagation();">baculis</span>que <span class="hl hl-parallel-a" data-style="51-parallel" onclick="showStyle('51-parallel'); event.stopPropagation();">levati</span>
                    </span>
                    <span class="latin-line" data-line="52" onclick="showLine(52)">
                        <span class="line-number">52</span>nituntur longo vestigia ponere clivo.
                    </span>
                    <span class="latin-line" data-line="53" onclick="showLine(53)">
                        <span class="line-number">53</span><span class="hl hl-feature" data-style="53-tantum" onclick="showStyle('53-tantum'); event.stopPropagation();">tantum aberant summo, quantum semel ire sagitta</span>
                    </span>
                    <span class="latin-line" data-line="54" onclick="showLine(54)">
                        <span class="line-number">54</span><span class="hl hl-feature" data-style="53-tantum" onclick="showStyle('53-tantum'); event.stopPropagation();">missa potest</span>; <span class="hl hl-alliteration" data-style="54-flexere" onclick="showStyle('54-flexere'); event.stopPropagation();">f</span>lexere oculos et <span class="hl hl-feature" data-style="54-mersa" onclick="showStyle('54-mersa'); event.stopPropagation();">mersa palude</span>
                    </span>
                    <span class="latin-line" data-line="55" onclick="showLine(55)">
                        <span class="line-number">55</span>cetera prospiciunt, <span class="hl hl-enclosing-outer" data-style="55-enclosing" onclick="showStyle('55-enclosing'); event.stopPropagation();">tantum</span> <span class="hl hl-enclosing-inner" data-style="55-enclosing" onclick="showStyle('55-enclosing'); event.stopPropagation();">sua tecta</span> <span class="hl hl-enclosing-outer" data-style="55-enclosing" onclick="showStyle('55-enclosing'); event.stopPropagation();">manere</span>.
                    </span>
                    <span class="latin-line" data-line="56" onclick="showLine(56)">
                        <span class="line-number">56</span><span class="hl hl-feature" data-style="56-dumque" onclick="showStyle('56-dumque'); event.stopPropagation();">dum</span>que ea mirantur, <span class="hl hl-feature" data-style="56-dumque" onclick="showStyle('56-dumque'); event.stopPropagation();">dum</span> deflent fata suorum,
                    </span>
                    <span class="latin-line" data-line="57" onclick="showLine(57)">
                        <span class="line-number">57</span>illa vetus dominis etiam casa parva duobus
                    </span>
                    <span class="latin-line" data-line="58" onclick="showLine(58)">
                        <span class="line-number">58</span><span class="hl hl-feature" data-style="58-vertitur" onclick="showStyle('58-vertitur'); event.stopPropagation();">vertitur in templum</span>; <span class="hl hl-alliteration" data-style="58-furcas" onclick="showStyle('58-furcas'); event.stopPropagation();">f</span>urcas <span class="hl hl-feature" data-style="58-subiere" onclick="showStyle('58-subiere'); event.stopPropagation();">subiere</span> columnae,
                    </span>
                    <span class="latin-line" data-line="59" onclick="showLine(59)">
                        <span class="line-number">59</span><span class="hl hl-alliteration" data-style="58-furcas" onclick="showStyle('58-furcas'); event.stopPropagation();">f</span>lavescunt <span class="hl hl-feature" data-style="59-stramina" onclick="showStyle('59-stramina'); event.stopPropagation();">stramina</span> aurataque tecta videntur
                    </span>
                    <span class="latin-line" data-line="60" onclick="showLine(60)">
                        <span class="line-number">60</span>caelataeque <span class="hl hl-alliteration" data-style="58-furcas" onclick="showStyle('58-furcas'); event.stopPropagation();">f</span>ores adopertaque marmore tellus.
                    </span>
                </div>
            </div>
            
            <!-- Section 5b -->
            <div id="section-5b" class="section-content">
                <div class="latin-text">
                    <span class="latin-line" data-line="61" onclick="showLine(61)">
                        <span class="line-number">61</span>talia tum <span class="hl hl-feature" data-style="61-placido" onclick="showStyle('61-placido'); event.stopPropagation();">placido</span> <span class="hl hl-feature" data-style="61-saturnius" onclick="showStyle('61-saturnius'); event.stopPropagation();">Saturnius</span> edidit ore:
                    </span>
                    <span class="latin-line" data-line="62" onclick="showLine(62)">
                        <span class="line-number">62</span>'<span class="hl hl-enclosing-outer" data-style="62-enclosing" onclick="showStyle('62-enclosing'); event.stopPropagation();">dicite</span>, <span class="hl hl-enclosing-inner" data-style="62-enclosing" onclick="showStyle('62-enclosing'); event.stopPropagation();">iuste senex et femina coniuge iusto</span>
                    </span>
                    <span class="latin-line" data-line="63" onclick="showLine(63)">
                        <span class="line-number">63</span><span class="hl hl-enclosing-inner" data-style="62-enclosing" onclick="showStyle('62-enclosing'); event.stopPropagation();">digna</span>, <span class="hl hl-enclosing-outer" data-style="62-enclosing" onclick="showStyle('62-enclosing'); event.stopPropagation();">quid optetis</span>.' cum Baucide pauca locutus
                    </span>
                    <span class="latin-line" data-line="64" onclick="showLine(64)">
                        <span class="line-number">64</span><span class="hl hl-feature" data-style="64-iudicium" onclick="showStyle('64-iudicium'); event.stopPropagation();">iudicium superis aperit commune</span> Philemon:
                    </span>
                </div>
            </div>
        </div>
        
        <!-- RIGHT: Translation & Style stacked -->
        <div class="right-panels">
            <!-- Translation Panel -->
            <div class="panel translation-panel">
                <div class="panel-header">Translation</div>
                <div id="translationPanel">
                    <div class="empty-state">
                        üëà Click any line to see its translation
                    </div>
                </div>
            </div>
            
            <!-- Style & Effect Panel -->
            <div class="panel">
                <div class="panel-header">Style & Effect</div>
                <div id="stylePanel">
                    <div class="empty-state">
                        üëà Click grey-highlighted text for style analysis
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStyleId = null;
        let currentSection = '5a';
        
        function switchSection(sectionId) {
            // Update tabs
            document.querySelectorAll('.section-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.section-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById('section-' + sectionId).classList.add('active');
            
            currentSection = sectionId;
            
            // Clear panels
            document.getElementById('translationPanel').innerHTML = '<div class="empty-state">üëà Click any line to see its translation</div>';
            document.getElementById('stylePanel').innerHTML = '<div class="empty-state">üëà Click grey-highlighted text for style analysis</div>';
            clearAllHighlights();
        }
        
        const styleData = {
            '51-parallel': {
                latin: 'ambo baculisque levati',
                device: 'Balanced Phrase Structure',
                effect: 'Ambo (both) and levati (supported) are adjectives that frame baculis (with sticks) in the middle. The balanced word order mirrors how they support each other - two people, one on each side, both relying on their sticks. The structure makes them sound unified.',
                highlightClasses: ['parallel-a', 'parallel-b'],
                visual: `<div class="visual-container">
                    <div class="visual-title">Balanced Pattern: A ‚Äî B ‚Äî A</div>
                    <div class="parallel-container">
                        <div class="parallel-side">
                            <div style="margin-bottom: 0.5rem;"><span class="parallel-a-box">ambo</span></div>
                            <div style="margin-top: 0.5rem;"><span class="parallel-a-box">levati</span></div>
                            <div style="margin-top: 0.75rem; font-size: 0.875rem; color: #6b7280;">both adjectives<br>describing the couple</div>
                        </div>
                        <div class="parallel-vs">‚áÑ</div>
                        <div class="parallel-side">
                            <div><span class="parallel-b-box">baculis</span></div>
                            <div style="margin-top: 0.75rem; font-size: 0.875rem; color: #6b7280;">the means:<br>with their sticks</div>
                        </div>
                    </div>
                    <div style="text-align: center; font-size: 0.875rem; color: #6b7280; margin-top: 1rem;">
                        The balanced structure makes them sound unified - moving as one
                    </div>
                </div>`
            },
            '53-tantum': {
                latin: 'tantum aberant summo, quantum semel ire sagitta missa potest',
                device: 'Correlative Comparison (tantum...quantum)',
                effect: 'Tantum...quantum = "as much...as" creates a comparison. Ovid uses an epic-style simile comparing distance to an arrow flight. This gives grandeur to the scene - makes their climb feel heroic. The precise measurement ("as far as an arrow") builds tension: they are close but not yet safe.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);">
                    <div style="text-align: center; color: white; padding: 1rem;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üèπ</div>
                        <div style="font-family: Georgia, serif; font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 10px; border-radius: 6px; border: 2px solid #fbbf24;">tantum</span>
                            aberant summo,
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 10px; border-radius: 6px; border: 2px solid #fbbf24;">quantum</span>
                            semel ire sagitta missa potest
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.6); padding: 1rem; border-radius: 8px; font-size: 0.9rem; line-height: 1.6;">
                            "They were <strong>as far</strong> from the summit<br><strong>as</strong> an arrow can travel"<br><br>
                            Epic simile = makes their struggle sound heroic
                        </div>
                    </div>
                </div>`
            },
            '54-mersa': {
                latin: 'mersa palude',
                device: 'Perfect Passive Participle',
                effect: 'Mersa = "having been drowned/submerged" - a perfect passive participle showing completed action. This means the destruction has ALREADY happened - it is final, not ongoing. The use of palude (swamp/marsh) rather than aqua (water) makes it sound filthy and horrific.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(180deg, #0891b2 0%, #1e3a8a 100%);">
                    <div style="text-align: center; color: white; padding: 1.5rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üåä</div>
                        <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; margin-bottom: 1rem; text-shadow: 0 0 10px rgba(0,0,0,0.5);">
                            mersa palude
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.8); padding: 1.5rem; border-radius: 8px; line-height: 1.8;">
                            <div style="font-size: 1.1rem; margin-bottom: 0.5rem; color: #fbbf24;">mersa =</div>
                            <div style="font-size: 0.9rem; margin-bottom: 1rem;">"having been drowned"</div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 1rem; margin-top: 1rem; font-size: 0.85rem;">
                                Perfect participle = it's DONE<br>
                                Not "drowning" (still happening) but "drowned" (finished)<br><br>
                                <em>palus</em> = swamp/marsh, not clean water<br>
                                Makes the flood sound filthy and disgusting
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '54-flexere': {
                latin: 'flexere',
                device: 'Alliteration (f-)',
                effect: 'Flexere (they turned) begins the f- alliteration that continues through lines 58-60 (furcas, flavescunt, fores). The repeated f-sound unifies the transformation sequence.',
                highlightClasses: ['alliteration'],
                visual: `<div class="visual-container">
                    <div style="text-align: center; padding: 1rem;">
                        <div style="font-size: 1.8rem; font-weight: 700; color: #f59e0b; margin-bottom: 1rem; letter-spacing: 0.3rem;">
                            F F F F
                        </div>
                        <div style="font-family: Georgia, serif; font-size: 1.2rem; line-height: 2; color: #1f2937;">
                            <span style="background: rgba(251, 191, 36, 0.3); padding: 3px 6px; border-radius: 4px; font-weight: 700;">f</span>lexere (54)
                            <br>
                            <span style="background: rgba(251, 191, 36, 0.3); padding: 3px 6px; border-radius: 4px; font-weight: 700;">f</span>urcas (58)
                            <br>
                            <span style="background: rgba(251, 191, 36, 0.3); padding: 3px 6px; border-radius: 4px; font-weight: 700;">f</span>lavescunt (59)
                            <br>
                            <span style="background: rgba(251, 191, 36, 0.3); padding: 3px 6px; border-radius: 4px; font-weight: 700;">f</span>ores (60)
                        </div>
                        <div style="margin-top: 1rem; font-size: 0.875rem; color: #6b7280;">
                            Repeated f-sounds unify the transformation sequence
                        </div>
                    </div>
                </div>`
            },
            '55-enclosing': {
                latin: 'tantum sua tecta manere',
                device: 'Enclosing Word Order',
                effect: 'Tantum...manere enclose "sua tecta" (their home). The cottage is linguistically protected/enclosed ‚Äì foreshadowing that it alone will survive and transform.',
                highlightClasses: ['enclosing-outer', 'enclosing-inner'],
                visual: `<div class="visual-container">
                    <div class="visual-title">Structure: A ‚Äî B ‚Äî A</div>
                    <div class="enclosing-line">
                        <span class="enclosing-outer-box">tantum</span>
                        <span class="enclosing-inner-box">sua tecta</span>
                        <span class="enclosing-outer-box">manere</span>
                    </div>
                    <div style="text-align: center; font-size: 0.875rem; color: #6b7280; margin-top: 1rem;">
                        Their home is linguistically enclosed = protected from the flood
                    </div>
                </div>`
            },
            '56-dumque': {
                latin: 'dumque...dum (while...while)',
                device: 'Repeated Temporal Clause',
                effect: 'Dum repeated twice = "while...while" shows two things happening at the same moment. They are marvelling (ea mirantur) at the flood miracle AND weeping (deflent) for their dead neighbours simultaneously. The repetition emphasises their mixed emotions - wonder and horror together.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);">
                    <div style="text-align: center; color: white; padding: 1.5rem;">
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin-bottom: 1.5rem;">
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700;">dum</span>que ea mirantur, 
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700;">dum</span> deflent
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: rgba(30, 41, 59, 0.6); padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üòÆ</div>
                                <div style="font-weight: 600; margin-bottom: 0.3rem;">mirantur</div>
                                <div style="font-size: 0.85rem;">they marvel<br>(at the flood)</div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.6); padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üò¢</div>
                                <div style="font-weight: 600; margin-bottom: 0.3rem;">deflent</div>
                                <div style="font-size: 0.85rem;">they weep<br>(for neighbours)</div>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; font-size: 0.9rem; background: rgba(251, 191, 36, 0.2); padding: 0.75rem; border-radius: 6px;">
                            Both happening AT THE SAME TIME<br>Mixed emotions: wonder + grief
                        </div>
                    </div>
                </div>`
            },
            '58-vertitur': {
                latin: 'vertitur in templum',
                device: 'Passive Verb + Prepositional Phrase',
                effect: 'Vertitur = "is turned/transformed" (passive voice). The passive shows the gods are doing this - Baucis and Philemon are not transforming it themselves. In templum (into a temple) marks the exact moment of change: cottage ‚Üí temple. The simple statement makes the magic feel matter-of-fact.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: radial-gradient(circle at center, #fbbf24 0%, #f59e0b 40%, #7c3aed 100%);">
                    <div style="text-align: center; color: white; padding: 2rem;">
                        <div style="font-size: 1.5rem; margin-bottom: 1.5rem;">‚ú® TRANSFORMATION ‚ú®</div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem;">
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 1.5rem; border-radius: 8px; min-width: 150px;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèöÔ∏è</div>
                                <div style="font-size: 0.9rem;">casa</div>
                            </div>
                            <div style="font-size: 2.5rem; animation: pulse 1.5s infinite;">‚Üí</div>
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 1.5rem; border-radius: 8px; min-width: 150px;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚õ™</div>
                                <div style="font-size: 0.9rem;">templum</div>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; font-family: Georgia, serif; font-size: 1.8rem; font-weight: 700;">
                            <span style="background: rgba(239, 68, 68, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fef3c7;">vertitur</span>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.8); padding: 1rem; border-radius: 8px; margin-top: 1rem; font-size: 0.85rem;">
                            Passive voice = divine agency<br>
                            The gods are transforming it
                        </div>
                    </div>
                </div>
                <style>
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }
                </style>`
            },
            '58-furcas': {
                latin: 'furcas / flavescunt / fores (f- alliteration)',
                device: 'Sound Effects: f- Alliteration',
                effect: 'Four words beginning with f- across three lines (flexere 54, furcas 58, flavescunt 59, fores 60). The repeated f-sound links the transformation sequence together sonically - like a continuous flow of magic happening. The soft f-sound feels gentle, not violent.',
                highlightClasses: ['alliteration'],
                visual: `<div class="visual-container" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
                    <div style="text-align: center; padding: 1.5rem;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #92400e; margin-bottom: 1.5rem;">
                            ‚ú® F - F - F ‚ú®
                        </div>
                        <div style="font-family: Georgia, serif; font-size: 1.3rem; line-height: 2.2; color: #78350f;">
                            <div><span style="background: rgba(245, 158, 11, 0.4); padding: 4px 8px; border-radius: 4px; font-weight: 700; border: 2px solid #f59e0b;">f</span>urcas subiere columnae</div>
                            <div><span style="background: rgba(245, 158, 11, 0.4); padding: 4px 8px; border-radius: 4px; font-weight: 700; border: 2px solid #f59e0b;">f</span>lavescunt stramina</div>
                            <div>caelataeque <span style="background: rgba(245, 158, 11, 0.4); padding: 4px 8px; border-radius: 4px; font-weight: 700; border: 2px solid #f59e0b;">f</span>ores</div>
                        </div>
                        <div style="margin-top: 1.5rem; background: rgba(120, 53, 15, 0.8); color: #fef3c7; padding: 1rem; border-radius: 6px; font-size: 0.9rem; line-height: 1.6;">
                            Flowing f-sounds create a magical, shimmering quality<br>as each element transforms
                        </div>
                    </div>
                </div>`
            },
            '58-subiere': {
                latin: 'subiere',
                device: 'Vivid Verb Choice',
                effect: 'Subiere = "went under/took the place of" (from sub = under + eo = go). This is not just "became" - it is visual language. The marble columns literally slide underneath and replace the wooden forked sticks. The perfect tense makes it instantaneous: BANG, they have changed.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(180deg, #78350f 0%, #451a03 100%);">
                    <div style="text-align: center; color: #fef3c7; padding: 1.5rem;">
                        <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem; text-shadow: 0 0 10px rgba(254, 243, 199, 0.5);">
                            furcas subiere columnae
                        </div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: 2rem 0;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü™µ</div>
                                <div style="background: rgba(239, 68, 68, 0.3); padding: 0.75rem; border-radius: 6px; border: 2px solid #ef4444;">
                                    <div style="font-weight: 600;">furcas</div>
                                    <div style="font-size: 0.8rem; margin-top: 0.3rem;">forked sticks</div>
                                </div>
                            </div>
                            <div style="font-size: 3rem;">‚Üí</div>
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">üèõÔ∏è</div>
                                <div style="background: rgba(34, 197, 94, 0.3); padding: 0.75rem; border-radius: 6px; border: 2px solid #22c55e;">
                                    <div style="font-weight: 600;">columnae</div>
                                    <div style="font-size: 0.8rem; margin-top: 0.3rem;">marble columns</div>
                                </div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.2); padding: 1rem; border-radius: 8px; font-size: 0.9rem; line-height: 1.6;">
                            <span style="font-weight: 700; color: #fbbf24;">subiere</span> = "went under, replaced"<br>
                            Perfect tense = instantaneous transformation
                        </div>
                    </div>
                </div>`
            },
            '59-stramina': {
                latin: 'stramina',
                device: 'Humble Detail for Contrast',
                effect: 'Stramina = straw/thatch (the cheapest possible roofing material - what poor people use). This word appears right before aurata tecta (golden roof). The contrast is massive: from the humblest material to the most luxurious. Shows how complete the transformation is - nothing stays the same.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(180deg, #a16207 0%, #fbbf24 50%, #fef3c7 100%);">
                    <div style="text-align: center; padding: 2rem;">
                        <div style="font-size: 1.3rem; font-weight: 700; color: #78350f; margin-bottom: 1.5rem;">
                            DRAMATIC CONTRAST
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1.5rem; align-items: center;">
                            <div style="background: rgba(120, 53, 15, 0.6); padding: 1.5rem; border-radius: 8px; border: 2px solid #78350f;">
                                <div style="font-family: Georgia, serif; font-size: 1.5rem; font-weight: 700; color: #fef3c7; margin-bottom: 0.5rem;">stramina</div>
                                <div style="font-size: 0.9rem; color: #fde68a;">straw thatch</div>
                                <div style="font-size: 2rem; margin-top: 0.75rem;">üåæ</div>
                                <div style="font-size: 0.75rem; color: #fde68a; margin-top: 0.5rem;">poorest roofing</div>
                            </div>
                            <div style="font-size: 2.5rem; color: #78350f;">‚Üí</div>
                            <div style="background: rgba(251, 191, 36, 0.4); padding: 1.5rem; border-radius: 8px; border: 3px solid #fbbf24; box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);">
                                <div style="font-family: Georgia, serif; font-size: 1.5rem; font-weight: 700; color: #78350f; margin-bottom: 0.5rem;">aurata tecta</div>
                                <div style="font-size: 0.9rem; color: #92400e;">golden roof</div>
                                <div style="font-size: 2rem; margin-top: 0.75rem;">‚ú®</div>
                                <div style="font-size: 0.75rem; color: #92400e; margin-top: 0.5rem;">most glorious</div>
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '61-placido': {
                latin: 'placido...ore',
                device: 'Emotive Adjective',
                effect: 'Placido = "calm/peaceful/gentle". After the violence and drama of the flood, Jupiter speaks calmly. The word shows the storm is over - punishment finished, now comes reward. His calm tone also shows he is pleased with them (not angry like he was with the neighbours).',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);">
                    <div style="text-align: center; color: white; padding: 1.5rem;">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem;">‚ö°‚Üíüòå</div>
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin-bottom: 1.5rem;">
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700;">placido</span> ore
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.7); padding: 1.5rem; border-radius: 8px; line-height: 1.8;">
                            <div style="font-size: 1.1rem; margin-bottom: 1rem; color: #fbbf24;">placidus = calm, peaceful, serene</div>
                            <div style="font-size: 0.9rem; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 1rem;">
                                After the violence of the flood,<br>
                                Jupiter speaks with divine serenity<br>
                                <br>
                                The storm is over
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '61-saturnius': {
                latin: 'Saturnius',
                device: 'Formal Patronymic (Name Type)',
                effect: 'Saturnius = "son of Saturn" (the formal title of Jupiter using his father name). Ovid could have just written "Iuppiter" but uses the grand formal name instead. This makes Jupiter sound more official and serious - like a king making a royal proclamation, not just chatting.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(180deg, #7c3aed 0%, #1e40af 100%);">
                    <div style="text-align: center; color: white; padding: 2rem;">
                        <div style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1.5rem; color: #fbbf24;">
                            üëë FORMAL TITLE üëë
                        </div>
                        <div style="display: flex; justify-content: center; gap: 2rem; margin: 1.5rem 0;">
                            <div style="background: rgba(220, 38, 38, 0.3); padding: 1.5rem; border-radius: 8px; border: 2px dashed #dc2626; min-width: 180px;">
                                <div style="font-family: Georgia, serif; font-size: 1.5rem; font-weight: 600; margin-bottom: 0.5rem;">Iuppiter</div>
                                <div style="font-size: 0.85rem; margin-top: 0.5rem;">casual name</div>
                            </div>
                            <div style="background: rgba(251, 191, 36, 0.4); padding: 1.5rem; border-radius: 8px; border: 3px solid #fbbf24; box-shadow: 0 0 25px rgba(251, 191, 36, 0.4); min-width: 180px;">
                                <div style="font-family: Georgia, serif; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Saturnius</div>
                                <div style="font-size: 0.85rem; margin-top: 0.5rem;">"son of Saturn"<br>formal patronymic</div>
                            </div>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.8); padding: 1rem; border-radius: 8px; font-size: 0.9rem; line-height: 1.6;">
                            Official divine proclamation = use formal title<br>
                            Adds grandeur and solemnity
                        </div>
                    </div>
                </div>`
            },
            '62-enclosing': {
                latin: 'dicite...quid optetis (enclosing iuste senex...digna)',
                device: 'Enclosing Word Order (Multi-line)',
                effect: 'Dicite (tell me - line 62) and quid optetis (what you wish - line 63) are the verbs at start and end. They enclose/surround the long description "just old man and woman worthy of a just husband". This structure frames their goodness - their righteousness is literally wrapped in the question from Jupiter.',
                highlightClasses: ['enclosing-outer', 'enclosing-inner'],
                visual: `<div class="visual-container">
                    <div class="visual-title">Multi-line Enclosing Structure</div>
                    <div style="font-family: Georgia, serif; font-size: 1.2rem; text-align: center; line-height: 2.2;">
                        <div><span class="enclosing-outer-box">dicite</span>,</div>
                        <div style="margin: 1rem 0; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 6px;">
                            <span class="enclosing-inner-box">iuste senex et femina coniuge iusto<br>digna</span>
                        </div>
                        <div><span class="enclosing-outer-box">quid optetis</span></div>
                    </div>
                    <div style="text-align: center; font-size: 0.875rem; color: #6b7280; margin-top: 1.5rem; line-height: 1.6;">
                        The imperatives (commands) enclose their description<br>
                        Their identity is framed by their righteousness
                    </div>
                </div>`
            },
            '64-iudicium': {
                latin: 'iudicium...commune',
                device: 'Formal Vocabulary',
                effect: 'Iudicium = judgment/decision (serious, legal-sounding word - you would use it in court). Commune = shared/joint. Even at this huge moment - talking to gods - they make a SHARED decision. They do not ask separately. The formal vocabulary makes their unity sound more impressive and official.',
                highlightClasses: ['feature'],
                visual: `<div class="gradient-visual" style="background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);">
                    <div style="text-align: center; color: white; padding: 2rem;">
                        <div style="font-size: 1.5rem; margin-bottom: 1.5rem;">‚öñÔ∏è LEGAL LANGUAGE ‚öñÔ∏è</div>
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin-bottom: 1.5rem;">
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700;">iudicium</span>
                            <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700; margin-left: 1rem;">commune</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 1rem; border-radius: 8px;">
                                <div style="font-weight: 700; margin-bottom: 0.3rem; font-size: 1.1rem;">iudicium</div>
                                <div style="font-size: 0.85rem;">judgment, decision<br>(legal term)</div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 1rem; border-radius: 8px;">
                                <div style="font-weight: 700; margin-bottom: 0.3rem; font-size: 1.1rem;">commune</div>
                                <div style="font-size: 0.85rem;">shared, joint<br>(together)</div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.2); padding: 1rem; border-radius: 8px; font-size: 0.9rem;">
                            Even their wish is a JOINT decision<br>
                            Legal vocabulary = solemn, official moment
                        </div>
                    </div>
                </div>`
            }
        };
        
        const lineData = {
            51: {
                translation: "Both obey, and, supported by their sticks",
                latin: "parent ambo baculisque levati"
            },
            52: {
                translation: "they struggle to place their steps on the long slope.",
                latin: "nituntur longo vestigia ponere clivo",
                note: "Completes line 51 ‚Äì they obey and struggle up the hill on their sticks"
            },
            53: {
                translation: "They were as far from the summit as an arrow sent",
                latin: "tantum aberant summo, quantum semel ire sagitta"
            },
            54: {
                translation: "can travel once; they turned their eyes and see the rest drowned in the swamp",
                latin: "missa potest; flexere oculos et mersa palude",
                note: "Completes 53: 'as far as an arrow can travel', then they look back"
            },
            55: {
                translation: "they look out upon everything else, only their own home remains.",
                latin: "cetera prospiciunt, tantum sua tecta manere",
                note: "Everything destroyed except their cottage ‚Äì which stands alone"
            },
            56: {
                translation: "And while they marvel at these things, while they weep for the fates of their neighbours,",
                latin: "dumque ea mirantur, dum deflent fata suorum"
            },
            57: {
                translation: "that old cottage, small even for its two masters",
                latin: "illa vetus dominis etiam casa parva duobus"
            },
            58: {
                translation: "is turned into a temple; columns replaced the forked sticks,",
                latin: "vertitur in templum; furcas subiere columnae",
                note: "The transformation begins: cottage ‚Üí temple, forked sticks ‚Üí marble columns"
            },
            59: {
                translation: "the straw thatch turns yellow and the roof seems gilded",
                latin: "stramina flavescunt aurataque tecta videntur"
            },
            60: {
                translation: "and the doors (seem) carved and the ground covered with marble.",
                latin: "caelataeque fores adopertaque marmore tellus",
                note: "List continues from 59: carved doors, marble floor ‚Äì complete transformation"
            },
            61: {
                translation: "Then the son of Saturn spoke such things with calm expression:",
                latin: "talia tum placido Saturnius edidit ore"
            },
            62: {
                translation: "'Speak, just old man and woman worthy of a just husband,",
                latin: "'dicite, iuste senex et femina coniuge iusto"
            },
            63: {
                translation: "what you wish.' Having spoken a few words with Baucis,",
                latin: "digna, quid optetis.' cum Baucide pauca locutus",
                note: "Completes 62: 'worthy woman, what do you wish?' Philemon confers with Baucis"
            },
            64: {
                translation: "Philemon reveals their shared decision to the gods above:",
                latin: "iudicium superis aperit commune Philemon",
                note: "They make a JOINT decision ‚Äì their unity emphasised"
            }
        };
        
        function clearAllHighlights() {
            const activeElements = document.querySelectorAll('[class*="active-"]');
            activeElements.forEach(el => {
                el.className = el.className.replace(/active-[\w-]+/g, '').trim();
            });
        }
        
        function showLine(lineNumber) {
            document.querySelectorAll('.latin-line').forEach(line => {
                line.classList.remove('active');
            });
            document.querySelector(`[data-line="${lineNumber}"]`).classList.add('active');
            
            const data = lineData[lineNumber];
            
            const noteHTML = data.note ? `<div style="background: rgba(59, 130, 246, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #3b82f6; margin-top: 1rem; font-size: 0.9rem; line-height: 1.6; color: #1f2937;">
                <span style="font-weight: 600; color: #3b82f6;">üí° Note:</span> ${data.note}
            </div>` : '';
            
            const translationPanel = document.getElementById('translationPanel');
            translationPanel.innerHTML = `
                <div class="content-panel active">
                    <div class="latin-display">${data.latin}</div>
                    <div class="translation-text">"${data.translation}"</div>
                    ${noteHTML}
                </div>
            `;
        }
        
        function showStyle(styleId) {
            if (currentStyleId !== styleId) {
                clearAllHighlights();
                currentStyleId = styleId;
                
                const data = styleData[styleId];
                
                const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
                elements.forEach(el => {
                    const baseClass = Array.from(el.classList).find(c => c.startsWith('hl-'));
                    if (baseClass) {
                        const deviceType = baseClass.substring(3);
                        el.classList.add(`active-${deviceType}`);
                    }
                });
            }
            
            const data = styleData[styleId];
            const visualHTML = data.visual || '';
            
            let highlightedLatin = data.latin;
            const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
            const highlightedWords = [];
            elements.forEach(el => {
                const text = el.textContent.trim();
                const baseClass = Array.from(el.classList).find(c => c.startsWith('hl-'));
                if (baseClass && text) {
                    highlightedWords.push({text, class: baseClass});
                }
            });
            
            const colorMap = {
                'hl-parallel-a': 'background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                'hl-parallel-b': 'background: rgba(59, 130, 246, 0.3); border: 1px solid #3b82f6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                'hl-enclosing-outer': 'background: rgba(59, 130, 246, 0.3); border: 1px solid #3b82f6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                'hl-enclosing-inner': 'background: rgba(16, 185, 129, 0.3); border: 1px solid #10b981; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                'hl-alliteration': 'background: rgba(251, 191, 36, 0.3); border: 1px solid #fbbf24; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                'hl-feature': 'background: rgba(139, 92, 246, 0.3); border: 1px solid #8b5cf6; padding: 2px 6px; border-radius: 4px; font-weight: 600;'
            };
            
            highlightedWords.forEach(word => {
                const style = colorMap[word.class] || '';
                if (style && word.text.length > 0) {
                    const regex = new RegExp(`\\b${word.text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'g');
                    highlightedLatin = highlightedLatin.replace(regex, `<span style="${style}">${word.text}</span>`);
                }
            });
            
            const stylePanel = document.getElementById('stylePanel');
            stylePanel.innerHTML = `
                <div class="content-panel active">
                    <div class="latin-display">${highlightedLatin}</div>
                    <div class="style-feature">
                        <h4>${data.device}</h4>
                        <p>${data.effect}</p>
                    </div>
                    ${visualHTML}
                </div>
            `;
        }
    </script>
</body>
</html>
