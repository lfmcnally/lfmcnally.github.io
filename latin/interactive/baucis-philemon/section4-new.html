<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revision Guide - Section 4: Lines 36-50</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            padding: 2rem;
        }
        .header {
            max-width: 1800px;
            margin: 0 auto 2rem;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .header h1 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .header p {
            color: #6b7280;
            font-size: 1rem;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            align-items: start;
        }
        .right-panels {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .panel.translation-panel {
            min-height: 200px;
        }
        .panel-header {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .latin-text {
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            line-height: 2.5;
        }
        .latin-line {
            display: block;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            margin: 0.25rem 0;
        }
        .latin-line:hover {
            background: #f3f4f6;
        }
        .latin-line.active {
            background: #eef2ff;
            border-left: 4px solid #0066ff;
        }
        .line-number {
            display: inline-block;
            width: 40px;
            color: #9ca3af;
            font-size: 0.9rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            user-select: none;
        }
        
        /* Latin text highlighting - subtle grey by default */
        .latin-text .hl {
            cursor: pointer;
            background: rgba(200, 200, 200, 0.15);
            padding: 1px 2px;
            border-radius: 3px;
        }
        .latin-text .hl:hover {
            background: rgba(200, 200, 200, 0.25);
        }
        
        /* Active highlighting classes - applied when style is clicked */
        .latin-text .hl.active-chiasmus-a {
            background: rgba(239, 68, 68, 0.3);
            font-weight: 600;
            border: 1px solid #ef4444;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-chiasmus-b {
            background: rgba(59, 130, 246, 0.3);
            font-weight: 600;
            border: 1px solid #3b82f6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-sibilance {
            background: rgba(251, 191, 36, 0.3);
            font-weight: 700;
            border: 1px solid #fbbf24;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-enclosing-outer {
            background: rgba(59, 130, 246, 0.3);
            font-weight: 600;
            border: 1px solid #3b82f6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-enclosing-inner {
            background: rgba(16, 185, 129, 0.3);
            font-weight: 600;
            border: 1px solid #10b981;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-parallel-adj {
            background: rgba(245, 158, 11, 0.3);
            font-weight: 600;
            border: 1px solid #f59e0b;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-parallel-abl {
            background: rgba(139, 92, 246, 0.3);
            font-weight: 600;
            border: 1px solid #8b5cf6;
            padding: 1px 3px;
        }
        
        .latin-text .hl.active-emphatic {
            background: rgba(239, 68, 68, 0.3);
            font-weight: 700;
            border: 1px solid #ef4444;
            padding: 1px 3px;
        }
        
        /* Default feature highlighting - purple */
        .latin-text .hl.active-feature {
            background: rgba(139, 92, 246, 0.3);
            font-weight: 600;
            border: 1px solid #8b5cf6;
            padding: 1px 3px;
        }
        
        /* Custom feature colours for specific devices */
        .latin-text .hl.active-feature.thunder {
            background: rgba(251, 191, 36, 0.3);
            font-weight: 700;
            border: 1px solid #fbbf24;
        }
        
        .latin-text .hl.active-feature.prayer {
            background: rgba(251, 191, 36, 0.3);
            font-weight: 600;
            border: 1px solid #f59e0b;
        }
        
        .latin-text .hl.active-feature.revelation {
            background: rgba(139, 92, 246, 0.3);
            font-weight: 600;
            border: 1px solid #8b5cf6;
        }
        
        .latin-text .hl.active-feature.urgent {
            background: rgba(239, 68, 68, 0.3);
            font-weight: 600;
            border: 1px solid #ef4444;
        }
        
        .latin-text .hl.active-feature.spotlight {
            background: rgba(251, 191, 36, 0.3);
            font-weight: 700;
            border: 1px solid #fbbf24;
        }
        
        .latin-text .hl.active-feature.ironic {
            background: rgba(124, 58, 237, 0.3);
            font-weight: 600;
            border: 1px solid #7c3aed;
        }
        
        .latin-text .hl.active-feature.dramatic-irony {
            background: rgba(220, 38, 38, 0.3);
            font-weight: 600;
            border: 1px solid #dc2626;
        }
        
        .latin-text .hl.active-feature.regal {
            background: rgba(139, 92, 246, 0.3);
            font-weight: 700;
            border: 1px solid #8b5cf6;
        }
        
        .latin-text .hl.active-feature.time {
            background: rgba(8, 145, 178, 0.3);
            font-weight: 600;
            border: 1px solid #0891b2;
        }
        
        .latin-text .hl.active-feature.suspense {
            background: rgba(124, 58, 237, 0.3);
            font-weight: 600;
            border: 1px solid #7c3aed;
        }
        
        .latin-text .hl.active-feature.divine {
            background: rgba(30, 64, 175, 0.3);
            font-weight: 700;
            border: 1px solid #1e40af;
        }
        
        .latin-text .hl.active-feature.legal {
            background: rgba(30, 64, 175, 0.3);
            font-weight: 600;
            border: 1px solid #3b82f6;
        }
        
        .latin-text .hl.active-feature.command {
            background: rgba(220, 38, 38, 0.3);
            font-weight: 700;
            border: 1px solid #dc2626;
        }
        
        .latin-text .hl.active-feature.epic {
            background: rgba(16, 185, 129, 0.3);
            font-weight: 600;
            border: 1px solid #10b981;
        }
        
        .latin-text .hl.active-feature.brief {
            background: rgba(220, 38, 38, 0.3);
            font-weight: 700;
            border: 1px solid #dc2626;
        }
        
        .empty-state {
            color: #9ca3af;
            font-style: italic;
            text-align: center;
            padding: 3rem 1rem;
            line-height: 1.6;
        }
        .content-panel {
            display: none;
        }
        .content-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .translation-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        .style-feature {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #0066ff;
        }
        .style-feature h4 {
            font-size: 0.95rem;
            font-weight: 700;
            color: #0066ff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        .style-feature p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #4b5563;
        }
        .latin-display {
            font-family: 'Georgia', serif;
            font-size: 1.15rem;
            background: #fef3c7;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            border-left: 4px solid #f59e0b;
        }
        
        /* Visual panel styles */
        .enclosing-visual, .chiasmus-visual, .parallel-visual, .emphatic-visual, .sibilance-visual {
            background: #f9fafb;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 2px solid #e5e7eb;
        }
        
        .visual-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        /* Enclosing word order visual */
        .enclosing-line {
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            text-align: center;
            line-height: 2;
            margin-bottom: 0.75rem;
        }
        .enclosing-outer-box {
            background: rgba(59, 130, 246, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #3b82f6;
        }
        .enclosing-inner-box {
            background: rgba(16, 185, 129, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #10b981;
            margin: 0 0.5rem;
        }
        .enclosing-label {
            display: flex;
            justify-content: space-around;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        
        /* Chiasmus visual */
        .chiasmus-visual {
            background: #f9fafb;
        }
        .chiasmus-lines {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .chiasmus-line {
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            text-align: center;
        }
        .chiasmus-a-box {
            background: rgba(239, 68, 68, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #ef4444;
        }
        .chiasmus-b-box {
            background: rgba(59, 130, 246, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 2px solid #3b82f6;
        }
        .chiasmus-diagram {
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280;
            line-height: 1.8;
            font-family: monospace;
        }
        
        /* Balanced parallelism visual */
        .parallel-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }
        .parallel-side {
            text-align: center;
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border: 2px solid #d1d5db;
        }
        .parallel-vs {
            font-size: 1.5rem;
            font-weight: 700;
            color: #9ca3af;
        }
        .parallel-adj-box {
            background: rgba(245, 158, 11, 0.3);
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 600;
            border: 2px solid #f59e0b;
        }
        .parallel-abl-box {
            background: rgba(139, 92, 246, 0.3);
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 600;
            border: 2px solid #8b5cf6;
        }
        .parallel-label {
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        
        /* Emphatic word order visual */
        .emphatic-comparison {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .emphatic-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border: 2px solid #d1d5db;
        }
        .emphatic-row.highlighted {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.05);
        }
        .emphatic-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: #6b7280;
            min-width: 100px;
        }
        .emphatic-text {
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            flex: 1;
        }
        .emphatic-first-box {
            background: rgba(239, 68, 68, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 700;
            border: 2px solid #ef4444;
            font-size: 1.3rem;
        }
        .emphatic-note {
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 1rem;
            font-style: italic;
        }
        
        /* Sibilance visual - starry night */
        .sibilance-visual {
            background: #0f172a;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 2px solid #1e293b;
            position: relative;
            overflow: hidden;
        }
        .sibilance-visual::before {
            content: '‚ú¶ ‚úß ‚ú¶ ‚òÖ ‚úß ‚ú¶ ‚òÖ ‚úß ‚ú¶ ‚úß ‚òÖ ‚ú¶ ‚úß ‚òÖ ‚ú¶ ‚úß ‚ú¶ ‚òÖ ‚úß ‚ú¶ ‚úß ‚òÖ ‚ú¶ ‚úß ‚òÖ ‚ú¶ ‚úß';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.3);
            pointer-events: none;
            line-height: 2;
            word-spacing: 2rem;
            opacity: 0.6;
        }
        .sibilance-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #fbbf24;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        .sibilance-line {
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            text-align: center;
            margin-bottom: 1.5rem;
            color: #f1f5f9;
            line-height: 1.8;
            position: relative;
            z-index: 1;
        }
        .sibilance-s-box {
            background: rgba(251, 191, 36, 0.3);
            padding: 4px 6px;
            border-radius: 4px;
            font-weight: 700;
            border: 2px solid #fbbf24;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.6);
            color: #fef3c7;
        }
        .sibilance-pattern {
            text-align: center;
            font-size: 1.5rem;
            color: #fbbf24;
            margin-bottom: 1rem;
            letter-spacing: 0.75rem;
            position: relative;
            z-index: 1;
        }
        .sibilance-note {
            text-align: center;
            font-size: 0.9rem;
            color: #e2e8f0;
            line-height: 1.6;
            background: rgba(30, 41, 59, 0.6);
            padding: 1rem;
            border-radius: 6px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìö Revision Guide: Section 4 (Lines 36-50)</h1>
        <p>Click any line for translation ‚Ä¢ Click any grey-highlighted text for style analysis</p>
    </div>
    
    <div class="container">
        <!-- LEFT: Latin Text -->
        <div class="panel">
            <div class="panel-header">Latin Text</div>
            <div class="latin-text" id="latinText">
                <span class="latin-line" data-line="36" onclick="showLine(36)">
                    <span class="line-number">36</span>interea totiens haustum <span class="hl hl-chiasmus-a" data-style="36-repleri" onclick="showStyle('36-repleri'); ">cratera</span> <span class="hl hl-chiasmus-b" data-style="36-repleri" onclick="showStyle('36-repleri'); ">repleri</span>
                </span>
                <span class="latin-line" data-line="37" onclick="showLine(37)">
                    <span class="line-number">37</span><span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">s</span>ponte <span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">s</span>ua per <span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">s</span>eque vident <span class="hl hl-chiasmus-b" data-style="36-repleri" onclick="showStyle('36-repleri'); "><span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">s</span>uc<span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">c</span>re<span class="hl hl-sibilance" data-style="37-succrescere" onclick="showStyle('37-succrescere'); ">s</span>cere</span> <span class="hl hl-chiasmus-a" data-style="36-repleri" onclick="showStyle('36-repleri'); ">vina</span>;
                </span>
                <span class="latin-line" data-line="38" onclick="showLine(38)">
                    <span class="line-number">38</span><span class="hl hl-feature" data-style="38-attoniti" onclick="showStyle('38-attoniti'); ">attoniti</span> <span class="hl hl-feature" data-style="38-novitate" onclick="showStyle('38-novitate'); ">novitate</span> pavent <span class="hl hl-feature" data-style="38-manibus" onclick="showStyle('38-manibus'); ">manibusque supinis</span>
                </span>
                <span class="latin-line" data-line="39" onclick="showLine(39)">
                    <span class="line-number">39</span>concipiunt <span class="hl hl-enclosing-outer" data-style="39-enclosing" onclick="showStyle('39-enclosing'); ">Baucis</span>que <span class="hl hl-enclosing-inner" data-style="39-enclosing" onclick="showStyle('39-enclosing'); ">preces</span> timidusque <span class="hl hl-enclosing-outer" data-style="39-enclosing" onclick="showStyle('39-enclosing'); ">Philemon</span>
                </span>
                <span class="latin-line" data-line="40" onclick="showLine(40)">
                    <span class="line-number">40</span>et <span class="hl hl-feature" data-style="40-veniam" onclick="showStyle('40-veniam'); ">veniam</span> <span class="hl hl-feature" data-style="40-rhyme" onclick="showStyle('40-rhyme'); ">dapibus</span> nullisque <span class="hl hl-feature" data-style="40-rhyme" onclick="showStyle('40-rhyme'); ">paratibus</span> orant.
                </span>
                <span class="latin-line" data-line="41" onclick="showLine(41)">
                    <span class="line-number">41</span><span class="hl hl-feature" data-style="41-unicus" onclick="showStyle('41-unicus'); ">unicus</span> anser erat, <span class="hl hl-feature" data-style="41-minimae" onclick="showStyle('41-minimae'); ">minimae custodia villae</span>,
                </span>
                <span class="latin-line" data-line="42" onclick="showLine(42)">
                    <span class="line-number">42</span>quem <span class="hl hl-feature" data-style="42-dis" onclick="showStyle('42-dis'); ">dis hospitibus</span> <span class="hl hl-feature" data-style="42-domini" onclick="showStyle('42-domini'); ">domini</span> mactare parabant;
                </span>
                <span class="latin-line" data-line="43" onclick="showLine(43)">
                    <span class="line-number">43</span>ille <span class="hl hl-parallel-adj" data-style="43-balanced" onclick="showStyle('43-balanced'); ">celer</span> <span class="hl hl-parallel-abl" data-style="43-balanced" onclick="showStyle('43-balanced'); ">penna</span> <span class="hl hl-parallel-adj" data-style="43-balanced" onclick="showStyle('43-balanced'); ">tardos</span> <span class="hl hl-parallel-abl" data-style="43-balanced" onclick="showStyle('43-balanced'); ">aetate</span> fatigat
                </span>
                <span class="latin-line" data-line="44" onclick="showLine(44)">
                    <span class="line-number">44</span><span class="hl hl-feature" data-style="44-temporal" onclick="showStyle('44-temporal'); ">eluditque diu</span> <span class="hl hl-feature" data-style="44-temporal" onclick="showStyle('44-temporal'); ">tandemque</span> est visus <span class="hl hl-feature" data-style="44-ipsos" onclick="showStyle('44-ipsos'); ">ad ipsos</span>
                </span>
                <span class="latin-line" data-line="45" onclick="showLine(45)">
                    <span class="line-number">45</span>confugisse deos. <span class="hl hl-feature" data-style="45-superi" onclick="showStyle('45-superi'); ">superi vetuere necari</span>
                </span>
                <span class="latin-line" data-line="46" onclick="showLine(46)">
                    <span class="line-number">46</span><span class="hl hl-emphatic" data-style="46-di" onclick="showStyle('46-di'); ">'di'que 'sumus</span>, <span class="hl hl-enclosing-outer" data-style="46-enclosing" onclick="showStyle('46-enclosing'); ">meritasque</span> luet <span class="hl hl-enclosing-inner" data-style="46-enclosing" onclick="showStyle('46-enclosing'); ">vicinia</span> <span class="hl hl-enclosing-outer" data-style="46-enclosing" onclick="showStyle('46-enclosing'); ">poenas</span>
                </span>
                <span class="latin-line" data-line="47" onclick="showLine(47)">
                    <span class="line-number">47</span><span class="hl hl-enclosing-outer" data-style="46-enclosing" onclick="showStyle('46-enclosing'); ">impia</span>' dixerunt; '<span class="hl hl-feature" data-style="47-vobis" onclick="showStyle('47-vobis'); ">vobis immunibus</span> huius
                </span>
                <span class="latin-line" data-line="48" onclick="showLine(48)">
                    <span class="line-number">48</span>esse mali dabitur. modo <span class="hl hl-feature" data-style="48-relinquite" onclick="showStyle('48-relinquite'); ">vestra relinquite tecta</span>
                </span>
                <span class="latin-line" data-line="49" onclick="showLine(49)">
                    <span class="line-number">49</span>ac nostros comitate gradus et in <span class="hl hl-feature" data-style="49-ardua" onclick="showStyle('49-ardua'); ">ardua montis</span>
                </span>
                <span class="latin-line" data-line="50" onclick="showLine(50)">
                    <span class="line-number">50</span><span class="hl hl-feature" data-style="50-ite" onclick="showStyle('50-ite'); ">ite simul</span>.'
                </span>
            </div>
        </div>
        
        <!-- RIGHT: Translation & Style stacked -->
        <div class="right-panels">
            <!-- Translation Panel -->
            <div class="panel translation-panel">
                <div class="panel-header">Translation</div>
                <div id="translationPanel">
                    <div class="empty-state">
                        üëà Click any line to see its translation
                    </div>
                </div>
            </div>
            
            <!-- Style & Effect Panel -->
            <div class="panel">
                <div class="panel-header">Style & Effect</div>
                <div id="stylePanel">
                    <div class="empty-state">
                        üëà Click grey-highlighted text for style analysis
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStyleId = null;
        
        const styleData = {
            '36-repleri': {
                latin: 'cratera repleri / succrescere vina',
                device: 'Chiasmus (ABBA pattern)',
                effect: 'Object-verb / verb-object pattern. The crossing structure reflects the completion and perfection of the miracle - grammatical balance mirrors supernatural balance.',
                highlightClasses: ['chiasmus-a', 'chiasmus-b'],
                visual: `<div class="chiasmus-visual">
                    <div class="visual-title">Chiasmus Pattern: A B B A</div>
                    <div class="chiasmus-lines">
                        <div class="chiasmus-line">
                            <span class="chiasmus-a-box">cratera</span> <span class="chiasmus-b-box">repleri</span>
                        </div>
                        <div class="chiasmus-line">
                            <span class="chiasmus-b-box">succrescere</span> <span class="chiasmus-a-box">vina</span>
                        </div>
                    </div>
                    <div class="chiasmus-diagram">
Line 36: <span style="color: #ef4444; font-weight: 600;">object</span> ‚Äî <span style="color: #3b82f6; font-weight: 600;">verb</span><br>
         ‚ï≤        ‚ï±<br>
          ‚ï≤      ‚ï±<br>
           ‚ï≤    ‚ï±<br>
            ‚ï≤  ‚ï±<br>
             ‚ï≥<br>
            ‚ï±  ‚ï≤<br>
           ‚ï±    ‚ï≤<br>
          ‚ï±      ‚ï≤<br>
         ‚ï±        ‚ï≤<br>
Line 37: <span style="color: #3b82f6; font-weight: 600;">verb</span> ‚Äî <span style="color: #ef4444; font-weight: 600;">object</span>
                    </div>
                    <div class="parallel-label">The crossing structure reflects the perfection of the miracle</div>
                </div>`
            },
            '37-succrescere': {
                latin: 'sponte sua per seque...succrescere',
                device: 'Sound Effects: Sibilance',
                effect: 'Line 37 full of \'s\' sounds creates a magical, whispered quality, like a spell being cast. The repeated S-sounds give the line an otherworldly, incantatory feel as the wine mysteriously refills itself.',
                highlightClasses: ['sibilance'],
                visual: `<div class="sibilance-visual">
                    <div class="sibilance-title">‚ú® Magical Sibilance Pattern ‚ú®</div>
                    <div class="sibilance-line">
                        <span class="sibilance-s-box">s</span>ponte <span class="sibilance-s-box">s</span>ua per <span class="sibilance-s-box">s</span>eque vident <span class="sibilance-s-box">s</span>uc<span class="sibilance-s-box">c</span>re<span class="sibilance-s-box">s</span>cere vina
                    </div>
                    <div class="sibilance-pattern">
                        ‚úß s ‚úß s ‚úß s ‚úß s ‚úß s ‚úß s ‚úß
                    </div>
                    <div class="sibilance-note">
                        The repeated sibilance creates a whispered, spell-like quality‚Äî<br>
                        as if magical words are being softly spoken as the miracle occurs
                    </div>
                </div>`
            },
            '38-attoniti': {
                latin: 'attoniti',
                device: 'Emotive Participle + Religious Terminology',
                effect: 'Literally \'thunderstruck\' (ad + tonare = struck by thunder). Religious terminology - experiencing numinous terror. Romans recognised divine presence through fear and awe.',
                highlightClasses: ['feature'],
                highlightColour: 'emphatic', // Use red/dramatic highlighting
                visual: `<div class="sibilance-visual" style="background: linear-gradient(180deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);">
                    <div class="sibilance-title" style="color: #fbbf24;">‚ö° THUNDERSTRUCK ‚ö°</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-size: 3rem; margin: 0.75rem 0; filter: drop-shadow(0 0 15px rgba(251, 191, 36, 0.8));">‚ö°</div>
                        <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; color: #fbbf24; margin: 0.75rem 0; text-shadow: 0 0 20px rgba(251, 191, 36, 0.8);">
                            ATTONITI
                        </div>
                        <div style="display: flex; justify-content: center; gap: 1rem; margin: 0.75rem 0;">
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                <div style="font-family: Georgia, serif; font-size: 1.2rem; font-weight: 700; color: #fca5a5;">ad</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0;">"towards"</div>
                            </div>
                            <div style="font-size: 1.5rem; color: #fbbf24; align-self: center;">+</div>
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                <div style="font-family: Georgia, serif; font-size: 1.2rem; font-weight: 700; color: #fca5a5;">tonare</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0;">"thunder"</div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.3); padding: 0.75rem; border-radius: 8px; border: 2px solid #fbbf24;">
                            <div style="font-size: 0.8rem; color: #fef3c7; line-height: 1.4;">Struck by divine thunder = numinous terror</div>
                        </div>
                    </div>
                </div>`
            },
            '38-novitate': {
                latin: 'novitate',
                device: 'Ablative of Cause',
                effect: '\'Because of/by the strangeness\' - novitas = unprecedented, strange phenomenon. Emphasises total unfamiliarity. They\'ve never witnessed anything like this.',
                highlightClasses: ['feature'],
                highlightColour: 'emphatic',
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);">
                    <div class="sibilance-title" style="color: #fef3c7;">‚ùì THE CAUSE REVEALED ‚ùì</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin: 1rem 0; color: white;">
                            attoniti <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700; box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);">novitate</span> pavent
                        </div>
                        <div style="display: flex; justify-content: center; align-items: center; gap: 1.5rem; margin: 1.5rem 0;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 1rem 1.5rem; border-radius: 8px; border: 2px solid rgba(255,255,255,0.5); flex: 1; max-width: 200px;">
                                <div style="font-size: 0.9rem; font-weight: 600; color: #fef3c7; margin-bottom: 0.3rem;">Question:</div>
                                <div style="color: white; font-weight: 700; font-size: 1.1rem;">WHY?</div>
                            </div>
                            <div style="font-size: 2.5rem; color: #fbbf24; filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));">‚Üí</div>
                            <div style="background: rgba(251, 191, 36, 0.3); padding: 1rem 1.5rem; border-radius: 8px; border: 2px solid #fbbf24; flex: 1; max-width: 200px; box-shadow: 0 0 25px rgba(251, 191, 36, 0.4);">
                                <div style="font-size: 0.9rem; font-weight: 600; color: #fef3c7; margin-bottom: 0.3rem;">Answer:</div>
                                <div style="color: white; font-weight: 700; font-size: 1.1rem;">NOVITATE!</div>
                            </div>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.6); padding: 1rem; border-radius: 6px; font-size: 0.85rem; color: #e2e8f0; line-height: 1.5;">
                            Ablative of cause: "because of the strangeness"
                        </div>
                    </div>
                </div>`
            },
            '38-manibus': {
                latin: 'manibusque supinis',
                device: 'Visual Gesture Detail + Religious Recognition',
                effect: 'Manus supinae = hands turned upward, the classic Roman prayer gesture acknowledging gods above. Physical detail shows immediate recognition of divine presence.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: radial-gradient(circle at center, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%);">
                    <div class="sibilance-title" style="color: #78350f; font-size: 0.9rem;">‚úã PRAYER GESTURE ‚úã</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-size: 3.5rem; margin: 0.75rem 0;">üôè</div>
                        <div style="font-family: Georgia, serif; font-size: 1.5rem; margin: 0.75rem 0; font-weight: 700; color: #78350f;">
                            manibus supinis
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin: 0.75rem 0;">
                            <div style="background: rgba(255, 255, 255, 0.6); padding: 0.75rem; border-radius: 8px; border: 2px solid #92400e;">
                                <div style="font-family: Georgia, serif; font-size: 1.1rem; font-weight: 700; color: #92400e;">manibus</div>
                                <div style="font-size: 0.8rem; color: #78350f;">"hands"</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.6); padding: 0.75rem; border-radius: 8px; border: 2px solid #92400e;">
                                <div style="font-family: Georgia, serif; font-size: 1.1rem; font-weight: 700; color: #92400e;">supinis</div>
                                <div style="font-size: 0.8rem; color: #78350f;">"upward"</div>
                            </div>
                        </div>
                        <div style="background: rgba(120, 53, 15, 0.9); padding: 0.75rem; border-radius: 8px; border: 2px solid #fef3c7;">
                            <div style="font-size: 0.8rem; color: #fde68a; line-height: 1.4;">
                                Roman prayer gesture: palms to the heavens = recognising divine presence
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '39-enclosing': {
                latin: 'Baucisque preces timidusque Philemon',
                device: 'Enclosing Word Order',
                effect: 'Names enclose \'preces\' (prayers): Baucis‚Äîprayers‚ÄîPhilemon. The couple come together to address the gods, their unity reflected in the very shape of the line.',
                highlightClasses: ['enclosing-outer', 'enclosing-inner'],
                visual: `<div class="enclosing-visual">
                    <div class="visual-title">Structure: A ‚Äî B ‚Äî A</div>
                    <div class="enclosing-line">
                        <span class="enclosing-outer-box">Baucis</span>
                        <span class="enclosing-inner-box">preces</span>
                        <span class="enclosing-outer-box">Philemon</span>
                    </div>
                    <div class="enclosing-label">
                        <span style="color: #3b82f6; font-weight: 600;">Names enclose ‚Üî</span>
                        <span style="color: #10b981; font-weight: 600;">‚Üí prayers ‚Üê</span>
                        <span style="color: #3b82f6; font-weight: 600;">‚Üî names enclose</span>
                    </div>
                </div>`
            },
            '40-veniam': {
                latin: 'veniam...orant (line-framing)',
                device: 'Line-Framing Structure',
                effect: 'Veniam (pardon) at the start and orant (they beg) at the end frame the entire line. Creates emphasis on their apology - everything leads to their desperate request for forgiveness.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #f87171 100%);">
                    <div class="sibilance-title" style="color: #fef3c7;">‚åú LINE-FRAMING EMPHASIS ‚åû</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="position: relative; padding: 1.5rem 1rem; display: inline-block;">
                            <div style="font-family: Georgia, serif; font-size: 1.6rem; line-height: 1.8; color: white;">
                                <span style="background: rgba(254, 243, 199, 0.3); padding: 4px 10px; border-radius: 6px; border: 2px solid #fef3c7; font-weight: 700; box-shadow: 0 0 20px rgba(254, 243, 199, 0.4);">veniam</span>
                                <span style="margin: 0 0.5rem; opacity: 0.7;">dapibus nullisque paratibus</span>
                                <span style="background: rgba(254, 243, 199, 0.3); padding: 4px 10px; border-radius: 6px; border: 2px solid #fef3c7; font-weight: 700; box-shadow: 0 0 20px rgba(254, 243, 199, 0.4);">orant</span>
                            </div>
                            <div style="position: absolute; top: 0; left: 10%; right: 10%; height: 2px; background: #fef3c7; box-shadow: 0 0 10px rgba(254, 243, 199, 0.8);"></div>
                            <div style="position: absolute; bottom: 0; left: 10%; right: 10%; height: 2px; background: #fef3c7; box-shadow: 0 0 10px rgba(254, 243, 199, 0.8);"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0 1.5rem; margin-top: 1rem;">
                            <div style="background: rgba(30, 41, 59, 0.6); padding: 0.75rem 1rem; border-radius: 6px; border: 2px solid #fef3c7;">
                                <div style="font-weight: 700; color: #fef3c7; font-size: 0.95rem;">veniam</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;">START</div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.6); padding: 0.75rem 1rem; border-radius: 6px; border: 2px solid #fef3c7;">
                                <div style="font-weight: 700; color: #fef3c7; font-size: 0.95rem;">orant</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;">END</div>
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '40-rhyme': {
                latin: 'dapibus...paratibus',
                device: 'Sound Pattern: Rhyming Ablatives',
                effect: 'The rhyming endings \'-ibus...-ibus\' create a sound pattern that links the two sources of shame: their meagre food AND their lack of preparations. The rhyme makes the line feel considered, deliberate.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="sibilance-title" style="color: #fbbf24;">Sound Pattern: Rhyme</div>
                    <div style="display: flex; justify-content: center; gap: 3rem; margin: 2rem 0; position: relative; z-index: 1;">
                        <div style="text-align: center;">
                            <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; color: white; margin-bottom: 0.5rem;">
                                dap<span style="background: rgba(251, 191, 36, 0.4); padding: 4px 8px; border-radius: 6px; border: 2px solid #fbbf24;">ibus</span>
                            </div>
                            <div style="font-size: 0.875rem; color: #e2e8f0;">"their meal"</div>
                        </div>
                        <div style="font-size: 3rem; color: #fbbf24; align-self: center;">üîä</div>
                        <div style="text-align: center;">
                            <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; color: white; margin-bottom: 0.5rem;">
                                parat<span style="background: rgba(251, 191, 36, 0.4); padding: 4px 8px; border-radius: 6px; border: 2px solid #fbbf24;">ibus</span>
                            </div>
                            <div style="font-size: 0.875rem; color: #e2e8f0;">"preparations"</div>
                        </div>
                    </div>
                    <div style="background: rgba(30, 41, 59, 0.6); padding: 1.5rem; border-radius: 8px; position: relative; z-index: 1;">
                        <div style="text-align: center; font-size: 1.8rem; color: #fbbf24; margin-bottom: 1rem; letter-spacing: 0.5rem;">
                            -ibus ... -ibus
                        </div>
                        <div style="text-align: center; color: #e2e8f0; font-size: 0.9rem; line-height: 1.6;">
                            The matching endings create a deliberate, formal sound‚Äî<br>linking their two sources of embarrassment together in the apology
                        </div>
                    </div>
                </div>`
            },
            '41-unicus': {
                latin: 'unicus',
                device: 'Emphatic Position + Advanced Placement',
                effect: '\'Only one\' - positioned emphatically at the start of the line, immediately signalling poverty. Not one of many geese - their single goose, total livestock. Ultimate sacrifice.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: radial-gradient(circle at center, #fbbf24 0%, #f59e0b 30%, #1f2937 70%);">
                    <div class="sibilance-title" style="color: #fef3c7;">üí° SPOTLIGHT ON ONE üí°</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 3rem; margin: 1.5rem 0; filter: drop-shadow(0 0 30px rgba(251, 191, 36, 1));">
                            <span style="background: rgba(254, 243, 199, 0.3); padding: 8px 20px; border-radius: 10px; border: 3px solid #fef3c7; font-weight: 700; color: #fef3c7; text-shadow: 0 0 20px rgba(254, 243, 199, 1);">UNICUS</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center; margin: 1.5rem 0;">
                            <div style="background: rgba(220, 38, 38, 0.3); padding: 1rem; border-radius: 8px; border: 2px dashed #dc2626;">
                                <div style="font-size: 2rem; margin-bottom: 0.3rem;">‚ùå</div>
                                <div style="font-size: 0.85rem; font-weight: 600; color: #fca5a5;">Many geese</div>
                            </div>
                            <div style="font-size: 2rem; color: #fef3c7; filter: drop-shadow(0 0 10px rgba(254, 243, 199, 0.8));">‚Üí</div>
                            <div style="background: rgba(34, 197, 94, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #22c55e;">
                                <div style="font-size: 2rem; margin-bottom: 0.3rem;">1Ô∏è‚É£</div>
                                <div style="font-size: 0.85rem; font-weight: 600; color: #86efac;">ONE goose</div>
                            </div>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.8); padding: 1rem; border-radius: 6px; border: 2px solid #fbbf24;">
                            <div style="font-size: 0.85rem; color: #fef3c7; line-height: 1.5;">
                                First position = immediate impact: This is ALL they have
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '41-minimae': {
                latin: 'minimae custodia villae',
                device: 'Genitive Description + Ironic Diction',
                effect: 'Minima villa = tiniest farm. Custodia (guardian) creates irony - what could need \'guarding\' at such a tiny holding? Yet the term also shows affection: even in poverty, this goose matters.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(to right, #1e40af 0%, #7c3aed 100%);">
                    <div class="sibilance-title" style="color: #fbbf24;">üòè GRAND WORD, TINY FARM üòè</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin: 1rem 0; color: white;">
                            minimae <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 12px; border-radius: 6px; border: 2px solid #fbbf24; font-weight: 700; box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);">custodia</span> villae
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                <div style="font-size: 2rem; margin-bottom: 0.3rem;">üèõÔ∏è</div>
                                <div style="font-weight: 700; color: #fca5a5; font-size: 0.95rem; margin-bottom: 0.3rem;">custodia usually:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;">Guards estates,<br>treasures, palaces</div>
                            </div>
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #3b82f6;">
                                <div style="font-size: 2rem; margin-bottom: 0.3rem;">üèöÔ∏è</div>
                                <div style="font-weight: 700; color: #93c5fd; font-size: 0.95rem; margin-bottom: 0.3rem;">But here:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;"><em>minimae villae</em><br>"tiniest farm"</div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #fbbf24; box-shadow: 0 0 20px rgba(251, 191, 36, 0.3);">
                            <div style="font-size: 0.85rem; color: white; line-height: 1.5;">
                                Irony: What needs "guarding" here? Yet shows affection‚Äîprecious even in poverty
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '42-dis': {
                latin: 'dis hospitibus',
                device: 'Dramatic Irony + Juxtaposition',
                effect: '\'For divine guests\' - they want to sacrifice FOR gods, not yet realising their guests ARE the gods. The two words contain the whole dramatic irony.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(90deg, #dc2626 0%, #1f2937 50%, #3b82f6 100%);">
                    <div class="sibilance-title" style="color: #fbbf24;">üòÆ DRAMATIC IRONY üòÆ</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 2.2rem; margin: 1rem 0; font-weight: 700; color: #fef3c7; text-shadow: 0 0 20px rgba(254, 243, 199, 0.6);">
                            dis hospitibus
                        </div>
                        <div style="display: flex; justify-content: center; gap: 1rem; margin: 1.5rem 0;">
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #ef4444; flex: 1; max-width: 220px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üßìüë¥</div>
                                <div style="font-weight: 700; color: #fca5a5; margin-bottom: 0.3rem; font-size: 0.85rem;">They think:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0; line-height: 1.4;">
                                    Sacrifice <em>FOR gods</em><br>to honour guests
                                </div>
                            </div>
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #3b82f6; flex: 1; max-width: 220px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üëÅÔ∏è</div>
                                <div style="font-weight: 700; color: #93c5fd; margin-bottom: 0.3rem; font-size: 0.85rem;">We know:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0; line-height: 1.4;">
                                    Guests <em>ARE gods</em>‚Äî<br>right there!
                                </div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #fbbf24; box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);">
                            <div style="font-size: 0.85rem; color: white; font-weight: 600;">The entire irony in TWO WORDS</div>
                        </div>
                    </div>
                </div>`
            },
            '42-domini': {
                latin: 'domini',
                device: 'Ironic Title',
                effect: 'Domini (masters/lords) could be read ironically - barely subsisting but called \'lords\'. Yet the term also dignifies them: they are masters of hospitality even in poverty.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: radial-gradient(circle at center, #7c3aed 0%, #5b21b6 50%, #1e1b4b 100%);">
                    <div class="sibilance-title" style="color: #fbbf24;">üëë DIGNIFIED LANGUAGE üëë</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 3rem; margin: 1rem 0; font-weight: 700; color: #fef3c7; filter: drop-shadow(0 0 20px rgba(254, 243, 199, 0.6));">
                            DOMINI
                        </div>
                        <div style="font-size: 1rem; color: #e9d5ff; margin-bottom: 1rem;">"the masters / lords"</div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                <div style="font-size: 1.3rem; margin-bottom: 0.3rem;">üòî</div>
                                <div style="font-weight: 700; color: #fca5a5; margin-bottom: 0.3rem; font-size: 0.85rem;">Reality:</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0; line-height: 1.4;">
                                    Tiniest farm<br>One goose<br>Barely subsisting
                                </div>
                            </div>
                            <div style="background: rgba(34, 197, 94, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #22c55e;">
                                <div style="font-size: 1.3rem; margin-bottom: 0.3rem;">üëë</div>
                                <div style="font-weight: 700; color: #86efac; margin-bottom: 0.3rem; font-size: 0.85rem;">Truth:</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0; line-height: 1.4;">
                                    Masters of hospitality<br>Lords of generosity<br>True nobility
                                </div>
                            </div>
                        </div>
                        <div style="background: rgba(139, 92, 246, 0.3); padding: 1rem; border-radius: 6px; border: 2px solid #a78bfa; box-shadow: 0 0 20px rgba(167, 139, 250, 0.4);">
                            <div style="font-size: 0.85rem; color: white; line-height: 1.5;">
                                Ovid dignifies them despite‚Äîor because of‚Äîtheir poverty
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '43-balanced': {
                latin: 'celer penna / tardos aetate',
                device: 'Balanced Parallelism + Comic Juxtaposition',
                effect: 'Perfectly balanced structure: adjective + ablative / adjective + ablative. The parallel structure creates humorous juxtaposition of swift goose versus slow elderly couple. The balanced grammatical form mirrors the physical comedy.',
                highlightClasses: ['parallel-adj', 'parallel-abl'],
                visual: `<div class="parallel-visual">
                    <div class="visual-title">Parallel Structure: Adjective + Ablative | Adjective + Ablative</div>
                    <div class="parallel-container">
                        <div class="parallel-side">
                            <span class="parallel-adj-box">celer</span> <span class="parallel-abl-box">penna</span>
                            <div style="font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem;">swift with wing</div>
                        </div>
                        <div class="parallel-vs">VS</div>
                        <div class="parallel-side">
                            <span class="parallel-adj-box">tardos</span> <span class="parallel-abl-box">aetate</span>
                            <div style="font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem;">slow with age</div>
                        </div>
                    </div>
                    <div class="parallel-label">
                        <span style="color: #f59e0b; font-weight: 600;">Orange = Adjective</span> ‚Ä¢ 
                        <span style="color: #8b5cf6; font-weight: 600;">Purple = Ablative</span>
                    </div>
                    <div class="parallel-label" style="margin-top: 0.75rem;">
                        The balanced grammar makes the physical mismatch funnier
                    </div>
                </div>`
            },
            '44-temporal': {
                latin: 'diu / tandem',
                device: 'Temporal Juxtaposition',
                effect: 'Diu (for a long time) and tandem (at last) are juxtaposed - stretches out the chase, then snaps it shut. Comic sequence expands (diu) then contracts (tandem) at the divine revelation moment.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #0891b2 0%, #06b6d4 50%, #22d3ee 100%);">
                    <div class="sibilance-title" style="color: #1e293b;">‚è∞ TIME MANIPULATION ‚ö°</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin: 1.5rem 0;">
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 1rem 1.5rem; border-radius: 8px; border: 2px solid #3b82f6; min-width: 180px;">
                                <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; color: #dbeafe; margin-bottom: 0.3rem; text-shadow: 0 0 10px rgba(219, 234, 254, 0.6);">diu</div>
                                <div style="font-size: 0.8rem; color: #e0f2fe;">"for a long time"</div>
                                <div style="margin-top: 0.75rem; font-size: 1.2rem;">‚è∞‚Üí‚Üí‚Üí‚Üí‚Üí</div>
                                <div style="margin-top: 0.3rem; font-size: 0.75rem; color: #3b82f6; font-weight: 700;">STRETCHES</div>
                            </div>
                            <div style="font-size: 2.5rem; color: #fbbf24; filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));">‚ö°</div>
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 1rem 1.5rem; border-radius: 8px; border: 2px solid #ef4444; min-width: 180px;">
                                <div style="font-family: Georgia, serif; font-size: 2rem; font-weight: 700; color: #fecaca; margin-bottom: 0.3rem; text-shadow: 0 0 10px rgba(254, 202, 202, 0.6);">tandem</div>
                                <div style="font-size: 0.8rem; color: #fee2e2;">"at last"</div>
                                <div style="margin-top: 0.75rem; font-size: 1.2rem;">‚ö°</div>
                                <div style="margin-top: 0.3rem; font-size: 0.75rem; color: #ef4444; font-weight: 700;">SNAPS</div>
                            </div>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.7); padding: 1rem; border-radius: 8px; border: 2px solid #0891b2;">
                            <div style="font-size: 0.85rem; color: white; line-height: 1.5;">
                                Chase drags on... then suddenly resolves. Time expands ‚Üí contracts
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '44-ipsos': {
                latin: 'ad ipsos',
                device: 'Emphatic Pronoun + Enjambment',
                effect: 'Ipsos (themselves, the very ones) at line end creates suspense through enjambment: \'to the very ones...\' then line break before: \'...gods\'. Dramatic irony at its peak - goose flees TO the gods.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(180deg, #7c3aed 0%, #2dd4bf 100%);">
                    <div class="sibilance-title" style="color: #fef3c7;">üìñ ENJAMBMENT SUSPENSE üìñ</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="background: rgba(30, 41, 59, 0.8); padding: 1.5rem; border-radius: 8px; border: 2px solid rgba(255,255,255,0.3); margin: 1rem 0;">
                            <div style="font-family: Georgia, serif; font-size: 1.3rem; line-height: 2; color: white;">
                                <div>est visus <span style="background: rgba(239, 68, 68, 0.4); padding: 4px 10px; border-radius: 6px; border: 2px solid #ef4444; font-weight: 700;">ad ipsos</span><span style="color: #fbbf24; font-size: 1.8rem; margin-left: 0.5rem;">...</span></div>
                                <div style="height: 15px; border-left: 3px dashed rgba(251, 191, 36, 0.6); margin: 0.5rem auto; width: 0;"></div>
                                <div style="margin-top: 0.5rem;"><span style="background: rgba(59, 130, 246, 0.4); padding: 4px 10px; border-radius: 6px; border: 2px solid #3b82f6; font-weight: 700;">confugisse deos</span></div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 1rem; margin: 1rem 0;">
                            <div style="background: rgba(239, 68, 68, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #ef4444; flex: 1; max-width: 200px;">
                                <div style="font-weight: 700; color: #fca5a5; font-size: 0.85rem;">Line 44:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;">"to the very ones..."</div>
                                <div style="margin-top: 0.5rem; font-size: 1.3rem;">‚ùì</div>
                            </div>
                            <div style="align-self: center; font-size: 2rem; color: #fbbf24; filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));">‚Üí</div>
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #3b82f6; flex: 1; max-width: 200px;">
                                <div style="font-weight: 700; color: #93c5fd; font-size: 0.85rem;">Line 45:</div>
                                <div style="font-size: 0.8rem; color: #e2e8f0;">"...the GODS"</div>
                                <div style="margin-top: 0.5rem; font-size: 1.3rem;">üí°</div>
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '45-superi': {
                latin: 'superi vetuere necari',
                device: 'Divine Intervention + Grand Language',
                effect: 'Superi (gods above) is formal, elevated vocabulary marking shift to divine intervention. Vetare (forbid) shows divine authority - gods make their presence fully known. Solemn language replaces comedy.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(180deg, #1e3a8a 0%, #7c3aed 100%);">
                    <div class="sibilance-title">Tone Shift: Comedy ‚Üí Divine Authority</div>
                    <div style="position: relative; z-index: 1; margin: 2rem 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                            <div style="flex: 1; text-align: center;">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">üòÇü¶Ü</div>
                                <div style="font-size: 0.9rem; color: #e2e8f0;">Lines 41-44:<br>Comic goose chase</div>
                            </div>
                            <div style="font-size: 3rem; color: #fbbf24;">‚Üí</div>
                            <div style="flex: 1; text-align: center;">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">‚ö°üëë</div>
                                <div style="font-size: 0.9rem; color: #e2e8f0;">Line 45:<br>Divine command</div>
                            </div>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 2rem; border-radius: 8px; border: 2px solid rgba(251, 191, 36, 0.3);">
                            <div style="font-family: Georgia, serif; font-size: 1.8rem; color: white; margin-bottom: 1rem; font-weight: 600;">
                                <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 12px; border-radius: 6px; border: 2px solid #fbbf24;">superi</span> 
                                <span style="background: rgba(251, 191, 36, 0.4); padding: 4px 12px; border-radius: 6px; border: 2px solid #fbbf24;">vetuere</span> 
                                necari
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: rgba(30, 41, 59, 0.6); border-radius: 6px;">
                                    <div style="font-weight: 600; color: #fbbf24;">superi</div>
                                    <div style="font-size: 0.875rem; color: #e2e8f0;">"the gods above"<br>(formal, elevated)</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: rgba(30, 41, 59, 0.6); border-radius: 6px;">
                                    <div style="font-weight: 600; color: #fbbf24;">vetuere</div>
                                    <div style="font-size: 0.875rem; color: #e2e8f0;">"forbade"<br>(divine authority)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="background: rgba(30, 41, 59, 0.6); padding: 1rem; border-radius: 6px; position: relative; z-index: 1; text-align: center;">
                        <div style="color: #fbbf24; font-size: 0.9rem; line-height: 1.6;">
                            Comedy stops. Solemn, grand language announces divine intervention.
                        </div>
                    </div>
                </div>`
            },
            '46-di': {
                latin: '\'di\'que \'sumus',
                device: 'Emphatic Revelation: Predicate First',
                effect: 'Normal Latin would be "sumus di". But Ovid reverses it: \'DI sumus\' - "GODS we are!" Predicate nominative first for maximum dramatic impact. After 45 lines of mystery, the truth declared with most important word first.',
                highlightClasses: ['emphatic'],
                visual: `<div class="emphatic-visual">
                    <div class="visual-title">Normal vs Emphatic Word Order</div>
                    <div class="emphatic-comparison">
                        <div class="emphatic-row">
                            <div class="emphatic-label">Normal order:</div>
                            <div class="emphatic-text">sumus di</div>
                            <div style="font-size: 0.875rem; color: #6b7280;">(we-are gods)</div>
                        </div>
                        <div class="emphatic-row highlighted">
                            <div class="emphatic-label">Ovid's order:</div>
                            <div class="emphatic-text"><span class="emphatic-first-box">DI</span> sumus</div>
                            <div style="font-size: 0.875rem; color: #ef4444; font-weight: 600;">(GODS we-are!)</div>
                        </div>
                    </div>
                    <div class="emphatic-note">
                        ‚Üë Predicate nominative in emphatic first position = thunder-clap revelation
                    </div>
                </div>`
            },
            '46-enclosing': {
                latin: 'meritas...poenas...impia',
                device: 'Enclosing Word Order',
                effect: 'Meritas (deserved) at start, then luet vicinia poenas, then impia (wicked) enjambed on next line. The punishment linguistically encircles the guilt - just as the neighbourhood will soon be entrapped by the flood.',
                highlightClasses: ['enclosing-outer', 'enclosing-inner'],
                visual: `<div class="enclosing-visual">
                    <div class="visual-title">Structure: A ‚Äî [subject] ‚Äî A (continued)</div>
                    <div class="enclosing-line">
                        <span class="enclosing-outer-box">meritas</span> luet <span class="enclosing-inner-box">vicinia</span> <span class="enclosing-outer-box">poenas</span>
                    </div>
                    <div class="enclosing-line" style="margin-top: 0.5rem;">
                        <span class="enclosing-outer-box">impia</span>
                    </div>
                    <div class="enclosing-label">
                        <span style="color: #3b82f6; font-weight: 600;">Punishment words enclose ‚Üí</span>
                        <span style="color: #10b981; font-weight: 600;">guilty party</span>
                        <span style="color: #3b82f6; font-weight: 600;">‚Üê punishment words</span>
                    </div>
                </div>`
            },
            '47-vobis': {
                latin: 'vobis immunibus',
                device: 'Legal Terminology + Contrast',
                effect: 'Immunibus (exempt, free from) is legal/civic terminology for exemption. Creates stark contrast: neighbourhood punished, but YOU exempt. Formal vocabulary for formal divine decree.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); position: relative;">
                    <div style="position: absolute; inset: 0; background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.05) 10px, rgba(255,255,255,0.05) 20px); pointer-events: none;"></div>
                    <div class="sibilance-title" style="color: #fef3c7;">‚öñÔ∏è LEGAL DECREE ‚öñÔ∏è</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 2rem; margin: 1rem 0; color: white;">
                            vobis <span style="background: rgba(34, 197, 94, 0.4); padding: 4px 12px; border-radius: 6px; border: 3px solid #22c55e; font-weight: 700; box-shadow: 0 0 25px rgba(34, 197, 94, 0.5);">immunibus</span>
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.3); padding: 1rem 1.5rem; border-radius: 8px; border: 2px solid #22c55e; margin: 1rem 0; box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);">
                            <div style="font-weight: 700; color: #d1fae5; font-size: 1.1rem; margin-bottom: 0.3rem;">immunis = EXEMPT</div>
                            <div style="font-size: 0.8rem; color: #e2e8f0; line-height: 1.4;">
                                Legal term: free from taxes, duties, punishment<br>Used in official decrees & laws
                            </div>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 1rem;">
                            <div style="background: rgba(220, 38, 38, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #dc2626; flex: 1; max-width: 180px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">‚öñÔ∏è‚ùå</div>
                                <div style="font-weight: 700; color: #fca5a5; font-size: 0.8rem; margin-bottom: 0.2rem;">Neighbourhood</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0;">Punished</div>
                            </div>
                            <div style="background: rgba(34, 197, 94, 0.3); padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid #22c55e; flex: 1; max-width: 180px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">‚öñÔ∏è‚úì</div>
                                <div style="font-weight: 700; color: #86efac; font-size: 0.8rem; margin-bottom: 0.2rem;">B & P</div>
                                <div style="font-size: 0.75rem; color: #e2e8f0;">EXEMPT</div>
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '48-relinquite': {
                latin: 'vestra relinquite tecta',
                device: 'Balanced Phrase + Direct Command',
                effect: 'Simple, balanced phrase: possessive-verb-object. The direct command is unadorned, urgent. Relinquite (imperative) - they must abandon everything. Simplicity makes command feel absolute, non-negotiable.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%);">
                    <div class="sibilance-title" style="color: #fef3c7;">üö® URGENT COMMAND üö®</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="font-family: Georgia, serif; font-size: 1.8rem; margin: 1rem 0; font-weight: 700; color: white; text-shadow: 0 0 15px rgba(0,0,0,0.5);">
                            <span style="background: rgba(245, 158, 11, 0.3); padding: 4px 10px; border-radius: 6px;">vestra</span>
                            <span style="background: rgba(239, 68, 68, 0.4); padding: 6px 12px; border-radius: 6px; margin: 0 0.5rem; border: 3px solid #fef3c7; box-shadow: 0 0 20px rgba(254, 243, 199, 0.6);">relinquite</span>
                            <span style="background: rgba(245, 158, 11, 0.3); padding: 4px 10px; border-radius: 6px;">tecta</span>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 0.75rem; margin: 1rem 0;">
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 0.75rem 1rem; border-radius: 6px; border: 2px solid #f59e0b;">
                                <div style="font-weight: 700; color: #fbbf24; font-size: 0.8rem;">vestra</div>
                                <div style="font-size: 0.7rem; color: #e2e8f0;">possessive</div>
                            </div>
                            <div style="font-size: 1.5rem; align-self: center; color: #fef3c7;">+</div>
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 0.75rem 1rem; border-radius: 6px; border: 2px solid #ef4444;">
                                <div style="font-weight: 700; color: #fca5a5; font-size: 0.8rem;">relinquite</div>
                                <div style="font-size: 0.7rem; color: #e2e8f0;">IMPERATIVE</div>
                            </div>
                            <div style="font-size: 1.5rem; align-self: center; color: #fef3c7;">+</div>
                            <div style="background: rgba(30, 41, 59, 0.7); padding: 0.75rem 1rem; border-radius: 6px; border: 2px solid #f59e0b;">
                                <div style="font-weight: 700; color: #fbbf24; font-size: 0.8rem;">tecta</div>
                                <div style="font-size: 0.7rem; color: #e2e8f0;">object</div>
                            </div>
                        </div>
                        <div style="background: rgba(239, 68, 68, 0.3); padding: 1rem; border-radius: 8px; border: 2px solid #fef3c7; box-shadow: 0 0 20px rgba(254, 243, 199, 0.3);">
                            <div style="font-size: 0.85rem; color: white; font-weight: 600; line-height: 1.5;">
                                Simple = Urgent. No embellishment.<br>Absolute. Non-negotiable.
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '49-ardua': {
                latin: 'ardua montis',
                device: 'Virgilian Phrasing + Partitive Genitive',
                effect: 'Elevated, Virgilian-style phrasing with partitive genitive: \'the heights OF the mountain\'. Emphasises how far and high they need to climb - selecting out the highest, steepest parts. Epic diction for epic salvation.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(180deg, #3b82f6 0%, #10b981 100%);">
                    <div class="sibilance-title" style="color: white;">Epic / Virgilian Language</div>
                    <div style="position: relative; z-index: 1;">
                        <div style="text-align: center; margin: 2rem 0;">
                            <div style="font-family: Georgia, serif; font-size: 2.2rem; color: white; font-weight: 600; margin-bottom: 1.5rem;">
                                in <span style="background: rgba(251, 191, 36, 0.4); padding: 6px 12px; border-radius: 6px; border: 2px solid #fbbf24;">ardua montis</span>
                            </div>
                            <div style="font-size: 3rem; margin: 1rem 0;">‚õ∞Ô∏è</div>
                        </div>
                        <div style="background: rgba(30, 41, 59, 0.6); padding: 2rem; border-radius: 8px; margin: 2rem 0;">
                            <div style="font-weight: 600; color: #fbbf24; margin-bottom: 1rem; font-size: 1.1rem;">Partitive Genitive:</div>
                            <div style="color: #e2e8f0; line-height: 1.8; font-size: 0.95rem;">
                                Not just "to the mountain"<br>
                                But "to the <em>heights</em> OF the mountain"<br><br>
                                Selecting out the HIGHEST, STEEPEST parts‚Äî<br>
                                emphasising the difficult climb to salvation
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.2); padding: 1rem; border-radius: 6px;">
                            <div style="color: white; font-size: 0.9rem; line-height: 1.6; text-align: center;">
                                Virgilian/epic vocabulary for an epic moment: salvation from the flood
                            </div>
                        </div>
                    </div>
                </div>`
            },
            '50-ite': {
                latin: 'ite simul',
                device: 'Dramatic Brevity',
                effect: 'Just two words end divine speech: \'Go together\'. After elaborate explanation, moment for talking is over. Ite (imperative) demands action. Simul (together) emphasises their unity will save them. Brevity creates urgency and finality.',
                highlightClasses: ['feature'],
                visual: `<div class="sibilance-visual" style="background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);">
                    <div class="sibilance-title" style="color: #fef3c7;">üö® DRAMATIC BREVITY üö®</div>
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <div style="background: rgba(100, 100, 100, 0.2); padding: 0.75rem; border-radius: 6px; border: 1px dashed rgba(255,255,255,0.3); margin-bottom: 1rem;">
                            <div style="font-size: 0.75rem; color: #e2e8f0; line-height: 1.4;">
                                Lines 46-49: Long explanation...<br>
                                "We are gods... you're exempt... leave... come with us..."
                            </div>
                            <div style="font-size: 1.5rem; color: #fbbf24; margin-top: 0.5rem;">‚Üì</div>
                        </div>
                        <div style="background: rgba(239, 68, 68, 0.3); padding: 1.5rem; border-radius: 8px; border: 3px solid #fef3c7; box-shadow: 0 0 25px rgba(254, 243, 199, 0.4); margin-bottom: 1rem;">
                            <div style="font-family: Georgia, serif; font-size: 2.5rem; font-weight: 700; color: #fef3c7; margin-bottom: 0.5rem; text-shadow: 0 0 15px rgba(254, 243, 199, 0.6);">
                                ite simul
                            </div>
                            <div style="display: flex; justify-content: center; gap: 1.5rem;">
                                <div>
                                    <div style="font-weight: 700; color: #fef3c7; font-size: 0.9rem;">ite</div>
                                    <div style="font-size: 0.75rem; color: #fde68a;">GO!</div>
                                </div>
                                <div>
                                    <div style="font-weight: 700; color: #fef3c7; font-size: 0.9rem;">simul</div>
                                    <div style="font-size: 0.75rem; color: #fde68a;">TOGETHER</div>
                                </div>
                            </div>
                        </div>
                        <div style="background: rgba(251, 191, 36, 0.3); padding: 0.75rem; border-radius: 6px; border: 2px solid #fbbf24;">
                            <div style="font-size: 0.8rem; color: white; line-height: 1.4;">
                                After elaborate explanation, time for talking is OVER. Two words = urgency, finality.
                            </div>
                        </div>
                    </div>
                </div>`
            }
        };
        
        const lineData = {
            36: {
                translation: "Meanwhile (they see) the mixing bowl, drained so many times, to be refilled",
                latin: "interea totiens haustum cratera repleri"
            },
            37: {
                translation: "of their own accord and by themselves they see the wines grow back",
                latin: "sponte sua per seque vident succrescere vina",
                note: "This completes the thought from line 36 - the wines refill themselves magically"
            },
            38: {
                translation: "thunderstruck by the strangeness they tremble, and with upturned hands",
                latin: "attoniti novitate pavent manibusque supinis",
                note: "Line runs into 39 - 'with upturned hands' they do what? See next line..."
            },
            39: {
                translation: "both Baucis and timid Philemon utter prayers",
                latin: "concipiunt Baucisque preces timidusque Philemon",
                note: "Completes line 38 - with upturned hands, they utter prayers"
            },
            40: {
                translation: "and they beg pardon for their meal and lacking preparations",
                latin: "et veniam dapibus nullisque paratibus orant"
            },
            41: {
                translation: "there was one goose, guardian of the tiny farm",
                latin: "unicus anser erat, minimae custodia villae"
            },
            42: {
                translation: "which the hosts were preparing to sacrifice for their divine guests",
                latin: "quem dis hospitibus domini mactare parabant",
                note: "'which' refers back to the goose from line 41"
            },
            43: {
                translation: "swift with his wing he wearies those slow with age",
                latin: "ille celer penna tardos aetate fatigat",
                note: "'he' = the goose; 'those slow with age' = Baucis and Philemon trying to catch him"
            },
            44: {
                translation: "and he evades them for a long time and at last seemed to the very ones",
                latin: "eluditque diu tandemque est visus ad ipsos",
                note: "Line continues into 45 - 'seemed to the very ones...' to WHAT? Keep reading!"
            },
            45: {
                translation: "to have fled for refuge to the gods. The gods above forbade (him) to be killed",
                latin: "confugisse deos. superi vetuere necari",
                note: "Completes line 44: seemed to have fled TO THE GODS (the guests!). Then the gods forbid the sacrifice"
            },
            46: {
                translation: "'We are gods, and the neighbourhood will pay deserved punishments",
                latin: "'di'que 'sumus, meritasque luet vicinia poenas",
                note: "Line runs into 47 - the 'punishments' are described as what in the next line?"
            },
            47: {
                translation: "the wicked (neighbourhood)' they said; 'for you, exempt from this",
                latin: "impia' dixerunt; 'vobis immunibus huius",
                note: "'impia' completes line 46 - wicked punishments. Then 'exempt from this...' from what? Line 48..."
            },
            48: {
                translation: "to be from evil will be granted. Just leave your homes",
                latin: "esse mali dabitur. modo vestra relinquite tecta",
                note: "Completes 47: 'exempt from this evil'. Now the command begins"
            },
            49: {
                translation: "and accompany our steps and to the heights of the mountain",
                latin: "ac nostros comitate gradus et in ardua montis",
                note: "Command continues from line 48 - leave your homes AND go to the mountain..."
            },
            50: {
                translation: "go together'",
                latin: "ite simul'",
                note: "Completes the command sequence: leave ‚Üí accompany us ‚Üí go to the mountain ‚Üí GO TOGETHER"
            }
        };
        
        function clearAllHighlights() {
            const activeElements = document.querySelectorAll('[class*="active-"]');
            activeElements.forEach(el => {
                el.className = el.className.replace(/active-[\w-]+/g, '').trim();
            });
        }
        
        function showLine(lineNumber) {
            // Update active state for lines
            document.querySelectorAll('.latin-line').forEach(line => {
                line.classList.remove('active');
            });
            document.querySelector(`[data-line="${lineNumber}"]`).classList.add('active');
            
            const data = lineData[lineNumber];
            
            // Show translation with optional note
            const noteHTML = data.note ? `<div style="background: rgba(59, 130, 246, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #3b82f6; margin-top: 1rem; font-size: 0.9rem; line-height: 1.6; color: #1f2937;">
                <span style="font-weight: 600; color: #3b82f6;">üí° Note:</span> ${data.note}
            </div>` : '';
            
            const translationPanel = document.getElementById('translationPanel');
            translationPanel.innerHTML = `
                <div class="content-panel active">
                    <div class="latin-display">${data.latin}</div>
                    <div class="translation-text">"${data.translation}"</div>
                    ${noteHTML}
                </div>
            `;
        }
        
        function showStyle(styleId) {
            // Clear previous highlighting only if different
            if (currentStyleId !== styleId) {
                clearAllHighlights();
                currentStyleId = styleId;
                
                const data = styleData[styleId];
                
                // Map style IDs to thematic colour classes
                const themeMap = {
                    '38-attoniti': 'thunder',
                    '38-novitate': 'revelation',
                    '38-manibus': 'prayer',
                    '40-veniam': 'urgent',
                    '40-rhyme': 'revelation',
                    '41-unicus': 'spotlight',
                    '41-minimae': 'ironic',
                    '42-dis': 'dramatic-irony',
                    '42-domini': 'regal',
                    '44-temporal': 'time',
                    '44-ipsos': 'suspense',
                    '45-superi': 'divine',
                    '47-vobis': 'legal',
                    '48-relinquite': 'command',
                    '49-ardua': 'epic',
                    '50-ite': 'brief'
                };
                
                // Apply highlighting to relevant elements with proper colours
                const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
                elements.forEach(el => {
                    const baseClass = Array.from(el.classList).find(c => c.startsWith('hl-'));
                    if (baseClass) {
                        const deviceType = baseClass.substring(3);
                        // Apply the active class for the device type
                        el.classList.add(`active-${deviceType}`);
                        
                        // If it's a feature, add the thematic colour class
                        if (deviceType === 'feature' && themeMap[styleId]) {
                            el.classList.add(themeMap[styleId]);
                        }
                    }
                });
            }
            
            const data = styleData[styleId];
            const visualHTML = data.visual || '';
            
            // Create highlighted Latin text for the display box
            let highlightedLatin = data.latin;
            const elements = document.querySelectorAll(`[data-style="${styleId}"]`);
            const highlightedWords = [];
            elements.forEach(el => {
                const text = el.textContent.trim();
                const baseClass = Array.from(el.classList).find(c => c.startsWith('hl-'));
                if (baseClass && text) {
                    highlightedWords.push({text, class: baseClass, themeClass: Array.from(el.classList).find(c => !c.startsWith('hl-') && c !== 'active-feature')});
                }
            });
            
            // Apply highlighting spans to the latin display
            highlightedWords.forEach(word => {
                const colorMap = {
                    'hl-chiasmus-a': 'background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-chiasmus-b': 'background: rgba(59, 130, 246, 0.3); border: 1px solid #3b82f6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-sibilance': 'background: rgba(251, 191, 36, 0.3); border: 1px solid #fbbf24; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-enclosing-outer': 'background: rgba(59, 130, 246, 0.3); border: 1px solid #3b82f6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-enclosing-inner': 'background: rgba(16, 185, 129, 0.3); border: 1px solid #10b981; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-parallel-adj': 'background: rgba(245, 158, 11, 0.3); border: 1px solid #f59e0b; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-parallel-abl': 'background: rgba(139, 92, 246, 0.3); border: 1px solid #8b5cf6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-emphatic': 'background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-thunder': 'background: rgba(251, 191, 36, 0.3); border: 1px solid #fbbf24; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-prayer': 'background: rgba(251, 191, 36, 0.3); border: 1px solid #f59e0b; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-revelation': 'background: rgba(139, 92, 246, 0.3); border: 1px solid #8b5cf6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-urgent': 'background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-spotlight': 'background: rgba(251, 191, 36, 0.3); border: 1px solid #fbbf24; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-ironic': 'background: rgba(124, 58, 237, 0.3); border: 1px solid #7c3aed; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-dramatic-irony': 'background: rgba(220, 38, 38, 0.3); border: 1px solid #dc2626; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-regal': 'background: rgba(139, 92, 246, 0.3); border: 1px solid #8b5cf6; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-time': 'background: rgba(8, 145, 178, 0.3); border: 1px solid #0891b2; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-suspense': 'background: rgba(124, 58, 237, 0.3); border: 1px solid #7c3aed; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-divine': 'background: rgba(30, 64, 175, 0.3); border: 1px solid #1e40af; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-legal': 'background: rgba(30, 64, 175, 0.3); border: 1px solid #3b82f6; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-command': 'background: rgba(220, 38, 38, 0.3); border: 1px solid #dc2626; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature-epic': 'background: rgba(16, 185, 129, 0.3); border: 1px solid #10b981; padding: 2px 6px; border-radius: 4px; font-weight: 600;',
                    'hl-feature-brief': 'background: rgba(220, 38, 38, 0.3); border: 1px solid #dc2626; padding: 2px 6px; border-radius: 4px; font-weight: 700;',
                    'hl-feature': 'background: rgba(139, 92, 246, 0.3); border: 1px solid #8b5cf6; padding: 2px 6px; border-radius: 4px; font-weight: 600;'
                };
                
                // Check if we have a thematic style
                const styleKey = word.themeClass ? `${word.class}-${word.themeClass}` : word.class;
                const style = colorMap[styleKey] || colorMap[word.class] || '';
                
                if (style && word.text.length > 0) {
                    const regex = new RegExp(`\\b${word.text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'g');
                    highlightedLatin = highlightedLatin.replace(regex, `<span style="${style}">${word.text}</span>`);
                }
            });
            
            // Show style analysis
            const stylePanel = document.getElementById('stylePanel');
            stylePanel.innerHTML = `
                <div class="content-panel active">
                    <div class="latin-display">${highlightedLatin}</div>
                    <div class="style-feature">
                        <h4>${data.device}</h4>
                        <p>${data.effect}</p>
                    </div>
                    ${visualHTML}
                </div>
            `;
        }
    </script>
</body>
</html>
