<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.4 Prepositions with the Ablative - Classicalia</title>
    <link rel="stylesheet" href="../../../../../shared/styles.css">
    <link rel="stylesheet" href="../lesson-styles.css">
    <script src="../../../../../shared/vocabulary-data.js"></script>
    <script src="../vocab-sidebar.js"></script>
    <script src="../annotation-tool.js"></script>
    <style>
        .preposition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .prep-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            min-height: 140px;
        }

        .prep-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-color: #28a745;
        }

        .prep-card.revealed {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-color: #28a745;
        }

        .prep-emoji {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .prep-latin {
            font-size: 1.3rem;
            font-weight: 700;
            color: #28a745;
            margin-bottom: 0.5rem;
        }

        .prep-english {
            font-size: 1rem;
            color: #495057;
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            bottom: 1rem;
            left: 0;
            right: 0;
        }

        .prep-card.revealed .prep-english {
            opacity: 1;
        }

        .prep-card.unrevealed .prep-english::before {
            content: '???';
            opacity: 0.5;
            font-style: italic;
        }

        .comparison-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .comparison-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            border-left: 4px solid #007bff;
        }

        .comparison-card.ablative {
            border-left-color: #28a745;
        }

        .comparison-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .comparison-title.accusative {
            color: #007bff;
        }

        .comparison-title.ablative {
            color: #28a745;
        }
    </style>
    <script>
        // Set the current chapter for this lesson
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for vocab sidebar to load, then set chapter
            setTimeout(function() {
                // Set current chapter if the function exists
                if (typeof setCurrentChapter === 'function') {
                    setCurrentChapter(2); // Chapter 2 for this lesson
                }
                
                // Ensure vocabulary sidebar shows Chapter 2 by default
                const chapterFilter = document.getElementById('chapterFilter');
                if (chapterFilter) {
                    chapterFilter.value = '2';
                    // Call loadVocabulary directly with chapter 2
                    if (typeof loadVocabulary === 'function') {
                        loadVocabulary(2);
                    }
                }
            }, 300); // Longer delay to ensure vocab-sidebar.js has loaded
            
            // Add annotation button click handler
            const annotationToggle = document.getElementById('annotationToggle');
            if (annotationToggle) {
                annotationToggle.addEventListener('click', function() {
                    console.log('Annotation button clicked');
                    if (typeof annotationTool !== 'undefined') {
                        annotationTool.toggle();
                    }
                });
            }
        });
    </script>
</head>
<body>
    <!-- Global Info Button -->
    <button onclick="showInfoModal()" class="global-info-btn">‚ÑπÔ∏è</button>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <a href="../../../../index.html">Classicalia</a>
            </div>
            <div class="author">by Lawrence McNally</div>
            <div class="subtitle">Year 9 Latin ‚Ä¢ Chapter 2</div>
            
            <div class="page-nav">
                <a href="../../../../index.html" class="nav-link">‚Üê Home</a>
                <a href="../index.html" class="nav-link">‚Üê Year 9 Latin</a>
            </div>
        </div>
    </header>

    <main>
        <div class="lesson-container">
            <div class="lesson-header">
                <span class="lesson-number">LESSON 2.4</span>
                <h1 class="lesson-title">Prepositions with the Ablative</h1>
                <p class="lesson-subtitle">Away from, out of, with, and location</p>
            </div>

            <!-- Review Section -->
            <div class="content-section">
                <h2>Building on What We Know</h2>
                
                <p class="grammar-text">
                    In Chapter 1, we learnt five prepositions that take the <strong>accusative case</strong>: 
                    ad, circum, contra, in, per. These mostly showed movement <em>towards</em> or <em>through</em> 
                    something. Now we'll learn prepositions that take the <strong>ablative case</strong>.
                </p>

                <p class="grammar-text">
                    Remember how the ablative case means "by", "with", or "from"? Well, these prepositions 
                    often reinforce or focus those meanings. Just like accusative prepositions work with the 
                    "targeting" nature of the accusative, ablative prepositions work with the "separation" 
                    and "instrument" meanings of the ablative.
                </p>

                <div class="info-note">
                    <strong>Pattern to Notice:</strong> Accusative prepositions often show movement <em>towards</em>. 
                    Ablative prepositions often show movement <em>away from</em> or being <em>with</em> something.
                </div>
            </div>

            <!-- Interactive Prepositions Grid -->
            <div class="content-section">
                <h2>Four Key Ablative Prepositions</h2>
                
                <p class="grammar-text">
                    Here are four important prepositions that take the ablative. Click each card to reveal 
                    its meaning:
                </p>

                <div class="preposition-grid">
                    <div class="prep-card unrevealed" onclick="togglePrepCard(this)">
                        <span class="prep-emoji">‚¨ÖÔ∏è</span>
                        <div class="prep-latin">a/ab</div>
                        <div class="prep-english" data-translation="from, away from"></div>
                    </div>

                    <div class="prep-card unrevealed" onclick="togglePrepCard(this)">
                        <span class="prep-emoji">üö™</span>
                        <div class="prep-latin">e/ex</div>
                        <div class="prep-english" data-translation="from, out of"></div>
                    </div>

                    <div class="prep-card unrevealed" onclick="togglePrepCard(this)">
                        <span class="prep-emoji">ü§ù</span>
                        <div class="prep-latin">cum</div>
                        <div class="prep-english" data-translation="with (accompanied by)"></div>
                    </div>

                    <div class="prep-card unrevealed" onclick="togglePrepCard(this)">
                        <span class="prep-emoji">üìç</span>
                        <div class="prep-latin">in</div>
                        <div class="prep-english" data-translation="into, onto (motion)"></div>
                    </div>
                </div>

                <button class="reveal-btn" onclick="revealAllPreps()">Reveal All</button>

                <div class="info-note">
                    <strong>Forms to Remember:</strong> Use <em>a</em> and <em>e</em> before consonants, but 
                    <em>ab</em> and <em>ex</em> before vowels and 'h'. This makes them easier to pronounce!
                </div>
            </div>

            <!-- The Big Comparison: in + acc vs in + abl -->
            <div class="comparison-section">
                <h2 style="text-align: center; color: #856404;">‚ö†Ô∏è Important: "in" with Two Cases</h2>
                
                <p class="grammar-text" style="text-align: center;">
                    The preposition <strong>in</strong> can take either the accusative OR the ablative, 
                    with a crucial difference in meaning:
                </p>

                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="comparison-title accusative">in + ACCUSATIVE</div>
                        <div style="font-size: 1.1em; margin: 1rem 0;"><em>into, onto</em> (motion towards)</div>
                        <div class="vocab-latin" style="color: #007bff;">in hortum ambulat</div>
                        <div style="margin-top: 0.5rem;">He walks <strong>into</strong> the garden</div>
                        <div style="font-size: 0.9em; color: #666; margin-top: 0.5rem;">
                            (He enters it - movement towards)
                        </div>
                    </div>
                    
                    <div class="comparison-card ablative">
                        <div class="comparison-title ablative">in + ABLATIVE</div>
                        <div style="font-size: 1.1em; margin: 1rem 0;"><em>in, on</em> (staying put)</div>
                        <div class="vocab-latin" style="color: #28a745;">in horto ambulat</div>
                        <div style="margin-top: 0.5rem;">He walks <strong>in</strong> the garden</div>
                        <div style="font-size: 0.9em; color: #666; margin-top: 0.5rem;">
                            (He's already there - location)
                        </div>
                    </div>
                </div>
            </div>

            <!-- Table Section -->
            <div class="content-section">
                <h2>Prepositions in Context</h2>
                
                <p class="grammar-text">
                    Let's see how these prepositions work with nouns. Remember, the noun after these 
                    prepositions must be in the ablative case:
                </p>

                <table class="conjugation-table">
                    <thead>
                        <tr>
                            <th>Preposition</th>
                            <th>+ Ablative Noun</th>
                            <th>Phrase Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="stem-col">a/ab</td>
                            <td class="unrevealed" onclick="revealCell(this)">
                                <div class="content">ab insul<span style="color: #28a745;">ƒÅ</span></div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">from the island</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="stem-col">e/ex</td>
                            <td class="unrevealed" onclick="revealCell(this)">
                                <div class="content">e vill<span style="color: #28a745;">ƒÅ</span></div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">out of the house</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="stem-col">cum</td>
                            <td class="unrevealed" onclick="revealCell(this)">
                                <div class="content">cum puell<span style="color: #28a745;">ƒÅ</span></div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">with the girl</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="stem-col">in</td>
                            <td class="unrevealed" onclick="revealCell(this)">
                                <div class="content">in hort<span style="color: #28a745;">o</span></div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">in the garden</div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <button class="reveal-btn" onclick="toggleAllCells()">Reveal All</button>
            </div>

            <!-- Examples Section -->
            <div class="content-section">
                <h2>Complete Sentences</h2>
                
                <p class="grammar-text">
                    Now let's see these prepositions in full sentences. Click to reveal the translations 
                    and notice how they reinforce the ablative's meanings:
                </p>

                <div class="practice-box">
                    <div class="practice-title">Ablative Prepositions in Action</div>
                    <div class="sentence-practice">
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            nuntius ab insulƒÅ navigat.
                            <div class="translation hidden">
                                <strong>Breakdown:</strong> nuntius (messenger - nom), ab insulƒÅ (from the island - prep + abl), navigat (sails)<br>
                                <strong>Translation:</strong> The messenger sails away from the island.
                            </div>
                        </div>
                        
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            ancillae dominum e villƒÅ portant.
                            <div class="translation hidden">
                                <strong>Breakdown:</strong> ancillae (slave-girls - nom pl), dominum (master - acc), e villƒÅ (out of the house - prep + abl), portant (carry)<br>
                                <strong>Translation:</strong> The slave-girls carry the master out of the house.
                            </div>
                        </div>
                        
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            cum puellƒÅ ambulo.
                            <div class="translation hidden">
                                <strong>Breakdown:</strong> cum puellƒÅ (with the girl - prep + abl), ambulo (I walk)<br>
                                <strong>Translation:</strong> I walk with the girl.
                            </div>
                        </div>

                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            servus in hort≈ç laborat.
                            <div class="translation hidden">
                                <strong>Breakdown:</strong> servus (slave - nom), in hort≈ç (in the garden - prep + abl), laborat (works)<br>
                                <strong>Translation:</strong> The slave works in the garden.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-note">
                    <strong>Meaning Connection:</strong> Notice how these prepositions reinforce the ablative's natural meanings - 
                    a/ab and e/ex emphasise separation ("from"), cum emphasises accompaniment ("with"), 
                    and in emphasises location.
                </div>
            </div>

            <!-- Cum vs Ablative Alone -->
            <div class="content-section">
                <h2>Two Ways to Say "With"</h2>
                
                <p class="grammar-text">
                    You now know two ways to express "with" in Latin! There's an important difference 
                    between them:
                </p>

                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="comparison-title" style="color: #007bff;">cum + ablative</div>
                        <div style="margin: 1rem 0;">For people (accompanied by)</div>
                        <div class="vocab-latin" style="color: #007bff;">cum amic≈ç pugn≈ç</div>
                        <div style="margin-top: 0.5rem;">I fight with my friend</div>
                        <div style="font-size: 0.9em; color: #666; margin-top: 0.5rem;">
                            (He's fighting alongside me)
                        </div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="comparison-title" style="color: #28a745;">ablative alone</div>
                        <div style="margin: 1rem 0;">For things (using as a tool)</div>
                        <div class="vocab-latin" style="color: #28a745;">gladi≈ç pugn≈ç</div>
                        <div style="margin-top: 0.5rem;">I fight with a sword</div>
                        <div style="font-size: 0.9em; color: #666; margin-top: 0.5rem;">
                            (The sword is my instrument)
                        </div>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="content-section">
                <h2>Quick Practice</h2>
                
                <div class="practice-box">
                    <div class="practice-title">Choose the Right Translation</div>
                    <div class="sentence-practice">
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            puella in villam festinat
                            <div class="translation hidden">
                                <strong>in + accusative:</strong> The girl hurries <em>into</em> the house (motion towards)
                            </div>
                        </div>
                        
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            puella in villƒÅ laborat
                            <div class="translation hidden">
                                <strong>in + ablative:</strong> The girl works <em>in</em> the house (location)
                            </div>
                        </div>
                        
                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            domini e for≈ç veniunt
                            <div class="translation hidden">
                                <strong>e + ablative:</strong> The masters come <em>from</em> the forum
                            </div>
                        </div>

                        <div class="latin-sentence" onclick="toggleTranslation(this)">
                            cum servis cibum consumit
                            <div class="translation hidden">
                                <strong>cum + ablative:</strong> He eats food <em>with</em> the slaves (accompanied by)
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="nav-buttons">
                <a href="2-3.html" class="nav-btn nav-prev">‚Üê Previous: The Ablative Case</a>
                <a href="2-5.html" class="nav-btn nav-next">Next: Case Review ‚Üí</a>
            </div>
        </div>
    </main>

    <!-- Vocabulary Sidebar -->
    <div id="vocabSidebar" class="vocab-sidebar">
        <div class="vocab-header">
            <h3>Vocabulary</h3>
            <button id="closeSidebar" class="close-sidebar">√ó</button>
        </div>
        
        <div class="vocab-search">
            <input type="text" id="vocabSearch" placeholder="Search vocabulary..." />
            <select id="chapterFilter">
                <option value="2">Chapter 2</option>
                <option value="1">Chapter 1</option>
                <option value="all">All Chapters</option>
            </select>
        </div>
        
        <div id="vocabList" class="vocab-list">
            <!-- Vocabulary will be loaded here -->
        </div>
    </div>

    <!-- Vocabulary Toggle Button -->
    <button id="vocabToggle" class="vocab-toggle">üìö</button>

    <!-- Annotation Toggle Button -->
    <button id="annotationToggle" class="annotation-toggle">‚úèÔ∏è</button>

    <script>
        function togglePrepCard(card) {
            if (card.classList.contains('unrevealed')) {
                card.classList.remove('unrevealed');
                card.classList.add('revealed');
                const englishDiv = card.querySelector('.prep-english');
                englishDiv.textContent = englishDiv.getAttribute('data-translation');
            } else {
                card.classList.remove('revealed');
                card.classList.add('unrevealed');
                const englishDiv = card.querySelector('.prep-english');
                englishDiv.textContent = '';
            }
        }

        function revealAllPreps() {
            const cards = document.querySelectorAll('.prep-card');
            const hasUnrevealed = document.querySelector('.prep-card.unrevealed');
            
            cards.forEach(card => {
                if (hasUnrevealed) {
                    card.classList.remove('unrevealed');
                    card.classList.add('revealed');
                    const englishDiv = card.querySelector('.prep-english');
                    englishDiv.textContent = englishDiv.getAttribute('data-translation');
                } else {
                    card.classList.remove('revealed');
                    card.classList.add('unrevealed');
                    const englishDiv = card.querySelector('.prep-english');
                    englishDiv.textContent = '';
                }
            });
        }

        function revealCell(cell) {
            if (cell.classList.contains('unrevealed')) {
                cell.classList.remove('unrevealed');
                cell.classList.add('revealed');
            } else if (cell.classList.contains('revealed')) {
                cell.classList.remove('revealed');
                cell.classList.add('unrevealed');
            }
        }

        function toggleAllCells() {
            const unrevealed = document.querySelectorAll('.conjugation-table .unrevealed');
            const revealed = document.querySelectorAll('.conjugation-table .revealed');
            
            if (unrevealed.length > 0) {
                unrevealed.forEach(cell => {
                    cell.classList.remove('unrevealed');
                    cell.classList.add('revealed');
                });
            } else {
                revealed.forEach(cell => {
                    cell.classList.remove('revealed');
                    cell.classList.add('unrevealed');
                });
            }
        }

        function toggleTranslation(sentence) {
            const translation = sentence.querySelector('.translation');
            translation.classList.toggle('hidden');
            sentence.classList.toggle('revealed');
        }

        // Modal
        function showInfoModal() {
            document.getElementById('infoModal').style.display = 'block';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').style.display = 'none';
        }
    </script>

    <!-- Info Modal -->
    <div id="infoModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeInfoModal()">&times;</span>
            <div class="modal-header">
                <h2>salve! üëã</h2>
            </div>
            <div class="modal-body">
                <div class="modal-text">
                    <p>Thank you for checking out Classicalia!</p>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Custom table styling for this lesson - override default styles */
        .conjugation-table .number-col {
            width: 60px !important;
        }
        
        .conjugation-table .person-col {
            width: 80px !important;
        }
        
        .conjugation-table .ending-col {
            width: 120px !important;
        }
        
        .conjugation-table .meaning-col {
            width: 120px !important;
        }
        
        /* Also set the table headers */
        .conjugation-table th:nth-child(1) {
            width: 60px !important;
        }
        
        .conjugation-table th:nth-child(2) {
            width: 80px !important;
        }
        
        .conjugation-table th:nth-child(3),
        .conjugation-table th:nth-child(4) {
            width: 120px !important;
        }
        
        .conjugation-table th:nth-child(5) {
            width: 120px !important;
        }
    </style>
</body>
</html>
