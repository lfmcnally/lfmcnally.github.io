<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.2 Present Tense Verbs - Classicalia</title>
    <link rel="stylesheet" href="../../../../../shared/styles.css">
    <link rel="stylesheet" href="../lesson-styles.css">
    <script src="../../../../../shared/vocabulary-data.js"></script>
    <script src="../vocab-sidebar.js"></script>
    <script src="../annotation-tool.js"></script>
    <script>
        // Set the current chapter for this lesson
        document.addEventListener('DOMContentLoaded', function() {
            setCurrentChapter(1); // Chapter 1 for this lesson
            
            // Add annotation button click handler
            const annotationToggle = document.getElementById('annotationToggle');
            if (annotationToggle) {
                annotationToggle.addEventListener('click', function() {
                    console.log('Annotation button clicked');
                    if (typeof annotationTool !== 'undefined') {
                        annotationTool.toggle();
                    }
                });
            }
            
            // Debug: Check if annotation tool is loaded
            console.log('Checking annotation tool...');
            if (typeof annotationTool !== 'undefined') {
                console.log('Annotation tool loaded successfully');
            } else {
                console.log('Annotation tool not found');
            }
        });
    </script>
</head>
<body>
    <!-- Global Info Button -->
    <button onclick="showInfoModal()" class="global-info-btn">ℹ️</button>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <a href="../../../../index.html">Classicalia</a>
            </div>
            <div class="author">by Lawrence McNally</div>
            <div class="subtitle">Year 9 Latin • Chapter 1</div>
            
            <div class="page-nav">
                <a href="../../../../index.html" class="nav-link">← Home</a>
                <a href="../index.html" class="nav-link">← Year 9 Latin</a>
            </div>
        </div>
    </header>

    <main>
        <div class="lesson-container">
            <div class="lesson-header">
                <span class="lesson-number">LESSON 1.2</span>
                <h1 class="lesson-title">Present Tense: <em>porto</em></h1>
                <p class="lesson-subtitle">First conjugation verbs in the present tense</p>
            </div>

            <!-- Grammar Explanation -->
            <div class="content-section">
                <h2>PRESENT TENSE: porto</h2>
                
                <p class="grammar-text">
                    Think of Latin verbs like LEGO blocks - they're built from separate pieces that snap together! 
                    Every Latin verb has a <strong>stem</strong> (the main part that gives the meaning) and an <strong>ending</strong> 
                    that tells us who's doing the action. Let's explore this with <strong>porto</strong> - which means "I carry".
                </p>

                <p class="grammar-text">
                    What's brilliant about Latin is that it packs lots of information into one word. Where English needs 
                    "I carry" or "they are carrying", Latin just changes the verb ending to tell us everything we need to know!
                </p>

                <!-- Main Table -->
                <table class="conjugation-table">
                    <thead>
                        <tr>
                            <th>Number</th>
                            <th>Person</th>
                            <th>Pronoun</th>
                            <th>Stem</th>
                            <th>Vowel</th>
                            <th>Ending</th>
                            <th>Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="number-col">Singular</td>
                            <td class="person-col">1st</td>
                            <td class="pronoun-col">I</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">—</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-ō</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">I carry / I am carrying</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="number-col"></td>
                            <td class="person-col">2nd</td>
                            <td class="pronoun-col">you</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-a</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-s</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">you carry / you are carrying</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="number-col"></td>
                            <td class="person-col">3rd</td>
                            <td class="pronoun-col">he/she/it</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-a</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-t</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">he/she/it carries / is carrying</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="number-col">Plural</td>
                            <td class="person-col">1st</td>
                            <td class="pronoun-col">we</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-a</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-mus</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">we carry / we are carrying</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="number-col"></td>
                            <td class="person-col">2nd</td>
                            <td class="pronoun-col">you (all)</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-a</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-tis</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">you (all) carry / are carrying</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="number-col"></td>
                            <td class="person-col">3rd</td>
                            <td class="pronoun-col">they</td>
                            <td class="stem-col">port</td>
                            <td class="vowel-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-a</div>
                            </td>
                            <td class="ending-col unrevealed" onclick="revealCell(this)">
                                <div class="content">-nt</div>
                            </td>
                            <td class="meaning-col unrevealed" onclick="revealCell(this)">
                                <div class="content">they carry / they are carrying</div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <button class="reveal-btn" id="toggleBtn" onclick="toggleAll()">Reveal All</button>

                <ul class="grammar-points">
                    <li>Notice the pattern: <strong>port-</strong> stays the same (that's our stem), then we add <strong>-a-</strong> as a connector vowel, then the personal ending tells us who's doing the carrying.</li>
                    <li>Why doesn't <em>porto</em> have the <strong>-a-</strong>? Originally it was <em>portao</em>, but over centuries of spoken Latin, people found it easier to say <em>porto</em> - languages naturally evolve to be more efficient!</li>
                </ul>

                <p class="grammar-text">
                    Here's the key insight: when you see a Latin verb, look for these two clues - the stem tells you 
                    <em>what's happening</em>, and the ending tells you <em>who's making it happen</em>.
                </p>
            </div>

            <!-- Verb Builder -->
            <div class="content-section">
                <h2>Building the Verb</h2>
                
                <div class="verb-builder">
                    <p class="builder-title">Click an ending to see how the verb is constructed:</p>
                    
                    <div class="formula-display" id="formula">
                        <span class="formula-part stem">port</span>
                        <span class="operator">+</span>
                        <span class="formula-part vowel" id="vowel" style="display:none">a</span>
                        <span class="operator" id="plus2" style="display:none">+</span>
                        <span class="formula-part ending" id="ending" style="display:none">?</span>
                        <span class="operator" id="equals" style="display:none">=</span>
                        <span class="formula-part result" id="result" style="display:none">?</span>
                    </div>

                    <div class="ending-selector">
                        <button class="ending-btn" onclick="showFormula('-o', 'porto', 'I carry', false)">-o (I)</button>
                        <button class="ending-btn" onclick="showFormula('-s', 'portas', 'you carry', true)">-s (you sg)</button>
                        <button class="ending-btn" onclick="showFormula('-t', 'portat', 'he carries', true)">-t (he/she/it)</button>
                        <button class="ending-btn" onclick="showFormula('-mus', 'portamus', 'we carry', true)">-mus (we)</button>
                        <button class="ending-btn" onclick="showFormula('-tis', 'portatis', 'you carry', true)">-tis (you pl)</button>
                        <button class="ending-btn" onclick="showFormula('-nt', 'portant', 'they carry', true)">-nt (they)</button>
                    </div>
                </div>

                <div class="info-note">
                    <strong>Fun fact:</strong> Latin's efficiency is amazing - <em>porto</em> packs "I am carrying" into just 5 letters, while English needs 13! This is why Latin was perfect for stone inscriptions where space was precious.
                </div>
            </div>

            <!-- Practice -->
            <div class="content-section">
                <h2>Practice Exercises</h2>
                
                <div class="practice-box">
                    <div class="practice-title">Exercise 1.1: Derivatives</div>
                    <div class="practice-content">
                        Give an English derivative from: navigo, clamo, laboro, ambulo, voco
                    </div>
                </div>

                <div class="practice-box">
                    <div class="practice-title">Exercise 1.2: Translation</div>
                    <div class="practice-content">
                        Translate into English: salutatis, portamus, parant, necat, ambulas, voco, clamamus, navigant, laboratis, pugnat
                    </div>
                </div>

                <div class="practice-box">
                    <div class="practice-title">Exercise 1.3: Singular ↔ Plural</div>
                    <div class="practice-content">
                        Change from singular to plural or vice versa, keeping the same person, then translate: 
                        vocatis, laboramus, portat, navigo, amamus, necas, pugnatis, ambulant, saluto, paras
                    </div>
                </div>

                <div class="practice-box">
                    <div class="practice-title">Exercise 1.4: English to Latin</div>
                    <div class="practice-content">
                        Translate into Latin: They greet, We walk, You (sg) kill, We carry, 
                        You (pl) are calling, She likes, I prepare, He shouts, You (sg) sail
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="nav-buttons">
                <a href="1-1.html" class="nav-btn nav-prev">← Previous</a>
                <a href="1-3.html" class="nav-btn nav-next">Next Lesson →</a>
            </div>
        </div>
    </main>

    <!-- Vocabulary Sidebar -->
    <div id="vocabSidebar" class="vocab-sidebar">
        <div class="vocab-header">
            <h3>Vocabulary</h3>
            <button id="closeSidebar" class="close-sidebar">×</button>
        </div>
        
        <div class="vocab-search">
            <input type="text" id="vocabSearch" placeholder="Search vocabulary..." />
            <select id="chapterFilter">
                <option value="1">Chapter 1</option>
                <option value="all">All Chapters</option>
            </select>
        </div>
        
        <div id="vocabList" class="vocab-list">
            <!-- Vocabulary will be loaded here -->
        </div>
    </div>

    <!-- Vocabulary Toggle Button -->
    <button id="vocabToggle" class="vocab-toggle">📚</button>

    <!-- Annotation Toggle Button -->
    <button id="annotationToggle" class="annotation-toggle">✏️</button>

    <script>
        function revealCell(cell) {
            if (cell.classList.contains('unrevealed')) {
                cell.classList.remove('unrevealed');
                cell.classList.add('revealed');
                updateToggleButton();
            } else if (cell.classList.contains('revealed')) {
                cell.classList.remove('revealed');
                cell.classList.add('unrevealed');
                updateToggleButton();
            }
        }

        function hideCell(cell) {
            if (cell.classList.contains('revealed')) {
                cell.classList.remove('revealed');
                cell.classList.add('unrevealed');
                updateToggleButton();
            }
        }

        function revealAll() {
            const cells = document.querySelectorAll('.unrevealed');
            cells.forEach(cell => {
                revealCell(cell);
            });
            updateToggleButton();
        }

        function hideAll() {
            const cells = document.querySelectorAll('.revealed');
            cells.forEach(cell => {
                hideCell(cell);
            });
            updateToggleButton();
        }

        function toggleAll() {
            const toggleBtn = document.getElementById('toggleBtn');
            if (toggleBtn.textContent === 'Reveal All') {
                revealAll();
            } else {
                hideAll();
            }
        }

        function updateToggleButton() {
            const toggleBtn = document.getElementById('toggleBtn');
            const unrevealedCells = document.querySelectorAll('.unrevealed');
            const revealedCells = document.querySelectorAll('.revealed');
            
            if (unrevealedCells.length === 0) {
                toggleBtn.textContent = 'Hide All';
            } else if (revealedCells.length === 0) {
                toggleBtn.textContent = 'Reveal All';
            } else {
                toggleBtn.textContent = 'Reveal All';
            }
        }

        function showFormula(ending, result, translation, hasVowel) {
            // Clear previous selection
            document.querySelectorAll('.ending-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Show formula parts
            const vowel = document.getElementById('vowel');
            const plus2 = document.getElementById('plus2');
            const endingEl = document.getElementById('ending');
            const equals = document.getElementById('equals');
            const resultEl = document.getElementById('result');
            
            if (hasVowel) {
                vowel.style.display = 'inline-block';
                plus2.style.display = 'inline';
            } else {
                vowel.style.display = 'none';
                plus2.style.display = 'none';
            }
            
            endingEl.style.display = 'inline-block';
            endingEl.textContent = ending;
            equals.style.display = 'inline';
            resultEl.style.display = 'inline-block';
            resultEl.innerHTML = `${result}<br><small style="font-size: 0.8em; opacity: 0.9;">(${translation})</small>`;
        }

        // Modal
        function showInfoModal() {
            document.getElementById('infoModal').style.display = 'block';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').style.display = 'none';
        }
    </script>

    <!-- Info Modal -->
    <div id="infoModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeInfoModal()">&times;</span>
            <div class="modal-header">
                <h2>salve! 👋</h2>
            </div>
            <div class="modal-body">
                <div class="modal-text">
                    <p>Thank you for checking out Classicalia!</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
