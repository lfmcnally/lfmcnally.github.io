<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Four Corners Vocabulary Game - Classicalia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .logo-section {
            padding: 1.5rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .nav-section {
            padding: 1rem 0.5rem;
        }

        .nav-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #9ca3af;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.75rem;
            margin: 0.125rem 0;
            border-radius: 8px;
            color: #4b5563;
            font-size: 0.9rem;
            transition: all 0.15s ease;
            cursor: pointer;
            user-select: none;
        }

        .nav-item:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .nav-item.active {
            background: #eef2ff;
            color: #0066ff;
            font-weight: 500;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .main-content {
            margin-left: 260px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.875rem 2rem;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .content-wrapper {
            flex: 1;
            overflow-y: auto;
        }

        .content-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .card h3 {
            color: #1f2937;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        /* Setup page specific styles */
        .chapter-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .chapter-checkbox {
            display: none;
        }

        .chapter-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-weight: 600;
            color: #4b5563;
        }

        .chapter-label:hover {
            background: #f3f4f6;
            border-color: #0066ff;
        }

        .chapter-checkbox:checked + .chapter-label {
            background: #eef2ff;
            border-color: #0066ff;
            color: #0066ff;
        }

        .quick-select {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 0.5rem 1rem;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .quick-btn:hover {
            border-color: #0066ff;
            color: #0066ff;
        }

        .timer-settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .timer-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.25rem;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .timer-option:hover {
            background: #f3f4f6;
            border-color: #0066ff;
        }

        .timer-option.active {
            background: #eef2ff;
            border-color: #0066ff;
        }

        .timer-option .time {
            font-size: 2rem;
            font-weight: 700;
            color: #0066ff;
            margin-bottom: 0.25rem;
        }

        .timer-option .label {
            font-size: 0.85rem;
            color: #6b7280;
        }

        /* Game page specific styles */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .timer-display {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .timer-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .timer-circle.warning {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .controls {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .game-btn {
            padding: 0.75rem 1.5rem;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .game-btn:hover {
            border-color: #0066ff;
            color: #0066ff;
        }

        .game-btn.primary {
            background: #0066ff;
            border-color: #0066ff;
            color: white;
        }

        .game-btn.primary:hover {
            background: #0052cc;
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .word-display {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border-radius: 12px;
            margin-bottom: 2rem;
            color: white;
            position: relative;
        }

        .word-timer {
            position: absolute;
            top: 1.5rem;
            right: 2rem;
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            opacity: 0.8;
            min-width: 60px;
        }

        .word-timer.warning {
            animation: pulse 1s infinite;
            color: #fbbf24;
        }

        .word-latin {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .word-info {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .scoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .corner-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 3px solid #e5e7eb;
            text-align: center;
            transition: all 0.3s ease;
        }

        .corner-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .corner-number {
            font-size: 3rem;
            font-weight: 700;
            color: #0066ff;
            margin-bottom: 0.5rem;
        }

        .corner-label {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 1rem;
        }

        .corner-score {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
        }

        .score-controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .score-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #e5e7eb;
            background: white;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .score-btn:hover {
            border-color: #0066ff;
            color: #0066ff;
        }

        .start-btn {
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%);
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 102, 255, 0.4);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation-text {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #4b5563;
            margin-bottom: 1rem;
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #0284c7;
            padding: 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1.5rem 0;
        }

        .info-box-title {
            font-weight: 700;
            color: #0c4a6e;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-box-text {
            color: #0c4a6e;
            line-height: 1.7;
        }

        .highlight-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #f59e0b;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-box {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.25rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #0066ff;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .corner-select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            background: white;
            cursor: pointer;
            transition: all 0.15s ease;
            margin-top: 0.5rem;
        }

        .corner-select:focus {
            outline: none;
            border-color: #0066ff;
        }

        .student-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.15s ease;
        }

        .student-row:hover {
            background: #f3f4f6;
            border-color: #0066ff;
        }

        .student-row.top-scorer {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-color: #f59e0b;
        }

        .student-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .student-rank {
            font-size: 1.5rem;
            font-weight: 700;
            color: #6b7280;
            min-width: 40px;
        }

        .student-rank.gold {
            color: #f59e0b;
        }

        .student-rank.silver {
            color: #6b7280;
        }

        .student-rank.bronze {
            color: #d97706;
        }

        .student-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
        }

        .student-score {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .student-points {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0066ff;
            min-width: 50px;
            text-align: right;
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .word-latin {
                font-size: 2.5rem;
            }
            
            .game-header {
                flex-direction: column;
            }
            
            .controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-section">
            <div class="logo">
                <div class="logo-icon">C</div>
                <span class="logo-text">Classicalia</span>
            </div>
        </div>

        <nav class="nav-section">
            <div class="nav-title">Game Sections</div>
            <div class="nav-item active" data-section="instructions">
                <span class="nav-icon">üìñ</span>
                <span>Instructions</span>
            </div>
            <div class="nav-item" data-section="setup">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span>Setup</span>
            </div>
            <div class="nav-item" data-section="game">
                <span class="nav-icon">üéÆ</span>
                <span>Play Game</span>
            </div>
        </nav>
    </aside>

    <main class="main-content">
        <div class="top-bar"></div>
        <div class="content-wrapper">
            <div class="content-container">

                <!-- Instructions Section -->
                <div class="section-content active" id="instructions">
                    <div class="card" style="background: linear-gradient(135deg, #0066ff 0%, #4d94ff 100%); color: white; border: none; margin-bottom: 2rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="font-size: 3rem;">üéØ</div>
                            <div>
                                <h3 style="color: white; margin: 0; font-size: 1.8rem;">Four Corners Vocabulary Game</h3>
                                <p style="margin: 0.5rem 0 0 0; opacity: 0.95; font-size: 1rem;">Test your Latin vocabulary knowledge!</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üéÆ How to Play</h3>
                        
                        <p class="explanation-text">
                            The Four Corners game is a fun, competitive way to practise vocabulary with the whole class.
                        </p>

                        <div class="info-box">
                            <div class="info-box-title">
                                <span style="font-size: 1.5rem;">üìã</span>
                                <span>Setup</span>
                            </div>
                            <div class="info-box-text">
                                <strong>Four students</strong> start in the four corners of the classroom. The rest of the class sits on the floor in the middle.
                            </div>
                        </div>

                        <h4 style="color: #2563eb; margin: 2rem 0 1rem; font-size: 1.2rem;">‚ö° Gameplay</h4>

                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: #f0f9ff; border: 2px solid #0284c7; border-radius: 8px; padding: 1.25rem; display: flex; align-items: start; gap: 1rem;">
                                <div style="font-size: 2rem; min-width: 40px;">1Ô∏è‚É£</div>
                                <div>
                                    <div style="font-weight: 700; color: #0c4a6e; margin-bottom: 0.5rem;">A word appears on the board</div>
                                    <div style="color: #0c4a6e; font-size: 0.95rem; line-height: 1.6;">For example: "am≈ç"</div>
                                </div>
                            </div>

                            <div style="background: #f0f9ff; border: 2px solid #0284c7; border-radius: 8px; padding: 1.25rem; display: flex; align-items: start; gap: 1rem;">
                                <div style="font-size: 2rem; min-width: 40px;">2Ô∏è‚É£</div>
                                <div>
                                    <div style="font-weight: 700; color: #0c4a6e; margin-bottom: 0.5rem;">First corner student translates</div>
                                    <div style="color: #0c4a6e; font-size: 0.95rem; line-height: 1.6;">If <strong>correct</strong>: move to the next corner student with a new word<br>If <strong>incorrect</strong>: opportunity goes to the floor</div>
                                </div>
                            </div>

                            <div style="background: #f0f9ff; border: 2px solid #0284c7; border-radius: 8px; padding: 1.25rem; display: flex; align-items: start; gap: 1rem;">
                                <div style="font-size: 2rem; min-width: 40px;">3Ô∏è‚É£</div>
                                <div>
                                    <div style="font-weight: 700; color: #0c4a6e; margin-bottom: 0.5rem;">Floor gets a chance</div>
                                    <div style="color: #0c4a6e; font-size: 0.95rem; line-height: 1.6;">If a floor student answers correctly, they <strong>swap places</strong> with the corner student who got it wrong</div>
                                </div>
                            </div>

                            <div style="background: #f0f9ff; border: 2px solid #0284c7; border-radius: 8px; padding: 1.25rem; display: flex; align-items: start; gap: 1rem;">
                                <div style="font-size: 2rem; min-width: 40px;">4Ô∏è‚É£</div>
                                <div>
                                    <div style="font-weight: 700; color: #0c4a6e; margin-bottom: 0.5rem;">Timer runs out</div>
                                    <div style="color: #0c4a6e; font-size: 0.95rem; line-height: 1.6;">Students still in corners when time's up each earn <strong>1 point</strong></div>
                                </div>
                            </div>
                        </div>

                        <div class="highlight-box">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="font-size: 2rem;">üéØ</div>
                                <h4 style="color: #92400e; margin: 0; font-size: 1.1rem;">Winning the Game</h4>
                            </div>
                            <p style="color: #78350f; line-height: 1.7; margin: 0;">
                                Play multiple rounds! The student with the most points at the end wins. You can keep a running tally throughout the lesson.
                            </p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="start-btn" onclick="showSection('setup')">
                            Set Up Game ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Setup Section -->
                <div class="section-content" id="setup">
                    <div class="card">
                        <h3>üë• Enter Student Names</h3>
                        <p class="explanation-text">Enter your students' names, one per line. You can enter as many as you need.</p>

                        <textarea id="student-names" placeholder="e.g.
Oliver
Emma
Charlie
Sophia
Harry
Amelia" style="width: 100%; min-height: 200px; padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; font-family: inherit; line-height: 1.6; resize: vertical;"></textarea>

                        <div class="stat-box" style="margin-top: 1.5rem;">
                            <div class="stat-value" id="student-count">0</div>
                            <div class="stat-label">students entered</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üìö Select Vocabulary Chapters</h3>
                        <p class="explanation-text">Choose which chapters from Suburani Book 1 you want to include in the game.</p>

                        <div class="quick-select">
                            <button class="quick-btn" onclick="selectAllChapters()">Select All</button>
                            <button class="quick-btn" onclick="clearAllChapters()">Clear All</button>
                            <button class="quick-btn" onclick="selectChapterRange(1, 8)">Chapters 1-8</button>
                            <button class="quick-btn" onclick="selectChapterRange(9, 16)">Chapters 9-16</button>
                        </div>

                        <div class="chapter-selector">
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch1" value="1" checked>
                                <label for="ch1" class="chapter-label">Chapter 1</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch2" value="2" checked>
                                <label for="ch2" class="chapter-label">Chapter 2</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch3" value="3" checked>
                                <label for="ch3" class="chapter-label">Chapter 3</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch4" value="4">
                                <label for="ch4" class="chapter-label">Chapter 4</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch5" value="5">
                                <label for="ch5" class="chapter-label">Chapter 5</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch6" value="6">
                                <label for="ch6" class="chapter-label">Chapter 6</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch7" value="7">
                                <label for="ch7" class="chapter-label">Chapter 7</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch8" value="8">
                                <label for="ch8" class="chapter-label">Chapter 8</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch9" value="9">
                                <label for="ch9" class="chapter-label">Chapter 9</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch10" value="10">
                                <label for="ch10" class="chapter-label">Chapter 10</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch11" value="11">
                                <label for="ch11" class="chapter-label">Chapter 11</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch12" value="12">
                                <label for="ch12" class="chapter-label">Chapter 12</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch13" value="13">
                                <label for="ch13" class="chapter-label">Chapter 13</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch14" value="14">
                                <label for="ch14" class="chapter-label">Chapter 14</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch15" value="15">
                                <label for="ch15" class="chapter-label">Chapter 15</label>
                            </div>
                            <div>
                                <input type="checkbox" class="chapter-checkbox" id="ch16" value="16">
                                <label for="ch16" class="chapter-label">Chapter 16</label>
                            </div>
                        </div>

                        <div class="stat-box" style="margin-top: 1.5rem;">
                            <div class="stat-value" id="word-count">60</div>
                            <div class="stat-label">words selected</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>‚è±Ô∏è Set Round Timer</h3>
                        <p class="explanation-text">Choose how long each round should last.</p>

                        <div class="timer-settings">
                            <div class="timer-option" onclick="selectTimer(60)">
                                <div class="time">1:00</div>
                                <div class="label">Quick Round</div>
                            </div>
                            <div class="timer-option active" onclick="selectTimer(120)">
                                <div class="time">2:00</div>
                                <div class="label">Standard</div>
                            </div>
                            <div class="timer-option" onclick="selectTimer(180)">
                                <div class="time">3:00</div>
                                <div class="label">Extended</div>
                            </div>
                            <div class="timer-option" onclick="selectTimer(300)">
                                <div class="time">5:00</div>
                                <div class="label">Marathon</div>
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="start-btn" onclick="startGame()" id="start-game-btn">
                            Start Game üéÆ
                        </button>
                    </div>
                </div>

                <!-- Game Section -->
                <div class="section-content" id="game">
                    <div class="game-header">
                        <div class="timer-display">
                            <div class="timer-circle" id="timer-circle">2:00</div>
                            <div>
                                <div style="font-size: 0.85rem; color: #6b7280; margin-bottom: 0.25rem;">Time Remaining</div>
                                <div style="font-size: 0.9rem; color: #9ca3af;" id="round-info">Round not started</div>
                            </div>
                        </div>
                        <div class="controls">
                            <button class="game-btn primary" onclick="toggleTimer()" id="timer-btn">
                                <span>‚ñ∂Ô∏è</span>
                                <span id="timer-btn-text">Start Timer</span>
                            </button>
                            <button class="game-btn" onclick="nextWord()">
                                <span>‚è≠Ô∏è</span>
                                <span>Next Word</span>
                            </button>
                            <button class="game-btn" onclick="resetRound()">
                                <span>üîÑ</span>
                                <span>Reset Round</span>
                            </button>
                        </div>
                    </div>

                    <div class="word-display" id="word-display">
                        <div class="word-timer" id="word-timer">5</div>
                        <div class="word-latin" id="word-latin">am≈ç</div>
                        <div class="word-info" id="word-info">amƒÅre, amƒÅvƒ´ - verb</div>
                    </div>

                    <div class="card">
                        <h3>üéØ Current Corners</h3>
                        <p class="explanation-text" style="margin-bottom: 2rem;">Track which students are currently in the corners. At the end of the round, award them points!</p>

                        <div class="scoring-grid">
                            <div class="corner-card">
                                <div class="corner-number">1Ô∏è‚É£</div>
                                <div class="corner-label">Corner 1</div>
                                <select class="corner-select" id="corner-1" onchange="updateCornerDisplay()">
                                    <option value="">Select student...</option>
                                </select>
                            </div>

                            <div class="corner-card">
                                <div class="corner-number">2Ô∏è‚É£</div>
                                <div class="corner-label">Corner 2</div>
                                <select class="corner-select" id="corner-2" onchange="updateCornerDisplay()">
                                    <option value="">Select student...</option>
                                </select>
                            </div>

                            <div class="corner-card">
                                <div class="corner-number">3Ô∏è‚É£</div>
                                <div class="corner-label">Corner 3</div>
                                <select class="corner-select" id="corner-3" onchange="updateCornerDisplay()">
                                    <option value="">Select student...</option>
                                </select>
                            </div>

                            <div class="corner-card">
                                <div class="corner-number">4Ô∏è‚É£</div>
                                <div class="corner-label">Corner 4</div>
                                <select class="corner-select" id="corner-4" onchange="updateCornerDisplay()">
                                    <option value="">Select student...</option>
                                </select>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="game-btn primary" onclick="awardPoints()" style="font-size: 1.1rem; padding: 1rem 2rem;">
                                <span>üèÜ</span>
                                <span>Award Points to Corner Students</span>
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üèÜ Student Leaderboard</h3>
                        <p class="explanation-text" style="margin-bottom: 1.5rem;">Track each student's total points. Click to manually adjust scores.</p>

                        <div id="student-leaderboard" style="display: grid; gap: 0.75rem;">
                            <!-- Student rows will be inserted here -->
                        </div>

                        <div class="stats-display">
                            <div class="stat-box">
                                <div class="stat-value" id="words-shown">0</div>
                                <div class="stat-label">Words Shown</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="words-remaining">60</div>
                                <div class="stat-label">Words Remaining</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="rounds-played">0</div>
                                <div class="stat-label">Rounds Played</div>
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="game-btn" onclick="showSection('setup')" style="font-size: 1rem; padding: 1rem 2rem;">
                            ‚Üê Back to Setup
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Load vocabulary data -->
    <script src="data/suburani-vocab.js"></script>

    <script>
        // Game state
        let gameState = {
            students: [],
            selectedChapters: [1, 2, 3],
            timerDuration: 120,
            vocabulary: [],
            currentWordIndex: 0,
            usedWords: [],
            currentCorners: ['', '', '', ''],
            timerRunning: false,
            timeRemaining: 120,
            timerInterval: null,
            wordTimerInterval: null,
            wordTimeRemaining: 5,
            roundsPlayed: 0
        };

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === sectionId) {
                    item.classList.add('active');
                }
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Sidebar navigation
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    showSection(this.getAttribute('data-section'));
                });
            });

            // Update word count initially
            updateWordCount();

            // Add event listeners to all chapter checkboxes
            document.querySelectorAll('.chapter-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateWordCount);
            });

            // Add event listener to student names textarea
            document.getElementById('student-names').addEventListener('input', updateStudentCount);
        });

        // Student management
        function updateStudentCount() {
            const names = document.getElementById('student-names').value
                .split('\n')
                .map(name => name.trim())
                .filter(name => name.length > 0);
            
            document.getElementById('student-count').textContent = names.length;
            
            // Disable start button if no students
            const startBtn = document.getElementById('start-game-btn');
            if (startBtn) {
                const hasChapters = document.querySelectorAll('.chapter-checkbox:checked').length > 0;
                startBtn.disabled = names.length === 0 || !hasChapters;
            }
        }

        function parseStudents() {
            const names = document.getElementById('student-names').value
                .split('\n')
                .map(name => name.trim())
                .filter(name => name.length > 0);
            
            return names.map(name => ({
                name: name,
                score: 0
            }));
        }

        // Chapter selection functions
        function selectAllChapters() {
            document.querySelectorAll('.chapter-checkbox').forEach(cb => {
                cb.checked = true;
            });
            updateWordCount();
        }

        function clearAllChapters() {
            document.querySelectorAll('.chapter-checkbox').forEach(cb => {
                cb.checked = false;
            });
            updateWordCount();
        }

        function selectChapterRange(start, end) {
            clearAllChapters();
            for (let i = start; i <= end; i++) {
                const checkbox = document.getElementById(`ch${i}`);
                if (checkbox) {
                    checkbox.checked = true;
                }
            }
            updateWordCount();
        }

        function updateWordCount() {
            const selectedChapters = Array.from(document.querySelectorAll('.chapter-checkbox:checked'))
                .map(cb => parseInt(cb.value));
            
            const filteredWords = suburaniVocabularyData.filter(word => 
                selectedChapters.includes(word.chapter)
            );
            
            document.getElementById('word-count').textContent = filteredWords.length;
            
            // Check if start button should be enabled
            updateStudentCount();
        }

        // Timer selection
        function selectTimer(seconds) {
            gameState.timerDuration = seconds;
            gameState.timeRemaining = seconds;
            
            document.querySelectorAll('.timer-option').forEach(opt => {
                opt.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
            
            updateTimerDisplay();
        }

        // Start game
        function startGame() {
            // Get students
            gameState.students = parseStudents();
            
            if (gameState.students.length === 0) {
                alert('Please enter at least one student name!');
                return;
            }

            // Get selected chapters
            gameState.selectedChapters = Array.from(document.querySelectorAll('.chapter-checkbox:checked'))
                .map(cb => parseInt(cb.value));
            
            if (gameState.selectedChapters.length === 0) {
                alert('Please select at least one chapter!');
                return;
            }
            
            // Filter vocabulary
            gameState.vocabulary = suburaniVocabularyData.filter(word => 
                gameState.selectedChapters.includes(word.chapter)
            );
            
            // Shuffle vocabulary
            gameState.vocabulary = shuffleArray(gameState.vocabulary);
            
            // Reset game state
            gameState.currentWordIndex = 0;
            gameState.usedWords = [];
            gameState.currentCorners = ['', '', '', ''];
            gameState.timeRemaining = gameState.timerDuration;
            gameState.timerRunning = false;
            gameState.roundsPlayed = 0;
            
            // Populate corner dropdowns
            populateCornerSelects();
            
            // Update displays
            updateWordDisplay();
            updateLeaderboard();
            updateTimerDisplay();
            updateStats();
            
            // Navigate to game section
            showSection('game');
        }

        function populateCornerSelects() {
            const sortedStudents = [...gameState.students].sort((a, b) => 
                a.name.localeCompare(b.name)
            );

            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`corner-${i}`);
                select.innerHTML = '<option value="">Select student...</option>';
                
                sortedStudents.forEach(student => {
                    const option = document.createElement('option');
                    option.value = student.name;
                    option.textContent = student.name;
                    select.appendChild(option);
                });
            }
        }

        function updateCornerDisplay() {
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`corner-${i}`);
                gameState.currentCorners[i - 1] = select.value;
            }
        }

        function awardPoints() {
            let awarded = 0;
            gameState.currentCorners.forEach(studentName => {
                if (studentName) {
                    const student = gameState.students.find(s => s.name === studentName);
                    if (student) {
                        student.score++;
                        awarded++;
                    }
                }
            });

            if (awarded > 0) {
                gameState.roundsPlayed++;
                updateLeaderboard();
                updateStats();
                
                // Show confirmation
                alert(`Awarded 1 point to ${awarded} student${awarded !== 1 ? 's' : ''}!`);
            } else {
                alert('Please select students in the corners first!');
            }
        }

        function updateLeaderboard() {
            const leaderboard = document.getElementById('student-leaderboard');
            
            // Sort students by score (descending)
            const sortedStudents = [...gameState.students].sort((a, b) => b.score - a.score);
            
            leaderboard.innerHTML = '';
            
            sortedStudents.forEach((student, index) => {
                const row = document.createElement('div');
                row.className = 'student-row' + (index === 0 && student.score > 0 ? ' top-scorer' : '');
                
                let rankEmoji = `${index + 1}.`;
                let rankClass = '';
                if (index === 0 && student.score > 0) {
                    rankEmoji = 'ü•á';
                    rankClass = 'gold';
                } else if (index === 1 && student.score > 0) {
                    rankEmoji = 'ü•à';
                    rankClass = 'silver';
                } else if (index === 2 && student.score > 0) {
                    rankEmoji = 'ü•â';
                    rankClass = 'bronze';
                }
                
                row.innerHTML = `
                    <div class="student-info">
                        <div class="student-rank ${rankClass}">${rankEmoji}</div>
                        <div class="student-name">${student.name}</div>
                    </div>
                    <div class="student-score">
                        <div class="student-points">${student.score}</div>
                        <div class="score-controls">
                            <button class="score-btn" onclick="adjustStudentScore('${student.name}', -1)">‚àí</button>
                            <button class="score-btn" onclick="adjustStudentScore('${student.name}', 1)">+</button>
                        </div>
                    </div>
                `;
                
                leaderboard.appendChild(row);
            });
        }

        function adjustStudentScore(studentName, amount) {
            const student = gameState.students.find(s => s.name === studentName);
            if (student) {
                student.score = Math.max(0, student.score + amount);
                updateLeaderboard();
            }
        }

        // Shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Update word display
        function updateWordDisplay() {
            if (gameState.currentWordIndex >= gameState.vocabulary.length) {
                // No more words - reshuffle
                gameState.vocabulary = shuffleArray(gameState.vocabulary);
                gameState.currentWordIndex = 0;
                gameState.usedWords = [];
            }
            
            const word = gameState.vocabulary[gameState.currentWordIndex];
            document.getElementById('word-latin').textContent = word.latin;
            document.getElementById('word-info').textContent = word.info;
            
            // Reset word timer
            gameState.wordTimeRemaining = 5;
            updateWordTimerDisplay();
            
            // Start word timer if round is running
            if (gameState.timerRunning) {
                startWordTimer();
            }
        }

        // Word timer functions
        function startWordTimer() {
            clearInterval(gameState.wordTimerInterval);
            gameState.wordTimeRemaining = 5;
            updateWordTimerDisplay();
            
            gameState.wordTimerInterval = setInterval(() => {
                gameState.wordTimeRemaining--;
                updateWordTimerDisplay();
                
                if (gameState.wordTimeRemaining <= 0) {
                    // Auto-advance to next word
                    nextWord();
                }
            }, 1000);
        }

        function stopWordTimer() {
            clearInterval(gameState.wordTimerInterval);
            gameState.wordTimeRemaining = 5;
            updateWordTimerDisplay();
        }

        function updateWordTimerDisplay() {
            const timerDisplay = document.getElementById('word-timer');
            timerDisplay.textContent = gameState.wordTimeRemaining;
            
            // Add warning class if 2 seconds or less
            if (gameState.wordTimeRemaining <= 2) {
                timerDisplay.classList.add('warning');
            } else {
                timerDisplay.classList.remove('warning');
            }
        }

        // Next word
        function nextWord() {
            gameState.usedWords.push(gameState.vocabulary[gameState.currentWordIndex]);
            gameState.currentWordIndex++;
            updateWordDisplay();
            updateStats();
        }

        // Timer functions
        function toggleTimer() {
            if (gameState.timerRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function startTimer() {
            gameState.timerRunning = true;
            document.getElementById('timer-btn-text').textContent = 'Pause';
            document.getElementById('round-info').textContent = 'Round in progress';
            
            // Start word timer
            startWordTimer();
            
            gameState.timerInterval = setInterval(() => {
                gameState.timeRemaining--;
                updateTimerDisplay();
                
                if (gameState.timeRemaining <= 0) {
                    endRound();
                }
            }, 1000);
        }

        function pauseTimer() {
            gameState.timerRunning = false;
            document.getElementById('timer-btn-text').textContent = 'Resume';
            document.getElementById('round-info').textContent = 'Round paused';
            clearInterval(gameState.timerInterval);
            
            // Stop word timer
            stopWordTimer();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const timerCircle = document.getElementById('timer-circle');
            timerCircle.textContent = timeString;
            
            // Add warning class if under 30 seconds
            if (gameState.timeRemaining <= 30 && gameState.timeRemaining > 0) {
                timerCircle.classList.add('warning');
            } else {
                timerCircle.classList.remove('warning');
            }
        }

        function endRound() {
            pauseTimer();
            stopWordTimer();
            document.getElementById('round-info').textContent = 'Round finished!';
            document.getElementById('timer-btn-text').textContent = 'Start Timer';
            
            alert('Time\'s up! Award points to students still in corners.');
        }

        function resetRound() {
            pauseTimer();
            stopWordTimer();
            gameState.timeRemaining = gameState.timerDuration;
            gameState.timerRunning = false;
            updateTimerDisplay();
            document.getElementById('timer-btn-text').textContent = 'Start Timer';
            document.getElementById('round-info').textContent = 'Round reset';
        }

        // Stats functions
        function updateStats() {
            document.getElementById('words-shown').textContent = gameState.usedWords.length;
            document.getElementById('words-remaining').textContent = 
                gameState.vocabulary.length - gameState.currentWordIndex;
            document.getElementById('rounds-played').textContent = gameState.roundsPlayed;
        }
    </script>
</body>
</html>
